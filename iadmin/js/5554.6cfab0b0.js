(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[5554],{71082:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>r});var o=s(16972),a=e([o]);o=(a.then?(await a)():a)[0];const r={beforeRouteEnter(e,t,s){s((e=>e.fromVueRoute=t.name||!1))},components:{},data(){return{loading:!1,fromVueRoute:!1}},mounted(){this.loading=!0,this.$nextTick((async function(){await this.$store.dispatch("quserAuth/AUTH_LOGOUT"),this.loading=!1;const e=localStorage.getItem("userName");e&&await(0,o.A)().setUsername(e);const t=localStorage.getItem("socialType");t&&"microsoft"===t&&await(0,o.A)().signOut()}))},computed:{routeToLogin(){return this.fromVueRoute?{name:"auth.login",query:{fromVueRoute:this.fromVueRoute}}:{name:"auth.login"}}}};i()}catch(r){i(r)}}))},46171:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>n});var o=s(16972),a=s(59430),r=e([o]);o=(r.then?(await r)():r)[0];const n={components:{socialBtn:a.A},emits:["logged"],computed:{token(){return(0,o.A)().getToken()},socialData(){return(0,o.A)().getDataLogin()},microsoftClient(){return this.$getSetting("isite::microsoftClientId")||!1},loading(){return(0,o.A)().getLoading()},cancelLogin(){return(0,o.A)().getCancelLogin()}},methods:{async signIn(){this.loading||(await(0,o.A)().signIn(),this.cancelLogin||await this.$store.dispatch("quserAuth/AUTH_SOCIAL_NETWORK",{type:"microsoft",token:this.token,socialData:this.socialData}).then((e=>{this.$emit("logged"),localStorage.setItem("socialType","microsoft")})).catch((e=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest"))})))}}};i()}catch(n){i(n)}}))},85370:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>L});s(10239);var o=s(79699),a=s(40933),r=s(81282),n=s(76955),l=s(77656),c=s(50735),u=s(50786),d=s(97991),m=s(47783),g=s(3194),h=s(81951),p=s(94461),f=s(85038),w=s.n(f),y=(s(50248),s(99526)["A"]),b=e([c,h]);[c,h]=b.then?(await b)():b;const L={props:{},components:{loginForm:o.A,registerForm:a.A,resetPassword:r.A,forceChangePassword:l.A,logout:c.A,facebookAuth:m.A,googleAuth:g.A,resetPasswordComplete:n.A,microsoftAuth:h.A,masterModal:u.A,emailAuth:d.A},beforeRouteEnter(e,t,s){s((e=>e.fromVueRoute=t.name||!1))},mounted(){this.$nextTick((function(){sessionStorage.removeItem("msal.interaction.status"),sessionStorage.removeItem("socialType"),this.init()}))},data(){return{fromVueRoute:!1,appConfig:y("app")}},computed:{authType(){return this.$route.meta.authType},settings(){let e=this.$getMediaSetting("iprofile::authBanner"),t={logo:this.$store.state.qsiteApp.logo,authTitle:this.$getSetting("iprofile::authTitle"),hideLogo:parseInt(this.$getSetting("iprofile::hideLogo")),authBanner:!(!e.path||e.path.includes("defaultLogo.jpg"))&&e};return t},withAuthSocial(){let e=parseInt(this.$getSetting("iprofile::registerUsersWithSocialNetworks"));return e&&"logout"!=this.authType},microsoftClient(){return this.$getSetting("isite::microsoftClientId")},allowLocalLogin(){return Boolean(Number(this.$getSetting("iprofile::allowLocalLogin")))},modeAuthType(){return this.$store.getters["qsiteApp/getConfigApp"]("iprofile.authType")||"withPassword"}},methods:{init(){},checkAfterLogin(){this.checkTimeZone(),this.redirectAfterLogin()},checkTimeZone(){p.A.defaults.params.setting.timezone=w().tz.guess()},redirectAfterLogin(){let e=this.$route.query.redirectTo||!1,t=this.$store.state.quserAuth.settings,s=t?.workSpace||"iadmin";const i=window.location.href.replace(this.appConfig.mode,s);e||s==y("app.mode")?this.$router.push({name:"app.home"}):this.$helper.openExternalURL(i,!1)}}};i()}catch(L){i(L)}}))},16972:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>f});var o=s(38734),a=s(717),r=s(58251),n=s(96206),l=s(21632),c=s(71915);const d={auth:{clientId:c.M_.getSetting("isite::microsoftClientId"),authority:c.M_.getSetting("iprofile::microsoftAuthUrl"),redirectUri:window.location.origin,postLogoutRedirectUri:window.location.origin},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,s)=>{if(!s)switch(e){case r.$.Error:return;case r.$.Info:return;case r.$.Verbose:return;case r.$.Warning:return}}},allowRedirectInIframe:!0}},m={scopes:c.M_.getSetting("iprofile::microsoftScopeLogin")},g={scopes:["User.Read","Mail.Read"],forceRefresh:!1},h=(0,o.Kh)({msalConfig:d,loginRequest:m,tokenRequest:g,username:null,token:null,loading:!1,cancelLogin:!0,cancelLogout:!1,dataLogin:{}}),p=new n.v(d);function f(){function e(){return h.msalConfig}function t(){return h.loginRequest}function s(){return h.tokenRequest}function i(){return h.cancelLogin}function o(e){h.cancelLogin=e}async function r(){try{o(!1),k();const e=await p.loginPopup(m);n(e),w(e.accessToken);const t=`${e.account.homeAccountId}-login.windows.net-refreshtoken-${d.auth.clientId}----`,s=JSON.parse(localStorage.getItem(t));e.refresh_token=s.secret||null,M(e),$()}catch(e){console.log(e),w(null),$(),o(!0),M({})}}function n(e){e?c(e.account.username):f()}function c(e){h.username=e,localStorage.setItem("userName",e)}async function u(){try{if(!h.username)return;await g();const e=p.getAccountByUsername(h.username);if(!e)return;const t={account:e,postLogoutRedirectUri:`${window.location.origin}#/auth/logout/`};await p.logoutRedirect(t)}catch(e){console.log(e)}}async function g(){try{return await p.ssoSilent(m)||null}catch(e){"InteractionRequiredAuthError"===e.name&&(localStorage.removeItem("socialType"),localStorage.removeItem("userName"))}}function f(){const e=p.getAllAccounts();0!==e.length&&(e.length>1?console.warn("Multiple accounts detected."):1===e.length&&(h.username=e[0].username))}function w(e){h.token=e}function y(){return h.token}function b(){a.A.index("apiRoutes.quser.authProviders",{refresh:!0}).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}function L(e){return e.account=p.getAccountByUsername(username),p.acquireTokenSilent(e).catch((t=>{if(console.warn("silent token acquisition fails. acquiring token using popup"),t instanceof l.CB)return p.acquireTokenPopup(e).then((e=>(console.log(e),e))).catch((e=>{console.error(e)}));console.warn(t)}))}function $(){h.loading=!1}function k(){h.loading=!0}function A(){return h.loading}function v(){return p.getAccountByUsername(h.username)}function M(e,t){h.dataLogin=e}function I(){return h.dataLogin}return{getMsalConfig:e,getLoginRequest:t,getTokenRequest:s,signIn:r,signOut:u,selectAccount:f,getToken:y,setToken:w,handleResponse:n,getAuthProvider:b,getTokenPopup:L,hideLoading:$,showLoading:k,getLoading:A,getCancelLogin:i,getAllAccounts:v,setDataLogin:M,getDataLogin:I,setUsername:c}}await p.initialize(),i()}catch(u){i(u)}}),1)},97991:(e,t,s)=>{"use strict";s.d(t,{A:()=>M});var i=s(61758),o=s(58790);const a={id:"formLoginEmailComponent"},r={key:0},n={class:"text-h6 text-center box-title"},l=["innerHTML"],c={class:"q-mt-xl text-center"},u={class:"text-body2"},d={class:"text-weight-bold"},m={class:"text-body2"},g={key:1},h={class:"text-justiy q-mb-md"},p={id:"formActions",class:"row full-width q-mb-md"};function f(e,t,s,f,w,y){const b=(0,i.g2)("q-btn"),L=(0,i.g2)("dynamic-field"),$=(0,i.g2)("q-spinner-oval"),k=(0,i.g2)("q-form");return(0,i.uX)(),(0,i.CE)("div",a,[w.sent?((0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("div",null,[(0,i.Lk)("div",n,(0,o.v_)(e.$tr("iprofile.cms.form.checkYourEmail")),1),(0,i.Lk)("div",{class:"text-body2 text-justify q-mt-md",innerHTML:w.sentEmailLabel},null,8,l)]),(0,i.Lk)("div",c,[(0,i.Lk)("div",u,[(0,i.Lk)("span",d,(0,o.v_)(e.$tr("iprofile.cms.form.notReceivedEmail")),1)]),(0,i.Lk)("div",m,(0,o.v_)(e.$tr("iprofile.cms.form.checkYourSpamFolder")),1),(0,i.bF)(b,{class:"q-mt-lg",onClick:t[0]||(t[0]=e=>y.init()),label:e.$tr("iprofile.cms.form.resendEmail"),color:"primary",rounded:"",unelevated:"","no-caps":""},null,8,["label"])])])):((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(k,{onSubmit:t[2]||(t[2]=e=>y.authenticate()),class:"row q-col-gutter-x-sm q-pt-sm",autocorrect:"off",autocomplete:"off",onValidationError:t[3]||(t[3]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,i.k6)((()=>[(0,i.Lk)("div",h,(0,o.v_)(e.$tr("iprofile.cms.form.introMessage")),1),(0,i.bF)(L,{class:"col-12",modelValue:w.email,"onUpdate:modelValue":t[1]||(t[1]=e=>w.email=e),field:y.emailConfig},null,8,["modelValue","field"]),(0,i.Lk)("div",p,[(0,i.bF)(b,{loading:w.loading,type:"submit",color:"primary",class:"full-width",rounded:"",unelevated:"","no-caps":""},{loading:(0,i.k6)((()=>[(0,i.bF)($)])),default:(0,i.k6)((()=>[(0,i.eW)((0,o.v_)(e.$tr("iprofile.cms.form.emailLogin"))+" ",1)])),_:1},8,["loading"])])])),_:1})]))])}const w={props:{},components:{},watch:{},mounted(){this.$nextTick((function(){}))},data(){return{loading:!1,email:"",sentEmailLabel:"",sent:!1}},computed:{emailConfig(){return{value:null,type:"input",props:{label:this.$tr("isite.cms.form.email"),rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.$helper.validateEmail(e)||this.$tr("isite.cms.message.fieldEmail")]}}}},methods:{init(){this.loading=!1,this.email="",this.sentEmailLabel=!1,this.sent=!1},authenticate(){this.loading=!0;const e={attributes:{email:this.email,redirectTo:window.location.href}};this.$crud.post("apiRoutes.quser.validateEmail",e).then((e=>{this.sentEmailLabel=this.$tr("iprofile.cms.form.sendEmailToVerify",{email:this.email}),this.sent=!0,this.loading=!1})).catch((e=>this.$alert.error({message:e})))}}};var y=s(12807),b=s(69001),L=s(21565),$=s(64379),k=s(98582),A=s.n(k);const v=(0,y.A)(w,[["render",f]]),M=v;A()(w,"components",{QBtn:b.A,QForm:L.A,QSpinnerOval:$.A})},77656:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var i=s(61758),o=s(58790);const a={id:"authResetPassword",class:"flex flex-center content-start"},r={class:"row justify-between full-width"};function n(e,t,s,n,l,c){const u=(0,i.g2)("dynamic-form"),d=(0,i.g2)("q-btn"),m=(0,i.g2)("q-spinner-oval");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(u,{modelValue:l.form,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form=e),blocks:c.dynamicForm.blocks,onSubmit:t[1]||(t[1]=e=>c.changePassword()),"no-actions":"",title:e.$tr("iprofile.cms.label.changePassword").toUpperCase(),class:"q-mb-md","default-col-class":"col-12",ref:"changePasswordForm"},null,8,["modelValue","blocks","title"]),(0,i.Lk)("div",r,[(0,i.bF)(d,{label:e.$tr("iprofile.cms.label.login"),unelevated:"","no-caps":"",rounded:"","text-color":"blue-grey",to:{name:"auth.login",query:this.$route.query},color:"blue-grey-1"},null,8,["label","to"]),(0,i.bF)(d,{loading:l.loading,type:"submit",color:"primary",rounded:"",unelevated:"","no-caps":"",onClick:t[2]||(t[2]=t=>e.$refs.changePasswordForm.changeStep("next",!0))},{loading:(0,i.k6)((()=>[(0,i.bF)(m)])),default:(0,i.k6)((()=>[(0,i.eW)((0,o.v_)(e.$tr("iprofile.cms.label.reset"))+" ",1)])),_:1},8,["loading"])])])}s(10239),s(717);const l={data(){return{form:{},loading:!1}},computed:{dynamicForm(){return{actions:{submit:{label:this.$tr("iprofile.cms.label.reset"),color:"primary",icon:null}},blocks:[{name:"main",fields:{textInfo:{type:"banner",vIf:this.$store.state.quserAuth.shouldChangePassword.shouldChangePassword,props:{textColor:"white",color:"amber",icon:"fas fa-exclamation-triangle",message:this.$store.state.quserAuth.shouldChangePassword?.description||""}},password:{value:null,type:"input",props:{label:`${this.$trp("isite.cms.form.password")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},newPassword:{value:null,type:"input",props:{label:`${this.$tr("iprofile.cms.label.newpassword")}*`,type:"password",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},newPasswordConfirmation:{value:null,type:"input",props:{label:`${this.$trp("isite.cms.form.checkPassword")}*`,type:"password",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.form.newPassword==e||this.$tr("isite.cms.message.fieldCheckPassword")]}}}}]}}},methods:{async changePassword(){this.loading=!0;let e={attributes:{...this.form,email:this.$store.state.quserAuth.userData.email}};this.$crud.post("apiRoutes.quser.changePassword",e).then((e=>{this.$alert.success({mode:"modal",title:this.$tr("iprofile.cms.label.changePassword"),message:this.$tr("iprofile.cms.message.changend"),actions:[{label:this.$tr("iprofile.cms.label.login"),handler:async()=>{await this.$store.dispatch("quserAuth/AUTH_LOGOUT"),this.$router.push({name:"auth.login",query:this.$route.query}),this.loading=!1}}]})})).catch((e=>{this.loading=!1}))}}};var c=s(12807),u=s(69001),d=s(64379),m=s(42876),g=s(98582),h=s.n(g);const p=(0,c.A)(l,[["render",n]]),f=p;h()(l,"components",{QBtn:u.A,QSpinnerOval:d.A,QLinearProgress:m.A})},79699:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var i=s(61758),o=s(58790);const a={class:"box-title text-uppercase q-mb-sm text-center"},r={key:0,class:"text-center text-caption text-grey-8 q-mb-md"},n={class:"text-center full-width"};function l(e,t,s,l,c,u){const d=(0,i.g2)("q-input"),m=(0,i.g2)("q-icon"),g=(0,i.g2)("q-btn"),h=(0,i.g2)("q-spinner-oval"),p=(0,i.g2)("q-form");return(0,i.uX)(),(0,i.CE)("div",{id:"formLoginComponent",style:(0,o.Tr)("max-width: "+(c.props.horizontal?"700px":"400px"))},[(0,i.Lk)("div",a,(0,o.v_)(e.$tr("iprofile.cms.label.login")),1),u.settings.authLoginCaption&&"null"!=u.settings.authLoginCaption?((0,i.uX)(),(0,i.CE)("div",r,(0,o.v_)(u.settings.authLoginCaption),1)):(0,i.Q3)("",!0),(0,i.bF)(p,{onSubmit:t[3]||(t[3]=e=>u.authenticate()),class:"row q-col-gutter-x-sm q-pt-sm",autocorrect:"off",autocomplete:"off",onValidationError:t[4]||(t[4]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,i.k6)((()=>[(0,i.Lk)("div",{class:(0,o.C4)(u.columnsFieldsClass)},[(0,i.bF)(d,{name:"username",autofocus:"",ref:"username",dense:"","data-test-id":"loginUserNameField",modelValue:c.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>c.form.username=e),type:"text",color:"primary",outlined:"",rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:`${e.$tr("isite.cms.form.email")} / ${e.$tr("isite.cms.form.userName")}`},null,8,["modelValue","rules","label"])],2),(0,i.Lk)("div",{class:(0,o.C4)(u.columnsFieldsClass)},[(0,i.bF)(d,{name:"password",ref:"password",dense:"",modelValue:c.form.password,"onUpdate:modelValue":t[2]||(t[2]=e=>c.form.password=e),type:c.isPwd?"password":"text",color:"primary",outlined:"",rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:e.$tr("isite.cms.form.password"),"data-test-id":"loginPasswordField"},{append:(0,i.k6)((()=>[(0,i.bF)(m,{name:c.isPwd?"fa-light fa-eye-slash":"fa-light fa-eye",class:"cursor-pointer",onClick:t[1]||(t[1]=e=>c.isPwd=!c.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules","label"])],2),(0,i.Lk)("div",{id:"formActions",class:(0,o.C4)("row full-width q-mb-md "+(u.withRegister?"justify-between":"justify-end"))},[u.withRegister?((0,i.uX)(),(0,i.Wv)(g,{key:0,label:e.$tr("iprofile.cms.label.createAccount"),unelevated:"","no-caps":"",to:{name:"auth.register",query:this.$route.query},color:"blue-grey-1","text-color":"blue-grey",rounded:""},null,8,["label","to"])):(0,i.Q3)("",!0),(0,i.bF)(g,{loading:c.loading,type:"submit",color:"primary",rounded:"",unelevated:"","no-caps":""},{loading:(0,i.k6)((()=>[(0,i.bF)(h)])),default:(0,i.k6)((()=>[(0,i.eW)((0,o.v_)(e.$tr("iprofile.cms.label.login"))+" ",1)])),_:1},8,["loading"])],2),(0,i.Lk)("div",n,[u.settings.allowResetPassword?((0,i.uX)(),(0,i.Wv)(g,{key:0,label:e.$tr("iprofile.cms.label.resetPassword"),unelevated:"","no-caps":"",to:{name:"auth.reset.password",query:this.$route.query},color:"blue-grey",rounded:"",flat:""},null,8,["label","to"])):(0,i.Q3)("",!0)])])),_:1})],4)}const c={props:{email:{default:null},horizontal:{type:Boolean,default:!1}},emits:["logged"],watch:{email(){this.setEmail()}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{props:{},form:{username:"",password:""},rememberData:!0,loading:!1,inRequest:!1,fromRoute:!1,isPwd:!0}},computed:{settings(){let e={authLoginCaption:this.$getSetting("iprofile::authLoginCaption"),allowResetPassword:this.$getSetting("iprofile::allowResetPassword")};return e},columnsFieldsClass(){return this.horizontal?"col-12 col-md-6":"col-12"},withRegister(){let e=this.$getSetting("iprofile::registerUsers");return!(!e||!parseInt(e))}},methods:{init(){this.props=this.$clone(this.$props),this.setAuthData()},async authenticate(){if(!this.inRequest){this.inRequest=!0,this.loading=!0;const{username:e,password:t}=this.form;this.$store.dispatch("quserAuth/AUTH_REQUEST",{username:e,password:t}).then((e=>{this.loading=!1,this.inRequest=!1,this.$emit("logged")})).catch((e=>{this.$alert.error(this.$tr("iprofile.cms.message.userOrPasswordInvalid")),this.loading=!1,this.inRequest=!1}))}},setAuthData(){let e=this.$route.query.email,t=this.email?this.$clone(this.email):e,s=this.$route.query.password;setTimeout((()=>{t&&(this.form.username=t),t?(this.form.username=t,this.$refs.password.focus(),s&&(this.form.password=s,this.authenticate())):this.$refs.username.focus()}),200)}}};var u=s(12807),d=s(21565),m=s(78020),g=s(24609),h=s(69001),p=s(64379),f=s(98582),w=s.n(f);const y=(0,u.A)(c,[["render",l]]),b=y;w()(c,"components",{QForm:d.A,QInput:m.A,QIcon:g.A,QBtn:h.A,QSpinnerOval:p.A})},50735:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>g});var o=s(2422),a=s(96113),r=s(12807),n=s(24609),l=s(69001),c=s(98582),u=s.n(c),d=e([a]);a=(d.then?(await d)():d)[0];const m=(0,r.A)(a.A,[["render",o.X]]),g=m;u()(a.A,"components",{QIcon:n.A,QBtn:l.A}),i()}catch(m){i(m)}}))},40933:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var i=s(61758),o=s(58790);const a={id:"formLoginComponent",class:"relative-position"},r={key:0,class:"text-center text-caption text-grey-8 q-mb-md"},n={id:"formContent"},l={class:"text-center full-width"};function c(e,t,s,c,u,d){const m=(0,i.g2)("dynamic-form"),g=(0,i.g2)("q-btn");return(0,i.uX)(),(0,i.CE)("div",a,[d.settings.authRegisterCaption&&"null"!=d.settings.authRegisterCaption?((0,i.uX)(),(0,i.CE)("div",r,(0,o.v_)(d.settings.authRegisterCaption),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",n,[(0,i.bF)(m,{modelValue:u.form,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form=e),blocks:d.dynamicForm.blocks,onSubmit:t[1]||(t[1]=e=>d.register()),actions:d.dynamicForm.actions,title:e.$tr("iprofile.cms.label.createAccount").toUpperCase(),class:"q-mb-md",loading:u.loading,"default-col-class":"col-12","use-captcha":!!d.settings.activateCaptcha},null,8,["modelValue","blocks","actions","title","loading","use-captcha"])]),(0,i.Lk)("div",l,[(0,i.bF)(g,{label:e.$tr("iprofile.cms.label.login"),unelevated:"","no-caps":"",to:{name:"auth.login",query:this.$route.query},color:"blue-grey",rounded:"",flat:""},null,8,["label","to"])])])}var u=s(99526)["A"];const d={components:{},emits:["logged"],watch:{async watchRoleId(e,t){e&&e!=this.selectedRoleId&&(this.selectedRoleId=this.$clone(e),await this.getRoleForm()),!e&&this.selectedRoleId&&(this.form["role-roleId"]=this.$clone(this.selectedRoleId))}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,form:{},authRoles:[],extraBlocks:[],selectedRoleId:null,mainFields:["roleId","email","password","passwordConfirmation","firstName","lastName","captcha"]}},props:{rolesToRegister:{type:String,default:"iprofile::rolesToRegister"}},computed:{dynamicForm(){let e={actions:{submit:{label:this.$tr("iprofile.cms.label.createAccount"),color:"primary",icon:null}},blocks:[{name:"main",fields:{email:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$tr("isite.cms.form.email")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.$helper.validateEmail(e)||this.$tr("isite.cms.message.fieldEmail")]}},password:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$tr("isite.cms.form.password")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},passwordConfirmation:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$tr("isite.cms.form.checkPassword")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.form["main-password"]==e||this.$tr("isite.cms.message.fieldCheckPassword")]}},...this.termsAndConditions?{terms:this.termsAndConditions}:{}}},...this.$clone(this.extraBlocks)]};return this.authRoles&&this.authRoles.length>=2&&e.blocks.unshift({name:"role",fields:{roleId:{value:null,type:"optionGroup",colClass:"col-12",props:{options:this.authRoles.map((e=>({label:`${this.$tr("iprofile.cms.label.registerAs")} ${e.name}`,value:e.id}))),color:"secondary",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}}}),e.blocks.forEach(((t,s)=>{let i={};Object.keys(t.fields).forEach((e=>i[`${t.name}-${e}`]={...t.fields[e],name:`${t.name}-${e}`})),e.blocks[s].fields=i})),e},settings(){return{politics:this.$getSetting("iprofile::registerUserWithPoliticsOfPrivacy"),terms:this.$getSetting("iprofile::registerUserWithTermsAndConditions"),rolesToRegister:this.$getSetting(this.rolesToRegister)||this.$getSetting("iprofile::rolesToRegister"),authRegisterCaption:this.$getSetting("iprofile::authRegisterCaption"),activateCaptcha:parseInt(this.$getSetting("isite::activateCaptcha"))}},termsAndConditions(){if("ipanel"!=u("app.mode"))return!1;let e=this.settings;if(!e.politics&&!e.terms)return!1;let t="";e.politics&&(t+=`<a href="${e.politics}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.privacyPolicy")}</b></a>,`),e.terms&&(t+=`<a href="${e.terms}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.termsAndConditions")}</b></a>,`);let s={name:"terms",value:!1,type:"checkbox",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:this.$tr("iprofile.cms.message.privacyData",{concatData:t,siteName:this.$getSetting("core::site-name")})}};return s},watchRoleId(){return this.form["role-roleId"]}},methods:{async init(){this.getAuthRoles()},getAuthRoles(){return new Promise(((e,t)=>{if(!this.settings.rolesToRegister)return t(!1);this.loading=!0;let s={refresh:!0,params:{include:"forms.fields",filter:{id:this.settings.rolesToRegister}}};this.$crud.index("apiRoutes.quser.roles",s).then((t=>{this.authRoles=t.data,this.loading=!1,1==t.data.length&&this.getRoleForm(),e(t.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading=!1,t(e)}))}))}))},getRoleForm(){return new Promise(((e,t)=>{this.extraBlocks=[];let s=this.form["role-roleId"]?this.authRoles.find((e=>e.id==this.form["role-roleId"])):this.authRoles[0];if(!s||!s.formId)return e(!1);this.loading=!0;let i={refresh:!0,params:{include:"blocks.fields"}};this.$crud.show("apiRoutes.qform.forms",s.formId,i).then((t=>{let s=t.data.blocks.map((e=>({...e,fields:e.fields.map((e=>e.dynamicField))})));s.forEach(((e,t)=>{let i={};e.fields.forEach(((e,t)=>i[`${e.name}`]=e)),s[t].fields=i})),this.extraBlocks=this.$clone(s),e(t.data),this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{t(e),this.loading=!1}))}))}))},getFormData(){let e=this.$clone(this.form),t=new Date,s={timezone:t.getTimezoneOffset()/60,language:navigator.language||navigator.userLanguage};return this.dynamicForm.blocks.forEach((t=>{Object.keys(e).forEach((i=>{let o=i.replace(`${t.name}-`,"");["fields","main","role"].includes(t.name)&&this.mainFields.includes(o)?s[o]=e[i]:Object.keys(t.fields).includes(i)&&(s[t.name]||(s[t.name]={}),s[t.name][o]=e[i])}))})),{attributes:this.$helper.toSnakeCase(s)}},async register(){this.loading=!0;let e=this.$clone(this.getFormData());this.$crud.post("apiRoutes.quser.register",e).then((t=>{let s={username:e.attributes.email,password:e.attributes.password};this.$store.dispatch("quserAuth/AUTH_REQUEST",s).then((e=>this.$emit("logged"))),this.loading=!1})).catch((e=>{this.loading=!1}))}}};var m=s(12807),g=s(69001),h=s(76100),p=s(36883),f=s(98582),w=s.n(f);const y=(0,m.A)(d,[["render",c]]),b=y;w()(d,"components",{QBtn:g.A,QOptionGroup:h.A,QRadio:p.A})},81282:(e,t,s)=>{"use strict";s.d(t,{A:()=>M});var i=s(61758),o=s(58790);const a={id:"authResetPassword"},r={id:"formResetPasswordContent"},n={class:"box-title text-uppercase q-mb-sm text-center"},l={class:"row justify-between"},c={slot:"loading"},u={class:"text-subtitle1 text-justify"},d={class:"text-center q-mt-sm"};function m(e,t,s,m,g,h){const p=(0,i.g2)("q-input"),f=(0,i.g2)("dynamic-field"),w=(0,i.g2)("q-btn"),y=(0,i.g2)("q-spinner-oval"),b=(0,i.g2)("q-form"),L=(0,i.g2)("q-card-section"),$=(0,i.g2)("q-card"),k=(0,i.g2)("q-dialog");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",r,[(0,i.Lk)("div",n,(0,o.v_)(e.$tr("iprofile.cms.label.resetPassword")),1),(0,i.bF)(b,{onSubmit:t[2]||(t[2]=e=>h.resetPassword()),autocomplete:"off",onValidationError:t[3]||(t[3]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,i.k6)((()=>[(0,i.bF)(p,{name:"username",autofocus:"",ref:"username",autocomplete:"off",outlined:"",dense:"",label:`${e.$tr("isite.cms.form.email")} *`,modelValue:g.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>g.form.username=e),type:"text",color:"blue-grey",class:"q-mb-sm",rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired"),t=>e.$helper.validateEmail(t)||e.$tr("isite.cms.message.fieldEmail")]},null,8,["label","modelValue","rules"]),(0,i.bF)(f,{field:{type:"captcha"},modelValue:g.form.captcha,"onUpdate:modelValue":t[1]||(t[1]=e=>g.form.captcha=e)},null,8,["modelValue"]),(0,i.Lk)("div",l,[(0,i.bF)(w,{label:e.$tr("iprofile.cms.label.login"),"no-caps":"",rounded:"",unelevated:"",to:{name:"auth.login",query:this.$route.query},color:"blue-grey-1","text-color":"blue-grey"},null,8,["label","to"]),(0,i.bF)(w,{loading:g.loading,color:"primary",type:"submit",label:e.$tr("isite.cms.label.reset"),unelevated:"",rounded:"","no-caps":""},{default:(0,i.k6)((()=>[(0,i.Lk)("div",c,[(0,i.bF)(y,{class:"on-left"}),(0,i.eW)(" "+(0,o.v_)(`${e.$tr("isite.cms.label.validating")}...`),1)])])),_:1},8,["loading","label"])])])),_:1})]),(0,i.bF)(k,{persistent:"",modelValue:g.modal.show,"onUpdate:modelValue":t[4]||(t[4]=e=>g.modal.show=e)},{default:(0,i.k6)((()=>[(0,i.bF)($,null,{default:(0,i.k6)((()=>[(0,i.bF)(L,null,{default:(0,i.k6)((()=>[(0,i.Lk)("p",u,(0,o.v_)(g.modal.message),1),(0,i.Lk)("div",d,[(0,i.bF)(w,{unelevated:"",rounded:"",label:"Iniciar sesion",to:{name:"auth.login"},color:"primary"},null,8,["to"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const g={props:{email:{default:null}},watch:{email(){this.setEmail()}},mounted(){this.$nextTick((function(){this.setEmail()}))},data(){return{loading:!1,form:{username:"",captcha:!1},modal:{show:!1,message:null}}},methods:{async resetPassword(){this.loading=!0;const{username:e,captcha:t}=this.form;this.$store.dispatch("quserAuth/RESET_PASSWORD_REQUEST",{username:e,captcha:t}).then((e=>{this.loading=!1,this.modal={show:!0,message:e.data?.message||this.$tr("iprofile.cms.message.reset")}})).catch((({response:e})=>{this.$alert.error(e.data.errors),this.loading=!1}))},setEmail(){this.email?this.form.username=this.$clone(this.email):this.$refs.username.focus()}}};var h=s(12807),p=s(21565),f=s(78020),w=s(69001),y=s(64379),b=s(57201),L=s(97569),$=s(27066),k=s(98582),A=s.n(k);const v=(0,h.A)(g,[["render",m]]),M=v;A()(g,"components",{QForm:p.A,QInput:f.A,QBtn:w.A,QSpinnerOval:y.A,QDialog:b.A,QCard:L.A,QCardSection:$.A})},76955:(e,t,s)=>{"use strict";s.d(t,{A:()=>A});var i=s(61758),o=s(58790);const a={id:"authResetPassword",class:"flex flex-center content-start"},r={class:"format-cotainer"},n={id:"btnGoLogin",class:"text-center q-mt-sm"},l={class:"text-green text-center text-h6"},c={class:"text-subtitle1 text-justify"},u={class:"text-center q-mt-sm"};function d(e,t,s,d,m,g){const h=(0,i.g2)("dynamic-form"),p=(0,i.g2)("q-btn"),f=(0,i.g2)("q-icon"),w=(0,i.g2)("q-card-section"),y=(0,i.g2)("q-card"),b=(0,i.g2)("q-dialog");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",r,[(0,i.bF)(h,{modelValue:m.form,"onUpdate:modelValue":t[0]||(t[0]=e=>m.form=e),blocks:g.dynamicForm.blocks,onSubmit:t[1]||(t[1]=e=>g.changePassword()),actions:g.dynamicForm.actions,title:e.$tr("iprofile.cms.label.reset").toUpperCase(),class:"q-mb-md","default-col-class":"col-12"},null,8,["modelValue","blocks","actions","title"]),(0,i.Lk)("div",n,[(0,i.bF)(p,{class:"text-capitalize",flat:"",label:e.$tr("iprofile.cms.label.login"),to:{name:"auth.login"},color:"grey-8"},null,8,["label","to"])])]),(0,i.bF)(b,{persistent:"",modelValue:m.showMessage,"onUpdate:modelValue":t[2]||(t[2]=e=>m.showMessage=e)},{default:(0,i.k6)((()=>[(0,i.bF)(y,null,{default:(0,i.k6)((()=>[(0,i.bF)(w,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",l,[(0,i.bF)(f,{name:"fas fa-check",size:"20px"}),(0,i.eW)(" "+(0,o.v_)(e.$tr("isite.cms.label.ready")),1)]),(0,i.Lk)("p",c,(0,o.v_)(e.$tr("iprofile.cms.message.changend")),1),(0,i.Lk)("div",u,[(0,i.bF)(p,{label:e.$tr("iprofile.cms.label.login"),to:{name:"auth.login",query:{email:m.email}},color:"primary"},null,8,["label","to"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const m={data(){return{form:{},email:"",showMessage:!1,loading:!1,mainFields:["password","passwordConfirmation"]}},computed:{dynamicForm(){let e={actions:{submit:{label:this.$tr("iprofile.cms.label.reset"),color:"primary",icon:null}},blocks:[{name:"main",fields:{password:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$trp("isite.cms.form.password")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},passwordConfirmation:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$trp("isite.cms.form.checkPassword")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.form["main-password"]==e||this.$tr("isite.cms.message.fieldCheckPassword")]}}}}]};return e.blocks.forEach(((t,s)=>{let i={};Object.keys(t.fields).forEach((e=>i[`${t.name}-${e}`]={...t.fields[e],name:`${t.name}-${e}`})),e.blocks[s].fields=i})),e}},methods:{getFormData(){const e=this.$clone(this.form),t={password:null,passwordConfirmation:null,userId:this.$route.params.userId,token:this.$route.params.token};return this.dynamicForm.blocks.forEach((s=>{Object.keys(e).forEach((i=>{let o=i.replace(`${s.name}-`,"");["main"].includes(s.name)&&this.mainFields.includes(o)&&(t[o]=e[i])}))})),t},async changePassword(){this.loading=!0;let e=this.$clone(this.getFormData());this.$store.dispatch("quserAuth/CHANGED_PASSWORD_REQUEST",e).then((e=>{this.loading=!1,e.data&&e.data.email&&(this.email=e.data.email),this.showMessage=!0})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest")),this.loading=!1}))}))}}};var g=s(12807),h=s(69001),p=s(57201),f=s(97569),w=s(27066),y=s(24609),b=s(42876),L=s(98582),$=s.n(L);const k=(0,g.A)(m,[["render",d]]),A=k;$()(m,"components",{QBtn:h.A,QDialog:p.A,QCard:f.A,QCardSection:w.A,QIcon:y.A,QLinearProgress:b.A})},47783:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s(61758);function o(e,t,o,a,r,n){const l=(0,i.g2)("socialBtn");return n.appIdFacebook?((0,i.uX)(),(0,i.Wv)(l,{key:0,onClick:t[0]||(t[0]=e=>n.signIn()),loading:r.loading,title:`${e.$tr("isite.cms.label.continueWith")} ${e.$tr("isite.cms.label.facebook")}`,icon:s(13063)},null,8,["loading","title","icon"])):(0,i.Q3)("",!0)}var a=s(59430);const r={props:{buttonProps:{default:()=>({})}},emits:["logged"],components:{socialBtn:a.A},watch:{},mounted(){this.$nextTick((function(){this.addCDN()}))},data(){return{success:!0,loading:!1}},computed:{appIdFacebook(){return this.$getSetting("isite::facebookClientId")},propsButton(){return{color:"blue",icon:"fab fa-facebook",loading:this.loading,vIf:this.success,...this.buttonProps}}},methods:{addCDN(){let e=this.appIdFacebook;window.fbAsyncInit=function(){FB.init({appId:e,autoLogAppEvents:!0,xfbml:!0,version:"v4.0"})},function(e,t,s){var i,o=e.getElementsByTagName(t)[0];e.getElementById(s)||(i=e.createElement(t),i.id=s,i.src="https://connect.facebook.net/en_US/sdk.js",o?.parentNode?.insertBefore(i,o))}(document,"script","facebook-jssdk")},signIn(){let e=this;this.loading=!0,FB.getLoginStatus((function(t){if("connected"==t.status)return e.login(t);FB.login((t=>{e.login(t)}),{auth_type:"reauthorize",scope:"public_profile,email"})}))},login(e){if("connected"!=e.status)return this.loading=!1;let t=e.authResponse.accessToken;this.$store.dispatch("quserAuth/AUTH_SOCIAL_NETWORK",{type:"facebook",token:t}).then((e=>{this.$emit("logged"),this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest")),this.loading=!1}))}))}}};var n=s(12807);const l=(0,n.A)(r,[["render",o]]),c=l},3194:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s(61758);function o(e,t,o,a,r,n){const l=(0,i.g2)("socialBtn");return n.clientIdGoogle?((0,i.uX)(),(0,i.Wv)(l,{key:0,loading:r.loading,onClick:t[0]||(t[0]=e=>n.signIn()),title:`${e.$tr("isite.cms.label.continueWith")} ${e.$tr("isite.cms.label.google")}`,icon:s(98318)},null,8,["loading","title","icon"])):(0,i.Q3)("",!0)}var a=s(59430);const r={props:{buttonProps:{default:()=>({})}},emits:["logged"],components:{socialBtn:a.A},watch:{},mounted(){this.$nextTick((function(){this.addCDN()}))},data(){return{success:!0,loading:!1}},computed:{clientIdGoogle(){return this.$getSetting("isite::googleClientId")},propsButton(){return{color:"red",icon:"fab fa-google",loading:this.loading,vIf:this.success,...this.buttonProps}}},methods:{addCDN(){let e=document.createElement("script");e.setAttribute("src","https://accounts.google.com/gsi/client"),e.onload=this.loadClientId(),document.head.appendChild(e)},loadClientId(){setTimeout((()=>{let e=this.clientIdGoogle||null;e&&google.accounts.id.initialize({client_id:e,callback:this.login,scope:"profile email openid",cancel_on_tap_outside:!1,context:"use"})}),500)},signIn(e){google.accounts.id.prompt()},login(e){let t=e.credential;if(!t)return this.loading=!1,this.$alert.error(this.$tr("isite.cms.message.errorRequest"));this.$store.dispatch("quserAuth/AUTH_SOCIAL_NETWORK",{type:"google",token:t}).then((e=>{this.$emit("logged"),this.loading=!1})).catch((e=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest")),this.loading=!1}))}}};var n=s(12807);const l=(0,n.A)(r,[["render",o]]),c=l},81951:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>c});var o=s(45125),a=s(44118),r=s(12807),n=e([a]);a=(n.then?(await n)():n)[0];const l=(0,r.A)(a.A,[["render",o.X]]),c=l;i()}catch(l){i(l)}}))},59430:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var i=s(61758),o=s(58790);const a={class:"tw-shadow-lg tw-border tw-bg-white tw-text-sm tw-py-3 tw-px-4 tw-rounded tw-w-full tw-cursor-pointer hover:tw-bg-gray-100 tw-my-2"},r={class:"tw-flex"},n={class:"tw-w-6"},l=["src"],c={class:"tw-w-11/12 tw-text-center tw-font-bold"};function u(e,t,s,u,d,m){const g=(0,i.g2)("q-spinner");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",r,[(0,i.Lk)("div",n,[(0,i.Lk)("img",{class:"tw-w-6 tw-h-6",src:s.icon,alt:""},null,8,l)]),(0,i.Lk)("div",c,(0,o.v_)(s.title),1),s.loading?((0,i.uX)(),(0,i.Wv)(g,{key:0,color:"primary",size:"23px",thickness:2})):(0,i.Q3)("",!0)])])}const d={props:{title:{type:String,default:()=>null},icon:{type:String,default:()=>null},loading:{type:Boolean,default:!1}}};var m=s(12807),g=s(11895),h=s(98582),p=s.n(h);const f=(0,m.A)(d,[["render",u]]),w=f;p()(d,"components",{QSpinner:g.A})},25554:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.r(t),s.d(t,{default:()=>g});var o=s(68023),a=s(44851),r=s(12807),n=s(37015),l=s(69001),c=s(98582),u=s.n(c),d=e([a]);a=(d.then?(await d)():d)[0];const m=(0,r.A)(a.A,[["render",o.X]]),g=m;u()(a.A,"components",{QSeparator:n.A,QBtn:l.A}),i()}catch(m){i(m)}}))},13063:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgNDggNDgiIHdpZHRoPSI0OHB4IiBoZWlnaHQ9IjQ4cHgiPjxsaW5lYXJHcmFkaWVudCBpZD0iTGQ2c3FydGN4TXlja0VsNnhlRGRNYSIgeDE9IjkuOTkzIiB4Mj0iNDAuNjE1IiB5MT0iOS45OTMiIHkyPSI0MC42MTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMyYWE0ZjQiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDdhZDkiLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGZpbGw9InVybCgjTGQ2c3FydGN4TXlja0VsNnhlRGRNYSkiIGQ9Ik0yNCw0QzEyLjk1NCw0LDQsMTIuOTU0LDQsMjRzOC45NTQsMjAsMjAsMjBzMjAtOC45NTQsMjAtMjBTMzUuMDQ2LDQsMjQsNHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYuNzA3LDI5LjMwMWg1LjE3NmwwLjgxMy01LjI1OGgtNS45ODl2LTIuODc0YzAtMi4xODQsMC43MTQtNC4xMjEsMi43NTctNC4xMjFoMy4yODNWMTIuNDYgYy0wLjU3Ny0wLjA3OC0xLjc5Ny0wLjI0OC00LjEwMi0wLjI0OGMtNC44MTQsMC03LjYzNiwyLjU0Mi03LjYzNiw4LjMzNHYzLjQ5OEgxNi4wNnY1LjI1OGg0Ljk0OHYxNC40NTIgQzIxLjk4OCw0My45LDIyLjk4MSw0NCwyNCw0NGMwLjkyMSwwLDEuODItMC4wODQsMi43MDctMC4yMDRWMjkuMzAxeiIvPjwvc3ZnPg=="},98318:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgNDggNDgiIHdpZHRoPSI0OHB4IiBoZWlnaHQ9IjQ4cHgiPjxwYXRoIGZpbGw9IiNmYmMwMmQiIGQ9Ik00My42MTEsMjAuMDgzSDQyVjIwSDI0djhoMTEuMzAzYy0xLjY0OSw0LjY1Ny02LjA4LDgtMTEuMzAzLDhjLTYuNjI3LDAtMTItNS4zNzMtMTItMTIJczUuMzczLTEyLDEyLTEyYzMuMDU5LDAsNS44NDIsMS4xNTQsNy45NjEsMy4wMzlsNS42NTctNS42NTdDMzQuMDQ2LDYuMDUzLDI5LjI2OCw0LDI0LDRDMTIuOTU1LDQsNCwxMi45NTUsNCwyNHM4Ljk1NSwyMCwyMCwyMAlzMjAtOC45NTUsMjAtMjBDNDQsMjIuNjU5LDQzLjg2MiwyMS4zNSw0My42MTEsMjAuMDgzeiIvPjxwYXRoIGZpbGw9IiNlNTM5MzUiIGQ9Ik02LjMwNiwxNC42OTFsNi41NzEsNC44MTlDMTQuNjU1LDE1LjEwOCwxOC45NjEsMTIsMjQsMTJjMy4wNTksMCw1Ljg0MiwxLjE1NCw3Ljk2MSwzLjAzOQlsNS42NTctNS42NTdDMzQuMDQ2LDYuMDUzLDI5LjI2OCw0LDI0LDRDMTYuMzE4LDQsOS42NTYsOC4zMzcsNi4zMDYsMTQuNjkxeiIvPjxwYXRoIGZpbGw9IiM0Y2FmNTAiIGQ9Ik0yNCw0NGM1LjE2NiwwLDkuODYtMS45NzcsMTMuNDA5LTUuMTkybC02LjE5LTUuMjM4QzI5LjIxMSwzNS4wOTEsMjYuNzE1LDM2LDI0LDM2CWMtNS4yMDIsMC05LjYxOS0zLjMxNy0xMS4yODMtNy45NDZsLTYuNTIyLDUuMDI1QzkuNTA1LDM5LjU1NiwxNi4yMjcsNDQsMjQsNDR6Ii8+PHBhdGggZmlsbD0iIzE1NjVjMCIgZD0iTTQzLjYxMSwyMC4wODNMNDMuNTk1LDIwTDQyLDIwSDI0djhoMTEuMzAzYy0wLjc5MiwyLjIzNy0yLjIzMSw0LjE2Ni00LjA4Nyw1LjU3MQljMC4wMDEtMC4wMDEsMC4wMDItMC4wMDEsMC4wMDMtMC4wMDJsNi4xOSw1LjIzOEMzNi45NzEsMzkuMjA1LDQ0LDM0LDQ0LDI0QzQ0LDIyLjY1OSw0My44NjIsMjEuMzUsNDMuNjExLDIwLjA4M3oiLz48L3N2Zz4="},29985:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNDk5LjYgMjUwMCIgdmlld0JveD0iMCAwIDI0OTkuNiAyNTAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0xMTg3LjkgMTE4Ny45aC0xMTg3Ljl2LTExODcuOWgxMTg3Ljl6IiBmaWxsPSIjZjE1MTFiIi8+PHBhdGggZD0ibTI0OTkuNiAxMTg3LjloLTExODh2LTExODcuOWgxMTg3Ljl2MTE4Ny45eiIgZmlsbD0iIzgwY2MyOCIvPjxwYXRoIGQ9Im0xMTg3LjkgMjUwMGgtMTE4Ny45di0xMTg3LjloMTE4Ny45eiIgZmlsbD0iIzAwYWRlZiIvPjxwYXRoIGQ9Im0yNDk5LjYgMjUwMGgtMTE4OHYtMTE4Ny45aDExODcuOXYxMTg3Ljl6IiBmaWxsPSIjZmJiYzA5Ii8+PC9zdmc+"},96113:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>o.A});var o=s(71082),a=e([o]);o=(a.then?(await a)():a)[0],i()}catch(r){i(r)}}))},44118:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>o.A});var o=s(46171),a=e([o]);o=(a.then?(await a)():a)[0],i()}catch(r){i(r)}}))},44851:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{A:()=>o.A});var o=s(85370),a=e([o]);o=(a.then?(await a)():a)[0],i()}catch(r){i(r)}}))},2422:(e,t,s)=>{"use strict";s.d(t,{X:()=>n});var i=s(61758),o=s(58790);const a={id:"pageLogout",class:"text-center"},r={class:"text-grey-8 q-headline q-mt-md"};function n(e,t,s,n,l,c){const u=(0,i.g2)("q-icon"),d=(0,i.g2)("q-btn");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(u,{name:"fas fa-user-lock",color:"primary",size:"60px"}),(0,i.Lk)("div",r,(0,o.v_)(e.$tr("iprofile.cms.message.logout")),1),(0,i.bF)(d,{label:e.$tr("iprofile.cms.label.login"),color:"primary",loading:l.loading,rounded:"",unelevated:"",class:"q-mt-md",to:c.routeToLogin},null,8,["label","loading","to"])])}},45125:(e,t,s)=>{"use strict";s.d(t,{X:()=>o});var i=s(61758);function o(e,t,o,a,r,n){const l=(0,i.g2)("socialBtn");return n.microsoftClient?((0,i.uX)(),(0,i.Wv)(l,{key:0,title:`${e.$tr("isite.cms.label.continueWith")} ${e.$tr("isite.cms.label.microsoft")}`,icon:s(29985),onClick:n.signIn},null,8,["title","icon","onClick"])):(0,i.Q3)("",!0)}},68023:(e,t,s)=>{"use strict";s.d(t,{X:()=>y});s(10239);var i=s(61758),o=s(58790);const a={id:"authWrapperPage"},r={class:"row"},n={class:"wrapp__content flex flex-center justify-center"},l={class:"wrapp__content_sub q-pa-md"},c={key:0,class:"wrapp__title q-mb-md"},u={key:1,class:"wrapp__logo logo-bg-primary q-mb-xl"},d=["src"],m={class:"q-mb-md"},g={key:0},h={key:0},p={key:2,style:{"min-height":"auto"}},f={class:"row justify-center q-gutter-sm"},w={class:"tw-flex tw-justify-end tw--mt-10 tw-mr-2 tw-mb-2"};function y(e,t,s,y,b,L){const $=(0,i.g2)("login-form"),k=(0,i.g2)("register-form"),A=(0,i.g2)("reset-password"),v=(0,i.g2)("reset-password-complete"),M=(0,i.g2)("force-change-password"),I=(0,i.g2)("email-auth"),C=(0,i.g2)("logout"),T=(0,i.g2)("q-separator"),j=(0,i.g2)("google-auth"),N=(0,i.g2)("facebook-auth"),x=(0,i.g2)("microsoftAuth"),D=(0,i.g2)("q-btn");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",r,[L.settings.authBanner?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"wrapp__banner col-12 col-md-4",style:(0,o.Tr)(`background-image: url('${L.settings.authBanner.path}')`)},null,4)):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,o.C4)("col-12 "+(L.settings.authBanner?"col-md-8":""))},[(0,i.Lk)("div",n,[(0,i.Lk)("div",l,[L.settings.authTitle&&"null"!=L.settings.authTitle?((0,i.uX)(),(0,i.CE)("div",c,(0,o.v_)(L.settings.authTitle),1)):(0,i.Q3)("",!0),L.settings.hideLogo?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",u,[(0,i.Lk)("img",{src:L.settings.logo},null,8,d)])),(0,i.Lk)("div",m,[L.allowLocalLogin?((0,i.uX)(),(0,i.CE)("div",g,["withPassword"===L.modeAuthType?((0,i.uX)(),(0,i.CE)("div",h,["login"==L.authType?((0,i.uX)(),(0,i.Wv)($,{key:0,onLogged:t[0]||(t[0]=e=>L.checkAfterLogin()),class:"full-width"})):(0,i.Q3)("",!0),"register"==L.authType?((0,i.uX)(),(0,i.Wv)(k,{key:1,onLogged:t[1]||(t[1]=e=>L.checkAfterLogin()),class:"full-width"})):(0,i.Q3)("",!0),"resetPassword"==L.authType?((0,i.uX)(),(0,i.Wv)(A,{key:2,class:"full-width"})):(0,i.Q3)("",!0),"resetPasswordComplete"==L.authType?((0,i.uX)(),(0,i.Wv)(v,{key:3,class:"full-width"})):(0,i.Q3)("",!0),"forceChangePassword"==L.authType?((0,i.uX)(),(0,i.Wv)(M,{key:4,class:"full-width"})):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),["login","register"].includes(L.authType)&&"withEmail"===L.modeAuthType?((0,i.uX)(),(0,i.Wv)(I,{key:1,class:"full-width"})):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),"logout"==L.authType?((0,i.uX)(),(0,i.Wv)(C,{key:1,class:"full-width"})):(0,i.Q3)("",!0)]),L.withAuthSocial?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.bF)(T,{class:"q-mb-md"}),(0,i.Lk)("div",f,[(0,i.bF)(j,{onLogged:L.checkAfterLogin},null,8,["onLogged"]),(0,i.bF)(N,{onLogged:L.checkAfterLogin},null,8,["onLogged"]),(0,i.bF)(x,{onLogged:L.checkAfterLogin},null,8,["onLogged"])])])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",w,[(0,i.bF)(D,{class:"tw-text-xs tw-rounded-2xl",color:"primary","icon-right":"fa-solid fa-broom-wide",label:e.$t("isite.cms.configList.clearCache",{capitalize:!0}),flat:"",rouded:"","no-caps":"",onClick:t[2]||(t[2]=t=>e.$router.push({name:"app.update.app"}))},null,8,["label"])])],2)])])}}}]);