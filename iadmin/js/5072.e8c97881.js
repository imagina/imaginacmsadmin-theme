"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[5072],{55072:(e,s,t)=>{t.r(s),t.d(s,{default:()=>F});var a=t(61758),i=t(58790);const r={id:"pageId",class:"q-layout-page layout-padding"},o={class:"relative-position q-mb-lg backend-page"},d={class:"box"},l={class:"row gutter-x-sm gutter-y-sm"},n={class:"col-md-12"},m={class:"q-title"},h={class:"q-subheading"},u={class:"col-md-12"},g={class:"list-group-item"};function c(e,s,t,c,p,v){const f=(0,a.g2)("draggable"),b=(0,a.g2)("inner-loading");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",o,[(0,a.Lk)("div",d,[(0,a.Lk)("div",l,[(0,a.Lk)("div",n,[(0,a.Lk)("div",m,(0,i.v_)(p.form.title),1),(0,a.Lk)("div",h,(0,i.v_)(p.form.user.fullName),1)]),(0,a.Lk)("div",u,[(0,a.bF)(f,(0,a.v6)({onChange:v.handleEvents},v.dragOptions,{modelValue:p.fields,"onUpdate:modelValue":s[0]||(s[0]=e=>p.fields=e),"item-key":"id",tag:"transition-group"}),{item:(0,a.k6)((({element:e})=>[(0,a.Lk)("div",g,[(0,a.eW)((0,i.v_)(e.label)+" (",1),(0,a.Lk)("small",null,(0,i.v_)(e.typeName),1),(0,a.eW)(") ")])])),_:1},16,["onChange","modelValue"])])])]),(0,a.bF)(b,{visible:p.loading},null,8,["visible"])])])}var p=t(10057),v=t.n(p);const f={display:"Transitions",components:{draggable:v()},data(){return{loading:!1,form:{user:{fullName:""}},fields:[]}},computed:{dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},created(){this.getForm(),this.getFields()},methods:{getForm(){this.loading=!0;let e={params:{include:"user"}};this.$crud.show("apiRoutes.qform.forms",this.$route.params.id,e).then((e=>{this.form=e.data,this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1}))}))},getFields(){this.loading=!0;let e={params:{filter:{formId:this.$route.params.id,order:{field:"order"}}}};this.$crud.index("apiRoutes.qform.fields",e).then((e=>{this.fields=e.data,this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1}))}))},updateOrderInField(e,s){e.order=s,this.$crud.update("apiRoutes.qform.fields",e.id,e).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`})})).catch((e=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"})}))},handleEvents(e){this.updateOrderInField(e.moved.element,e.moved.newIndex)}}};var b=t(12807),k=t(83333),$=t(98582),q=t.n($);const L=(0,b.A)(f,[["render",c]]),F=L;q()(f,"components",{QLayout:k.A})}}]);