"use strict";(globalThis["webpackChunkimagina_cms"]=globalThis["webpackChunkimagina_cms"]||[]).push([[1400],{11400:(e,t,i)=>{function s(e,t,i,s,l,a){return null}i.r(t),i.d(t,{default:()=>m});i(23816);var l=i(18528)["c"];const a={data(){return{crudId:this.$uid()}},methods:{createChildForm(e){const t=e.title,i=`${t} (hijo)`;this.$alert.info({mode:"modal",message:`${this.$tr("isite.cms.label.wantToCreateAChildForm",{title:t})}`,actions:[{label:this.$tr("isite.cms.label.cancel"),color:"grey"},{label:this.$tr("isite.cms.label.create"),color:"green",handler:async()=>new Promise(((t,s)=>{const l={title:i,system_name:i,parentId:e.id,active:1};this.$crud.create("apiRoutes.qform.forms",l).then((e=>{t(!0);const{data:{id:i}}=e,s={name:"qform.admin.fields.index",params:{id:i}};this.$router.push(s)})).catch((e=>{s(e)}))}))}]})}},computed:{crudData(){return{crudId:this.crudId,entityName:l("main.qform.entityNames.form"),apiRoute:"apiRoutes.qform.forms",permission:"iforms.forms",extraFormFields:"iforms.crud-fields.forms",create:{title:this.$tr("iforms.cms.newForm")},read:{columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",style:"width: 50px",align:"left"},{name:"title",label:this.$tr("isite.cms.form.title"),field:"title",align:"left",action:e=>{this.$router.replace({path:`/form/fields/${e.id}/`})}},{name:"slug",label:this.$tr("isite.cms.form.slug"),field:"systemName",align:"left"},{name:"active",label:this.$tr("isite.cms.form.status"),field:"active",align:"left"},{name:"user",label:this.$tr("isite.cms.label.user"),field:"user",align:"left",format:e=>e&&e.fullName?e.fullName:"-"},{name:"parent",label:this.$tr("isite.cms.form.parent"),field:"parent",align:"left",format:e=>e&&e.title?e.title:"-"},{name:"destinationEmail",label:this.$trp("isite.cms.label.email"),field:"destinationEmail",align:"left",classes:"ellipsis",style:"max-width : 250px",format:e=>e?e.join(", "):"-"},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"right"}],requestParams:{include:"user,parent,qrs"},filters:{userId:{value:"0",type:"select",props:{label:this.$tr("isite.cms.label.user"),options:[{label:this.$tr("isite.cms.label.all"),value:"0"}]},loadOptions:{apiRoute:"apiRoutes.quser.users",select:{label:"fullName",id:"id"}}}},actions:[{icon:"fa-light fa-diagram-subtask",action:this.createChildForm,color:"info",label:this.$tr("isite.cms.label.createChildForm"),format:e=>({vIf:!e.parent})},{icon:"fa-light fa-clipboard-list-check",color:"info",route:"qform.main.leads.create",label:this.$tr("iforms.cms.fillForm")}]},update:{title:this.$tr("iforms.cms.updateForm"),to:"qform.admin.fields.index"},delete:!0,formLeft:{id:{value:""},title:{value:"",type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.title")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}},description:{name:"description",value:"",type:"html",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.description")}`}},active:{value:"1",type:"select",props:{label:this.$tr("isite.cms.form.status"),options:[{label:this.$tr("isite.cms.label.enabled"),value:"1"},{label:this.$tr("isite.cms.label.disabled"),value:"0"}]}},destinationEmail:{value:null,type:"select",props:{label:`${this.$tr("isite.cms.label.email")}`,useInput:!0,useChips:!0,multiple:!0,hideDropdownIcon:!0,inputDebounce:"0",newValueMode:"add-unique",outlined:!0,dense:!0}},userId:{value:null,type:"select",props:{label:this.$tr("isite.cms.label.user"),clearable:!0},loadOptions:{apiRoute:"apiRoutes.quser.users",select:{label:"fullName",id:"id"}}},urlTermsAndConditions:{value:null,type:"input",isFakeField:!0,props:{label:`${this.$tr("iforms.cms.form.urlTermsAndConditions")}`}}},formRight:{successText:{value:"",type:"input",isTranslatable:!0,props:{label:`${this.$tr("iforms.cms.form.successText")}`,type:"textarea",rows:"3"}},submitText:{value:"",type:"input",isTranslatable:!0,props:{label:`${this.$tr("iforms.cms.form.submitText")}`,type:"textarea",rows:"3"}},replyTo:{value:null,type:"select",isFakeField:!0,props:{vIf:"update"===this.crudInfo.typeForm,label:this.$tr("iforms.cms.replyTo")},loadOptions:{apiRoute:"apiRoutes.qform.fields",requestParams:{filter:{formId:this.crudInfo.id}},select:{label:"name",id:"id"}}},replyToName:{value:null,type:"select",isFakeField:!0,props:{vIf:"update"===this.crudInfo.typeForm,label:this.$tr("iforms.cms.replyToName")},loadOptions:{apiRoute:"apiRoutes.qform.fields",requestParams:{filter:{formId:this.crudInfo.id}},select:{label:"name",id:"id"}}},parentId:{value:"",type:"select",props:{label:"Formulario padre",clearable:!0,readonly:"update"===this.crudInfo.typeForm},loadOptions:{apiRoute:"apiRoutes.qform.forms",requestParams:{filter:{parentId:null}},select:{label:"title",id:"id"}}}},getDataForm:(e,t)=>new Promise(((i,s)=>{if("create"===t){let t=this.$store.state.qsiteApp.defaultLocale,i=e[t].title;e.systemName=this.$helper.getSlug(i)}i(e)})),events:{createdSon:e=>{const t={name:"qform.admin.fields.index",params:{id:e}};this.$router.push(t)}}}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}}};var r=i(68716);const o=(0,r.c)(a,[["render",s]]),m=o}}]);