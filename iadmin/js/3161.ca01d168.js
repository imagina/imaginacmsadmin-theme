"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[3161],{33161:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var i=a(61758);function s(e,t,a,s,l,o){const r=(0,i.g2)("form-auction"),n=(0,i.g2)("form-bid"),d=(0,i.g2)("show-auction");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(r,{ref:"formAuction"},null,512),(0,i.bF)(n,{ref:"formBid"},null,512),(0,i.bF)(d,{ref:"showAuction"},null,512)])}function l(e,t,a,s,l,o){const r=(0,i.g2)("dynamic-form"),n=(0,i.g2)("master-modal");return(0,i.uX)(),(0,i.Wv)(n,(0,i.v6)({id:"fromAuctionComponent",modelValue:l.show,"onUpdate:modelValue":t[1]||(t[1]=e=>l.show=e),"custom-position":""},l.modalProps,{loading:l.loading,onHide:o.clear}),{default:(0,i.k6)((()=>[l.show?((0,i.uX)(),(0,i.Wv)(r,{key:0,modelValue:l.form,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form=e),blocks:o.formBlocks,onSubmit:o.createAuction},null,8,["modelValue","blocks","onSubmit"])):(0,i.Q3)("",!0)])),_:1},16,["modelValue","loading","onHide"])}var o=a(71915);const r={props:{},components:{},watch:{async watchCategoryId(e,t){e&&e!=this.selectedCategoryId&&(this.selectedCategoryId=this.$clone(e),await this.getExtraForm()),!e&&this.selectedCategoryId&&(this.form["categoryId"]=this.$clone(this.selectedCategoryId))}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{show:!1,loading:!1,categories:[],extraBlocks:[],form:{},selectedCategoryId:null,modalProps:{}}},computed:{formBlocks(){let e=[{name:"category",title:this.$tr("isite.cms.form.category"),fields:{categoryId:{value:null,type:"optionGroup",colClass:"col-12",props:{options:this.categories.map((e=>({label:e.title,value:e.id}))),color:"secondary",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}}},{name:"block1",fields:{id:{value:""},userId:{value:this.$store.state.quserAuth.userId},title:{value:"",type:"input",columns:"col-12",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.title")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}},description:{value:"",type:"html",columns:"col-12",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.description")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}}},{name:"block2",fields:{type:{value:"0",type:"select",clearable:!0,props:{label:this.$tr("isite.cms.form.type")+"*",options:[{label:this.$tr("isite.cms.label.inverse"),value:"0"},{label:this.$tr("isite.cms.label.open"),value:"1"}],rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}},departmentId:{value:null,type:"crud",props:{crudType:"select",crudData:a.e(7969).then(a.bind(a,17969)),crudProps:{label:`${this.$trp("iprofile.cms.label.userGroup")}*`,rules:[e=>!!e&&e.length||this.$tr("isite.cms.message.fieldRequired")]}}},startAt:{value:null,type:"fullDate",props:{label:this.$tr("isite.cms.form.startDate")+"*",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}},endAt:{value:null,type:"fullDate",props:{label:this.$tr("isite.cms.form.endDate")+"*",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}}},...this.$clone(this.extraBlocks)];return e},watchCategoryId(){return this.form["categoryId"]}},methods:{init(){this.getCategories()},getCategories(){return new Promise(((e,t)=>{this.loading=!0,this.categories=[];let a={refresh:!0};this.$crud.index("apiRoutes.qauction.categories",a).then((t=>{this.categories=t.data,this.loading=!1,e(t.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading=!1,t(e)}))}))}))},loadform(e){this.show=!0,this.modalProps=e.modalProps},getExtraForm(){return new Promise(((e,t)=>{this.extraBlocks=[];let a=this.categories.find((e=>e.id==this.form["categoryId"]));if(!a||!a.auctionFormId)return t(!1);this.loading=!0;let i={refresh:!0,params:{include:"blocks.fields"}};this.$crud.show("apiRoutes.qform.forms",a.auctionFormId,i).then((t=>{let a=t.data.blocks.map((e=>({...e,fields:e.fields.map((e=>e.dynamicField))})));a.forEach(((e,t)=>{let i={};e.fields.forEach(((e,t)=>i[`${e.name}`]=e)),a[t].fields=i})),this.extraBlocks=this.$clone(a),e(t.data),this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{t(e),this.loading=!1}))}))}))},getFormData(){let e=this.$clone(this.form),t=(new Date,{});return this.formBlocks.forEach((a=>{Object.keys(e).forEach((i=>{let s=i.replace(`${a.name}-`,"");Object.keys(a.fields).includes(i)&&(t[s]=e[i])}))})),t},createAuction(){return new Promise((e=>{this.loading=!0;let t=this.$clone(this.form);this.$crud.create("apiRoutes.qauction.auctions",t).then((e=>{this.$alert.info({message:`${this.$tr("isite.cms.message.recordCreated")}`}),this.clear(),o.Bt.emit("crud.data.refresh"),this.loading=!1})).catch((e=>{this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoCreated")}`}),this.loading=!1}))}))},clear(){this.extraBlocks=[],this.form={},this.selectedCategoryId=null,this.modalProps={},this.show=!1}}};var n=a(12807),d=a(76100),c=a(36883),m=a(98582),u=a.n(m);const h=(0,n.A)(r,[["render",l]]),p=h;u()(r,"components",{QOptionGroup:d.A,QRadio:c.A});var f=a(58790);const b={key:0,class:"box box-auto-height"},$={class:"text-center"},g={class:"q-mb-lg text-grey-8"};function v(e,t,a,s,l,o){const r=(0,i.g2)("q-btn"),n=(0,i.g2)("show-bid-data"),d=(0,i.g2)("dynamic-form"),c=(0,i.g2)("master-modal");return(0,i.uX)(),(0,i.Wv)(c,(0,i.v6)({id:"fromBidComponent",modelValue:l.show,"onUpdate:modelValue":t[2]||(t[2]=e=>l.show=e),"custom-position":""},l.modalProps,{loading:l.loading,onHide:o.clear}),{default:(0,i.k6)((()=>[l.bidData?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.Lk)("div",$,[(0,i.Lk)("div",g,(0,f.v_)(e.$tr("iauctions.cms.existBid")),1),(0,i.bF)(r,{label:e.$tr("isite.cms.label.show"),color:"green",unelevated:"",rounded:"",onClick:t[0]||(t[0]=t=>e.$refs.showBidData.showBidData(l.bidData))},null,8,["label"])]),(0,i.bF)(n,{ref:"showBidData"},null,512)])):l.show?((0,i.uX)(),(0,i.Wv)(d,{key:1,modelValue:l.form,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form=e),blocks:o.formBlocks,"form-id":l.extraFormId,onSubmit:o.createBid},null,8,["modelValue","blocks","form-id","onSubmit"])):(0,i.Q3)("",!0)])),_:1},16,["modelValue","loading","onHide"])}var y=a(85331);const w={props:{},components:{showBidData:y.A},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{show:!1,loading:!1,form:{},modalProps:{},auctionId:null,extraFormId:null,bidData:null}},computed:{formBlocks(){let e=[{name:"block1",fields:{id:{value:""},userId:{value:this.$store.state.quserAuth.userId},providerId:{value:this.$store.state.quserAuth.userId},auctionId:{value:this.auctionId},description:{value:"",type:"html",columns:"col-12",props:{label:`${this.$tr("iauctions.cms.description")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}},amount:{value:"",type:"input",columns:"col-12",props:{type:"number",label:`${this.$tr("isite.cms.label.price")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}}}];return e}},methods:{init(){},loadform(e){this.show=!0,this.extraFormId=e.extraFormId,this.auctionId=e.auctionId,this.modalProps=e.modalProps,this.getBid()},getBid(){return this.loading=!0,new Promise((e=>{let t={refresh:!0,params:{filter:{field:"auction_id",providerId:this.$store.state.quserAuth.userId},include:"provider,fields,auction.category"}};this.$crud.show("apiRoutes.qauction.bids",this.auctionId,t).then((t=>{this.bidData=t.data,this.loading=!1,e(!0)})).catch((t=>{this.$apiResponse.handleError(t,(()=>{this.loading=!1,e(!0)}))}))}))},createBid(){return new Promise((e=>{this.loading=!0;let t=this.$clone(this.form);this.$crud.create("apiRoutes.qauction.bids",t).then((e=>{this.$alert.info({message:`${this.$tr("isite.cms.message.recordCreated")}`}),this.clear(),this.loading=!1})).catch((e=>{this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoCreated")}`}),this.loading=!1}))}))},clear(){this.form={},this.auctionId=null,this.extraFormId=null,this.show=!1}}};var A=a(69001);const k=(0,n.A)(w,[["render",v]]),I=k;function q(e,t,a,s,l,o){const r=(0,i.g2)("q-tab"),n=(0,i.g2)("q-tabs"),d=(0,i.g2)("q-item-label"),c=(0,i.g2)("file-list"),m=(0,i.g2)("q-item-section"),u=(0,i.g2)("q-item"),h=(0,i.g2)("q-list"),p=(0,i.g2)("q-tab-panel"),b=(0,i.g2)("show-bid-data"),$=(0,i.g2)("btn-menu"),g=(0,i.g2)("q-td"),v=(0,i.g2)("q-tooltip"),y=(0,i.g2)("q-icon"),w=(0,i.g2)("q-table"),A=(0,i.g2)("q-charts"),k=(0,i.g2)("q-tab-panels"),I=(0,i.g2)("master-modal");return(0,i.uX)(),(0,i.Wv)(I,{id:"showAuctionModal",modelValue:l.modal.show,"onUpdate:modelValue":t[2]||(t[2]=e=>l.modal.show=e),loading:l.modal.loading,title:l.modal.title,"custom-position":""},{default:(0,i.k6)((()=>[(0,i.bF)(n,{modelValue:l.modal.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>l.modal.tab=e),dense:"",class:"box box-auto-height text-grey q-mb-md","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,i.k6)((()=>[(0,i.bF)(r,{name:"form",label:e.$tr("isite.cms.label.information")},null,8,["label"]),"iadmin"==l.appMode?((0,i.uX)(),(0,i.Wv)(r,{key:0,name:"bids",label:e.$trp("iauctions.cms.bid")},null,8,["label"])):(0,i.Q3)("",!0),o.isShow?((0,i.uX)(),(0,i.Wv)(r,{key:1,name:"chart",label:e.$trp("isite.cms.label.chart")},null,8,["label"])):(0,i.Q3)("",!0)])),_:1},8,["modelValue"]),(0,i.bF)(k,{modelValue:l.modal.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>l.modal.tab=e),animated:"","keep-alive":""},{default:(0,i.k6)((()=>[(0,i.bF)(p,{name:"form",class:"box box-auto-height q-pa-none"},{default:(0,i.k6)((()=>[(0,i.bF)(h,{separator:"",dense:""},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.formData,((e,t)=>((0,i.uX)(),(0,i.Wv)(u,{key:t,style:{padding:"8px 0"}},{default:(0,i.k6)((()=>[(0,i.bF)(m,null,{default:(0,i.k6)((()=>["media"!=e.fieldType?((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[(0,i.eW)((0,f.v_)(e.label),1)])),_:2},1024)):(0,i.Q3)("",!0),"media"==e.fieldType?((0,i.uX)(),(0,i.Wv)(d,{key:1},{default:(0,i.k6)((()=>[(0,i.bF)(c,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,"grid-col-class":"col-12","hide-header":""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):((0,i.uX)(),(0,i.Wv)(d,{key:2,caption:"",innerHTML:e.value},null,8,["innerHTML"]))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),"iadmin"==l.appMode?((0,i.uX)(),(0,i.Wv)(p,{key:0,name:"bids",class:"q-pa-none"},{default:(0,i.k6)((()=>[(0,i.bF)(b,{ref:"showBidData"},null,512),(0,i.bF)(w,(0,i.v6)({id:"tableBids"},o.bidsTableProps),{"body-cell-actions":(0,i.k6)((e=>[(0,i.bF)(g,{props:e},{default:(0,i.k6)((()=>[(0,i.bF)($,{actions:o.bidActions(e),"action-data":e.row},null,8,["actions","action-data"])])),_:2},1032,["props"])])),"body-cell-id":(0,i.k6)((t=>[(0,i.bF)(g,{props:t},{default:(0,i.k6)((()=>[0==t.rowIndex?((0,i.uX)(),(0,i.Wv)(y,{key:0,color:"green",name:"fas fa-crown",class:"q-mr-xs"},{default:(0,i.k6)((()=>[(0,i.bF)(v,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,f.v_)(e.$tr("isite.cms.label.recommendation")),1)])),_:1})])),_:1})):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,f.v_)(t.value),1)])),_:2},1032,["props"])])),_:1},16)])),_:1})):(0,i.Q3)("",!0),o.isShow?((0,i.uX)(),(0,i.Wv)(p,{key:1,name:"chart",class:"q-pa-none"},{default:(0,i.k6)((()=>[(0,i.bF)(A,{chartsData:o.chartData},null,8,["chartsData"])])),_:1})):(0,i.Q3)("",!0)])),_:1},8,["modelValue"])])),_:1},8,["modelValue","loading","title"])}u()(w,"components",{QBtn:A.A});a(10239);var F=a(63655),D=a(15409),B=a(99526)["A"];const x={name:"ShowAuction",components:{showBidData:y.A,QCharts:F.A,fileList:D.A},data(){return{appMode:B("app.mode"),auctionData:null,formData:[],bids:[],modal:{loading:!1,show:!1,title:null,tab:"form"}}},computed:{isShow(){return"iadmin"==this.appMode&&this.bids.length},bidsTableProps(){return{hidePagination:!0,columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",style:"width: 50px"},{name:"provider",label:this.$tr("isite.cms.label.provider"),field:"provider",align:"left",format:e=>e?`${e.firstName} ${e.lastName}`:"-"},{name:"statusName",label:this.$tr("isite.cms.form.status"),field:"statusName",align:"left"},{name:"amount",label:this.$tr("isite.cms.label.amount"),field:"amount",align:"left",format:e=>e?this.$trn(e):"-"},{name:"created_at",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",align:"left",format:e=>e?this.$trd(e,{type:"long"}):"-"},{name:"updated_at",label:this.$tr("isite.cms.form.updatedAt"),field:"updatedAt",align:"left",format:e=>e?this.$trd(e,{type:"long"}):"-"},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"left"}],rows:this.bids}},dataLabels(){if(!this.bids.length)return[];const e=[{name:"0",label:"0",data:0}],t=this.$clone(this.bids);return t.map((t=>{e.push({name:`${t.provider.firstName} ${t.provider.lastName}`,label:`${t.provider.firstName} ${t.provider.lastName}, ${this.$trn(t.amount)}, ${this.$trn(t.points)}`,data:t.points})})),e},dataSets(){return this.dataLabels.length?[{label:this.$tr("iauctions.cms.bid"),borderColor:"#3597f9",pointBackgroundColor:"#FFFFFF",borderWidth:1,pointBorderColor:"#c7c7c7",backgroundColor:"#3597f97a",data:this.dataLabels.map((({data:e})=>e))}]:[]},chartData(){return this.dataSets.length?{type:"lineChart",dataSets:this.dataSets,dataLabels:this.dataLabels}:{}}},methods:{randomColor(){return`#${Math.floor(16777215*Math.random()).toString(16)}`},async showAuctionData(e){this.auctionData=e,this.modal={title:`${this.$tr("iauctions.cms.auction")} Id: ${e.id}`,show:!0,loading:!0,tab:"form"},await Promise.all([this.getFormData(),this.getBids()]),this.modal.loading=!1},getFormData(){return new Promise((e=>{let t=this.$clone(this.auctionData);this.formData=[{label:this.$tr("isite.cms.form.title"),value:t.title},{label:this.$tr("isite.cms.form.status"),value:t.statusName},{label:this.$tr("isite.cms.label.creator"),value:t.creator?`${t.creator.firstName} ${t.creator.lastName}`:"-"},{label:this.$tr("isite.cms.form.startDate"),value:this.$trd(t.startAt,{type:"long"})},{label:this.$tr("isite.cms.form.endDate"),value:this.$trd(t.endAt,{type:"long"})},{label:this.$tr("isite.cms.form.type"),value:t.typeName},{label:this.$tr("isite.cms.form.category"),value:t.category.title},{label:this.$tr("isite.cms.label.department"),value:t.department.title},{label:this.$tr("isite.cms.label.winner"),value:t.winner?`${t.winner.firstName} ${t.winner.lastName}`:"-"},{label:this.$tr("isite.cms.label.description"),value:t.description},{label:this.$tr("isite.cms.form.createdAt"),value:this.$trd(t.createdAt,{type:"long"})},{label:this.$tr("isite.cms.form.updatedAt"),value:this.$trd(t.updatedAt,{type:"long"})}];let a=!(!t.category||!t.category.auctionFormId)&&t.category.auctionFormId;if(!a)return e(!0);let i={};t.fields.forEach((e=>i[e.name]=e.value));let s=this.$clone(t.files||[]),l={refresh:!0,params:{include:"fields"}};this.$crud.show("apiRoutes.qform.forms",a,l).then((t=>{this.$clone(t.data.fields).forEach((e=>{let t=e.dynamicField?.type||"input",a=i[this.$helper.convertStringToSnakeCase(e.name)],l="media"!=t?null:s.find((t=>t.zone==(e.dynamicField.props.zone||"mainimage")));this.formData.push({...e,label:e.label.replace("*",""),value:"media"!=t?null!=a?a:"-":[{id:this.$uid(),...l,filename:e.label}],fieldType:t})})),e(!0)})).catch((t=>{this.$apiResponse.handleError(t,(()=>{e(!0)}))}))}))},getBids(){return new Promise((e=>{let t={refresh:!0,params:{filter:{auctionId:this.auctionData?.id},include:"provider,fields,auction.category"}};this.$crud.index("apiRoutes.qauction.bids",t).then((t=>{this.bids=t.data,e(!0)})).catch((t=>{this.$apiResponse.handleError(t,(()=>{e(!0)}))}))}))},bidActions(e){let t=[{name:"show",icon:"far fa-eye",label:this.$tr("isite.cms.label.show"),action:e=>{this.$refs.showBidData.showBidData(e)}},{name:"mark as winner",icon:"fas fa-trophy",label:this.$tr("iauctions.cms.setAsWinner"),format:e=>2!=e.auction.status||1!=e.auction.type||e.winner?{vIf:!1}:{},action:e=>{this.setBidAsWinner(e)}}];return t},setBidAsWinner(e){this.$alert.warning({mode:"modal",title:this.$trp("iauctions.cms.setAsWinner"),message:`\n          <div>${this.$tr("isite.cms.label.provider")}: ${e.provider.firstName} ${e.provider.lastName}</div>\n          <div>${this.$tr("isite.cms.label.amount")}: ${this.$trn(e.amount)}</div>`,actions:[{label:this.$tr("isite.cms.label.cancel"),color:"grey-8"},{label:this.$tr("isite.cms.label.send"),color:"red",handler:()=>{this.modal.loading=!0;let t={winner:1};this.$crud.update("apiRoutes.qauction.bids",e.id,t).then((e=>{this.$alert.info({message:`${this.$tr("isite.cms.message.recordCreated")}`}),o.Bt.emit("crud.data.refresh"),this.modal.loading=!1,this.modal.show=!1})).catch((e=>{this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoCreated")}`}),this.modal.loading=!1}))}}]})}}};var C=a(64873),N=a(26721),_=a(64082),R=a(63815),P=a(54514),V=a(75329),Q=a(63418),T=a(35779),W=a(18383),X=a(77109),E=a(24609),S=a(78151);const M=(0,n.A)(x,[["render",q]]),L=M;u()(x,"components",{QTabs:C.A,QTab:N.A,QTabPanels:_.A,QTabPanel:R.A,QList:P.A,QItem:V.A,QItemSection:Q.A,QItemLabel:T.A,QTable:W.A,QTd:X.A,QIcon:E.A,QTooltip:S.A});var U=a(99526)["A"];const H={components:{formAuction:p,formBid:I,showAuction:L},data(){return{crudId:this.$uid(),appMode:U("app.mode")}},computed:{statusColor(){return["text-orange","text-green","text-blue","text-red"]},crudData(){return{crudId:this.crudId,entityName:U("main.qauction.entityNames.auction"),apiRoute:"apiRoutes.qauction.auctions",permission:"iauctions.auctions",extraFormFields:"iauctions.crud-fields.auctions",create:"ipanel"!=this.appMode&&{method:()=>{this.$refs.formAuction.loadform({modalProps:{title:this.$tr("iauctions.cms.newAuction")}})}},read:{columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",style:"width: 50px"},{name:"title",label:this.$tr("isite.cms.form.title"),field:"title",align:"left"},{name:"statusName",label:this.$tr("isite.cms.form.status"),field:"statusName",align:"left",classes:e=>`text-weight-bold ${this.statusColor[e.status]}`},{name:"creator",label:this.$tr("isite.cms.label.creator"),field:"creator",align:"left",format:e=>e?`${e.firstName} ${e.lastName}`:"-"},{name:"startAt",label:this.$tr("isite.cms.form.startDate"),field:"startAt",align:"left",format:e=>e?this.$trd(e,{type:"long"}):"-"},{name:"endAt",label:this.$tr("isite.cms.form.endDate"),field:"endAt",align:"left",format:e=>e?this.$trd(e,{type:"long"}):"-"},{name:"typeName",label:this.$tr("isite.cms.form.type"),field:"typeName",align:"left"},{name:"category",label:this.$tr("isite.cms.form.category"),field:"category",align:"left",format:e=>e?e.title:"-"},{name:"department",label:this.$tr("iprofile.cms.label.userGroup"),field:"department",align:"left",format:e=>e?e.title:"-"},{name:"winner",label:this.$tr("isite.cms.label.winner"),field:"winner",align:"left",format:e=>e?`${e.firstName} ${e.lastName}`:"-"},{name:"created_at",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",align:"left",format:e=>e?this.$trd(e,{type:"long"}):"-"},{name:"updated_at",label:this.$tr("isite.cms.form.updatedAt"),field:"updatedAt",align:"left",format:e=>e?this.$trd(e,{type:"long"}):"-"},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"left"}],filters:{status:{value:null,type:"select",props:{label:this.$tr("isite.cms.form.status"),clearable:!0,options:[{label:this.$tr("isite.cms.label.disabled"),value:"0"},{label:this.$tr("isite.cms.label.enabled"),value:"1"},{label:this.$tr("isite.cms.label.finished"),value:"2"}]}},type:{value:null,type:"select",clearable:!0,props:{label:this.$tr("isite.cms.form.type"),clearable:!0,options:[{label:this.$tr("isite.cms.label.inverse"),value:"0"},{label:this.$tr("isite.cms.label.open"),value:"1"}]}},categoryId:{value:null,type:"select",props:{clearable:!0,label:this.$tr("isite.cms.form.category")},loadOptions:{apiRoute:"apiRoutes.qauction.categories"}}},requestParams:{include:"category,department,winner,creator,fields,files"},actions:[{name:"show",icon:"far fa-eye",label:this.$tr("isite.cms.label.show"),action:e=>{this.$refs.showAuction.showAuctionData(e)}},{name:"bid",icon:"far fa-hand-point-up",label:this.$tr("iauctions.cms.bidUp"),format:e=>"iadmin"==this.appMode||1!=e.status?{vIf:!1}:void 0,action:e=>{this.$refs.formBid.loadform({auctionId:e.id,extraFormId:e.category.bidFormId,modalProps:{title:`${this.$tr("iauctions.cms.newBid")} | ${e.title}`}})}},{name:"cancel",icon:"fas fa-times",label:this.$tr("isite.cms.label.cancel"),format:e=>"ipanel"==this.appMode||[2,3].includes(e.status)?{vIf:!1}:void 0,action:e=>{this.$alert.warning({mode:"modal",title:this.$trp("isite.cms.label.cancel"),message:`<div>${this.$tr("iauctions.cms.auction")}: ${e.title}</div>`,actions:[{label:this.$tr("isite.cms.label.cancel"),color:"grey-8"},{label:this.$tr("isite.cms.label.send"),color:"red",handler:()=>{let t={status:3};this.$crud.update("apiRoutes.qauction.auctions",e.id,t).then((e=>{this.$alert.info({message:`${this.$tr("isite.cms.message.recordCreated")}`}),o.Bt.emit("crud.data.refresh")})).catch((e=>{this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoCreated")}`})}))}}]})}}]},update:!1,delete:!1}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}}},G=(0,n.A)(H,[["render",s]]),O=G}}]);