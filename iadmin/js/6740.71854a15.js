"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[6740],{96740:(t,e,a)=>{a.r(e),a.d(e,{default:()=>Ts});var s=a(61758),n=a(58790),i=a(29104);const o={class:"page-header tw-border-b-2 tw-border-white tw-border-opacity-50 tw-fixed tw-top-0 tw-left-0 tw-z-20 tw-flex tw-justify-center tw-items-center tw-w-full tw-h-20"},r=["href"],l=["src"],c={class:"step-loading"},d=(0,s.Lk)("div",null,null,-1),u=(0,s.Lk)("div",null,null,-1),p=[d,u],m={class:"page-wizard tw-w-full tw-relative"},g={class:"tw-pt-3 md:tw-pt-4 tw-pb-1"},h={class:"row justify-between"},f={class:"col-4"},v={class:"tw-hidden sm:tw-inline-block"},w={class:"col-4 text-right"},b={class:"tw-hidden sm:tw-inline-block"};function y(t,e,a,d,u,y){const k=(0,s.g2)("q-linear-progress"),x=(0,s.g2)("q-btn"),C=(0,s.g2)("q-stepper-navigation"),L=(0,s.g2)("q-step"),S=(0,s.g2)("q-stepper"),_=(0,s.g2)("inner-loading");return(0,s.uX)(),(0,s.CE)("div",{id:"wizardOrganization",class:(0,n.C4)(["tw-h-screen 'overflow-auto",{"page-full":u.currentStep==u.welcome||u.currentStep==u.summary,"overflow-hidden":u.currentStep==u.themes}])},[(0,s.Lk)("div",o,[(0,s.Lk)("a",{href:u.urlBase},[(0,s.Lk)("img",{src:u.logo,class:"tw-h-20 tw-w-auto"},null,8,l)],8,r),(0,s.bF)(k,{style:{"background-color":"#ffff"},size:"md","track-color":"white",value:u.progress,class:"linear-progress-header"},null,8,["value"])]),(0,s.bo)((0,s.Lk)("div",c,p,512),[[i.aG,u.loading]]),(0,s.Lk)("div",m,[(0,s.bF)(S,{modelValue:u.currentStep,"onUpdate:modelValue":e[4]||(e[4]=t=>u.currentStep=t),ref:"stepper"},{navigation:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",g,[(0,s.Lk)("div",h,[(0,s.Lk)("div",f,[(0,s.bo)((0,s.bF)(x,{rounded:"","no-caps":"",disabled:!y.activatePreviousButton,unelevated:"",color:"blue-grey",icon:"fas fa-arrow-left tw-mr-0 sm:tw-mr-2",onClick:e[0]||(e[0]=t=>y.previousStep())},{default:(0,s.k6)((()=>[(0,s.Lk)("div",v,(0,n.v_)(t.$tr("isite.cms.label.previous")),1)])),_:1},8,["disabled"]),[[i.aG,!u.buttonLoading]])]),(0,s.Lk)("div",w,[(0,s.bF)(x,{rounded:"","no-caps":"",disabled:!y.activateNextButton,"icon-right":"fas fa-arrow-right tw-ml-0 sm:tw-ml-2",onClick:e[1]||(e[1]=t=>y.nextStep()),unelevated:"",color:"green",loading:u.buttonLoading},{default:(0,s.k6)((()=>[(0,s.Lk)("div",b,(0,n.v_)(u.currentStep===u.summary?t.$tr("isite.cms.label.finalize"):t.$tr("isite.cms.label.continue")),1)])),_:1},8,["disabled","loading"])])])])])),_:1},512),[[i.aG,y.showStepperNavigation]])])),default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.steps,(t=>((0,s.uX)(),(0,s.Wv)(L,{key:t.id,name:t.id,prefix:t.prefix,title:t.title,done:t.done,class:"q-pb-xl",style:(0,n.Tr)(t.id==u.themes?"max-height: calc(100vh - 180px);":"")},{default:(0,s.k6)((()=>[u.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.component),{key:0,ref_for:!0,ref:"stepComponent",onUpdateData:e[2]||(e[2]=t=>y.updateData(u.data)),onNextStep:e[3]||(e[3]=t=>y.nextStep())},null,544))])),_:2},1032,["name","prefix","title","done","style"])))),128))])),_:1},8,["modelValue"])]),(0,s.bF)(_,{visible:u.loading},null,8,["visible"])],2)}const k={class:"step-categories"},x={key:0,class:"step-title"},C={class:"tw-px-2 md:tw-px-6 tw-pb-6 tw-mt-4 tw-mb-2"},L={class:"tw-text-xs tw-mt-2"},S={class:"tw-font-bold"},_={key:1,class:"stepp-loading"},$=(0,s.Lk)("div",null,null,-1),T=(0,s.Lk)("div",null,null,-1),A=[$,T],z={key:2},E={key:0,class:"tw-px-2 md:tw-px-6"},F={class:"row q-gutter-sm items-stars justify-between tw-mb-4"},I=["onClick"],X={class:"row q-gutter-sm justify-center"},Q={class:"col-12"},V=(0,s.Lk)("hr",{class:"tw-my-3 tw-w-1/2 tw-mx-auto"},null,-1),q=[V],B={class:"col-auto"},D={class:"col-auto"},P={key:1,class:"tw-px-2 md:tw-px-6"},W={key:3,class:"step-sidebar"},M={class:"categories-text tw-max-w-sm tw-w-full"},H=["innerHTML"];function N(t,e,a,o,r,l){const c=(0,s.g2)("dynamic-field"),d=(0,s.g2)("q-btn"),u=(0,s.g2)("q-img");return(0,s.uX)(),(0,s.CE)("div",k,[r.stepContent?((0,s.uX)(),(0,s.CE)("h2",x,(0,n.v_)(r.stepContent.title),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",C,[(0,s.bF)(c,{modelValue:r.name,"onUpdate:modelValue":[e[0]||(e[0]=t=>r.name=t),l.getCategoriesSearch],field:l.formFields.category},null,8,["modelValue","field","onUpdate:modelValue"]),(0,s.bo)((0,s.Lk)("div",L,[(0,s.eW)((0,n.v_)(t.$tr("isite.cms.message.selectedCategory"))+": ",1),(0,s.Lk)("span",S,(0,n.v_)(r.selected.title),1)],512),[[i.aG,r.selected]])]),r.loading?((0,s.uX)(),(0,s.CE)("div",_,A)):((0,s.uX)(),(0,s.CE)("div",z,[r.categories.length>=1?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.categories,((t,e)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{class:"col-auto tw-mb-3",onClick:e=>l.selectData(t)},[(0,s.Lk)("div",{class:(0,n.C4)(["text-category tw-text-sm tw-rounded-lg tw-px-3 tw-py-1 tw-cursor-pointer",{"text-active-cate":t.id===r.selected.id}])},(0,n.v_)(t.title),3)],8,I)),[[i.aG,(r.pag-1)*r.limitPage<=e&&r.pag*r.limitPage>e]]))),256))]),(0,s.Lk)("div",X,[(0,s.bo)((0,s.Lk)("div",Q,q,512),[[i.aG,1!=r.pag]]),(0,s.Lk)("div",B,[(0,s.bo)((0,s.bF)(d,{padding:"none",round:"",flat:"",color:"primary",icon:"arrow_circle_left",onClick:e[1]||(e[1]=(0,i.D$)((t=>r.pag-=1),["prevent"]))},null,512),[[i.aG,1!=r.pag]])]),(0,s.Lk)("div",D,[(0,s.bo)((0,s.bF)(d,{padding:"none",round:"",flat:"",color:"primary",icon:"arrow_circle_right",onClick:e[2]||(e[2]=(0,i.D$)((t=>r.pag+=1),["prevent"]))},null,512),[[i.aG,r.pag*r.limitPage/r.categories.length<1]])])])])):((0,s.uX)(),(0,s.CE)("div",P,(0,n.v_)(t.$tr("isite.cms.message.noCategories")),1))])),r.stepContent?((0,s.uX)(),(0,s.CE)("div",W,[(0,s.Lk)("div",M,[(0,s.Lk)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:r.stepContent.description},null,8,H),r.stepContent?.mediaFiles?((0,s.uX)(),(0,s.Wv)(u,{key:0,fit:"contain",src:r.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1},null,8,["src"])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])}var U=a(38734);const j=0,R=1,G=2,O=3,K=4,Y=5,J=6,Z=7,tt=25,et="admin_organization_wizard_terms",at="admin_organization_wizard_organization",st="admin_organization_wizard_category",nt="admin_organization_wizard_theme",it="admin_organization_wizard_plan",ot="admin_organization_wizard_welcome",rt="admin_organization_wizard_summary",lt="admin_organization_wizard_ai",ct=30;function dt(t){return pt.infoWizard.find((function(e){return(null===e||void 0===e?void 0:e.systemName)===t}))}var ut={user:!1,terms:{check:!1,email:!1},category:!1,layout:!1,plan:!1,organization:"",form:{check:!1,data:{}}},pt=(0,U.Kh)({infoWizard:[{systemName:""}],categories:!1,step:0,previousStepButton:!0,nextStepButton:!0,data:ut}),mt=(0,s.EW)((function(){return{get infoWizard(){return pt.infoWizard},set infoWizard(t){pt.infoWizard=t},get categories(){return pt.categories},set categories(t){pt.categories=t},get step(){return pt.step},set step(t){pt.step=t},get previousStepButton(){return pt.previousStepButton},set previousStepButton(t){pt.previousStepButton=t},get nextStepButton(){return pt.nextStepButton},set nextStepButton(t){pt.nextStepButton=t},get data(){return pt.data},set data(t){pt.data=t},get infoWelcome(){return dt(ot)},get infoTerms(){return dt(et)},get infoCompany(){return dt(at)},get infoCategories(){return dt(st)},get infoPlans(){return dt(it)},get infoThemes(){return dt(nt)},get infoAi(){return dt(lt)},get infoSummary(){return dt(rt)}}})).value;const gt=mt;var ht=a(717),ft=function(t,e,a,s){function n(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,i){function o(t){try{l(s.next(t))}catch(e){i(e)}}function r(t){try{l(s["throw"](t))}catch(e){i(e)}}function l(t){t.done?a(t.value):n(t.value).then(o,r)}l((s=s.apply(t,e||[])).next())}))},vt=function(t,e){var a,s,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(t){return function(e){return l([t,e])}}function l(r){if(a)throw new TypeError("Generator is already executing.");while(i&&(i=0,r[0]&&(o=0)),o)try{if(a=1,s&&(n=2&r[0]?s["return"]:r[0]?s["throw"]||((n=s["return"])&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!(n=n.length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(l){r=[6,l],s=0}finally{a=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};function wt(){function t(t){return ft(this,void 0,void 0,(function(){var t,e;return vt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,ht.A.show("apiRoutes.qgamification.categories","admin_organization_wizard",{refresh:!1,params:{filter:{field:"system_name"},include:"activities"}})];case 1:return t=a.sent(),[2,t.data.activities];case 2:return e=a.sent(),console.log("Error in wizard/services.getInfoWizard "+e),[3,3];case 3:return[2]}}))}))}function e(){return ft(this,void 0,void 0,(function(){var t,e,a,s;return vt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t={refresh:!0},[4,ht.A.index("apiRoutes.qsite.categories",t)];case 1:return e=n.sent(),a=e.data.sort((function(t,e){return t.title.localeCompare(e.title)})),[2,a];case 2:return s=n.sent(),console.log("Error in wizard/services.getCategories "+s),[3,3];case 3:return[2]}}))}))}function a(t){return ft(this,void 0,void 0,(function(){var e,a,s,n;return vt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e={filter:{search:t}},[4,ht.A.index("apiRoutes.qsite.categories",{refresh:!0,params:e})];case 1:return a=i.sent(),s=a.data.sort((function(t,e){return t.title.localeCompare(e.title)})),[2,s];case 2:return n=i.sent(),console.log("Error in wizard/services.getCategoriesSearch "+n),[3,3];case 3:return[2]}}))}))}function s(t){return ft(this,void 0,void 0,(function(){var t,e,a,s,n;return vt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t={refresh:!0,params:{include:"product",filter:{internal:!1}}},[4,ht.A.index("apiRoutes.qplan.plans",t)];case 1:return e=i.sent(),a={refresh:!0,params:{filter:{id:e.data.map((function(t){return t.product.id})),status:!0,validationInternal:!0},include:"productOptions,optionValues,relatedProducts"}},[4,ht.A.index("apiRoutes.qcommerce.products",a)];case 2:return s=i.sent(),s.data.forEach((function(t,a){if(!t.optionValues.length){var n=e.data.find((function(e){return e.product.id==t.id}));s.data[a].optionValues=[{optionValue:n.frequency,price:n.price}]}})),[2,s.data];case 3:return n=i.sent(),console.log("Error in wizard/services.getPlans "+n),[2,[]];case 4:return[2]}}))}))}function n(t){return ft(this,void 0,void 0,(function(){var e,a,s;return vt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e={filter:{id:t},include:"productOptions,optionValues,relatedProducts,categories"},[4,ht.A.index("apiRoutes.qcommerce.products",{refresh:!0,params:e})];case 1:return a=n.sent(),[2,a.data];case 2:return s=n.sent(),console.log("Error in wizard/services.getPlan "+s),[3,3];case 3:return[2]}}))}))}return{getInfoWizard:t,getCategories:e,getCategoriesSearch:a,getPlans:s,getPlan:n}}const bt={emits:["updateData"],data(){return{loading:!1,limitPage:ct,pag:1,stepContent:"",name:"",selected:"",categories:[]}},mounted(){this.$nextTick((async function(){gt.nextStepButton=!1,this.getDataBase(),this.getCategorySelected(),this.getStepInfo()}))},computed:{formFields(){return{category:{value:"",type:"search",props:{label:this.$tr("isite.cms.label.search"),color:"primary",rounded:!0,dense:!1}}}}},methods:{selectData(t){this.selected=t,gt.data.category=this.selected,gt.nextStepButton=!0,this.$emit("updateData",t)},deselectCategory(t){this.selected="",gt.data.category=this.selected,gt.nextStepButton=!1,this.$emit("updateData",""),this.name=t},async getDataBase(){this.categories=gt.categories},async getCategorySelected(){this.loading=!0,gt.data.category&&(this.selected=gt.data.category,gt.nextStepButton=!0),this.loading=!1},async getCategoriesSearch(){try{if(null!==this.name&&this.name.length>3){this.deselectCategory(this.name),this.loading=!0;const t=await wt().getCategoriesSearch(this.name);this.loading=!1,this.categories=t}else this.getDataBase()}catch(t){console.log(t)}},async getStepInfo(){this.stepContent=gt.infoCategories}}};var yt=a(12807),kt=a(69001),xt=a(65287),Ct=a(78151),Lt=a(98582),St=a.n(Lt);const _t=(0,yt.A)(bt,[["render",N]]),$t=_t;St()(bt,"components",{QBtn:kt.A,QImg:xt.A,QTooltip:Ct.A});const Tt={class:"step-company"},At={key:0,class:"tw-pt-10"},zt={class:"step-title"},Et=["innerHTML"],Ft={class:"tw-px-2 md:tw-px-10 tw-mb-8"},It={key:1,class:"step-sidebar"},Xt={class:"select-company tw-max-w-md tw-w-full"};function Qt(t,e,a,i,o,r){const l=(0,s.g2)("dynamic-field"),c=(0,s.g2)("q-img");return(0,s.uX)(),(0,s.CE)("div",Tt,[o.stepContent?((0,s.uX)(),(0,s.CE)("div",At,[(0,s.Lk)("h2",zt,(0,n.v_)(o.stepContent.title),1),(0,s.Lk)("div",{class:"tw-text-base tw-px-2 md:tw-px-14 tw-text-center tw-mb-10",innerHTML:o.stepContent.description},null,8,Et)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ft,[(0,s.bF)(l,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.name=t),field:r.formFields.nameOrganizations},null,8,["modelValue","field"])]),o.stepContent?((0,s.uX)(),(0,s.CE)("div",It,[(0,s.Lk)("div",Xt,[o.stepContent.mediaFiles?((0,s.uX)(),(0,s.Wv)(c,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1},null,8,["src"])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])}const Vt={data(){return{name:"",stepContent:""}},mounted(){this.$nextTick((async function(){this.getData(),this.getStepInfo()}))},watch:{name(t,e){t&&this.checkName()}},computed:{formFields(){return{nameOrganizations:{type:"input",props:{icon:"corporate_fare",label:this.$tr("isite.cms.form.name"),color:"primary",rounded:!0,dense:!1}}}}},methods:{async getData(){""!==gt.data.organization&&(this.name=gt.data.organization)},checkName(){this.name.length>5?(gt.nextStepButton=!0,gt.data.organization=this.name):gt.nextStepButton=!1},getStepInfo(){this.stepContent=gt.infoCompany},async checkOrganizationName(t){return new Promise(((e,a)=>{let s={refresh:!0,params:{filter:{field:"title"}}};this.$crud.show("apiRoutes.qsite.organizations",t,s).then((t=>{e(t.data)})).catch((t=>{this.$apiResponse.handleError(t,(()=>{a(t)}))}))}))}}},qt=(0,yt.A)(Vt,[["render",Qt]]),Bt=qt;St()(Vt,"components",{QImg:xt.A});const Dt={class:"step-plan"},Pt={key:0,class:"step-title"},Wt={key:1,class:"step-loading"},Mt=(0,s.Lk)("div",null,null,-1),Ht=(0,s.Lk)("div",null,null,-1),Nt=[Mt,Ht],Ut={key:2},jt={key:0},Rt={class:"tw-text-lg tw-font-semibold"},Gt={class:"tw-text-xs"},Ot={class:"row items-center"},Kt={class:"tw-font-bold"},Yt={key:1,class:"text-center tw-mt-6"},Jt={class:"step-sidebar"},Zt={class:"text-h5 q-mb-xs"},te=["innerHTML"],ee={class:"text-right"},ae={class:"text-h6 tw-font-bold text-primary"},se={key:1,class:"select-card tw-max-w-md tw-w-full"},ne=["innerHTML"];function ie(t,e,a,i,o,r){const l=(0,s.g2)("q-tab"),c=(0,s.g2)("q-tabs"),d=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-separator"),p=(0,s.g2)("q-card-section"),m=(0,s.g2)("q-card"),g=(0,s.g2)("q-expansion-item"),h=(0,s.g2)("q-list"),f=(0,s.g2)("q-tab-panel"),v=(0,s.g2)("q-tab-panels"),w=(0,s.g2)("q-img");return(0,s.uX)(),(0,s.CE)("div",Dt,[o.stepContent?((0,s.uX)(),(0,s.CE)("h2",Pt,(0,n.v_)(o.stepContent.title),1)):(0,s.Q3)("",!0),o.loading?((0,s.uX)(),(0,s.CE)("div",Wt,Nt)):((0,s.uX)(),(0,s.CE)("div",Ut,[o.tab.length>0?((0,s.uX)(),(0,s.CE)("div",jt,[(0,s.bF)(c,{modelValue:o.tabActive,"onUpdate:modelValue":e[0]||(e[0]=t=>o.tabActive=t),"active-color":"primary","indicator-color":"primary","narrow-indicator":"",class:"tw-mb-4"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.tab,((t,e)=>((0,s.uX)(),(0,s.Wv)(l,{name:t.optionValue,label:t.optionValue,key:e},null,8,["name","label"])))),128))])),_:1},8,["modelValue"]),(0,s.bF)(v,{modelValue:o.tabActive,"onUpdate:modelValue":e[1]||(e[1]=t=>o.tabActive=t),animated:""},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.tab,((t,e)=>((0,s.uX)(),(0,s.Wv)(f,{name:t.optionValue,key:e},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.plans,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},[e.optionValue==t.optionValue?((0,s.uX)(),(0,s.Wv)(h,{key:0,bordered:"",separator:"",class:(0,n.C4)(["tw-mb-4 cursor-pointer tw-rounded-md item-plan tw-mx-2 md:tw-mx-6",{activePlan:e.id===o.selected.id&&e.planId===o.selected.planId}]),onClick:t=>r.selectPlan(e)},{default:(0,s.k6)((()=>[(0,s.bF)(g,{"expand-icon-toggle":"",group:"plans",modelValue:e.active,"onUpdate:modelValue":t=>e.active=t},{header:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Rt,(0,n.v_)(e.planName),1),(0,s.Lk)("div",Gt,(0,n.v_)(e.planName),1)])),_:2},1024),(0,s.bF)(d,{side:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ot,[(0,s.Lk)("span",Kt,(0,n.v_)(e.price),1),(0,s.eW)(" / "+(0,n.v_)(e.optionValue),1)])])),_:2},1024)])),default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u),(0,s.bF)(p,{innerHTML:e.planDescription},null,8,["innerHTML"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class","onClick"])):(0,s.Q3)("",!0)],64)))),128))])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])):((0,s.uX)(),(0,s.CE)("div",Yt,"No hay planes disponibles"))])),(0,s.Lk)("div",Jt,[o.selected?((0,s.uX)(),(0,s.Wv)(m,{key:0,class:"select-card tw-border-t-8 tw-max-w-lg",flat:"",bordered:""},{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Zt,(0,n.v_)(o.selected.planName),1),(0,s.Lk)("div",{class:"text-caption text-grey overflow-ellipsis overflow-hidden",innerHTML:o.selected.planSummary},null,8,te),(0,s.Lk)("div",ee,[(0,s.Lk)("span",ae,(0,n.v_)(o.selected.price),1),(0,s.eW)(" / "+(0,n.v_)(o.selected.optionValue),1)])])),_:1}),(0,s.bF)(u),(0,s.bF)(p,{class:"tw-text-xs",innerHTML:o.selected.planDescription},null,8,["innerHTML"])])),_:1})):o.stepContent?((0,s.uX)(),(0,s.CE)("div",se,[(0,s.Lk)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:o.stepContent.description},null,8,ne),o.stepContent?.mediaFiles?((0,s.uX)(),(0,s.Wv)(w,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])])}const oe={props:{info:{type:Array,default:()=>[]}},emits:["updateData"],data(){return{loading:!1,stepContent:"",tabActive:"",tab:[],selected:"",plans:[]}},inject:{infoBase:{type:Object,default:()=>{}}},mounted(){this.$nextTick((async function(){gt.nextStepButton=!1,this.getData(),this.getPlanSelected(),this.getStepInfo()}))},methods:{selectPlan(t){t.active=!t.active,this.selected=t,gt.data.plan=this.selected,gt.nextStepButton=!0,this.$emit("updateData",t)},async getPlanSelected(){try{gt.data.plan&&(this.selected=gt.data.plan,this.tabActive=this.selected.optionValue,gt.nextStepButton=!0),this.loading=!1}catch(t){console.log(t)}},mapInfoPlan(t){if(t.length>0){this.tab=t[0].optionValues.slice(0,2).sort(((t,e)=>t.optionValue.localeCompare(e.optionValue))),this.tabActive||(this.tabActive=this.tab[0].optionValue);let e=[],a=[];return t.map((function(t,s){const n=t.optionValues.filter(((t,e)=>e<2));a=n.map((e=>({...e,product:t,planId:t.id,planName:t.name,planSummary:t.summary,planDescription:t.description,planRelatedProducts:t.relatedProducts,planUrl:t.url,active:!1}))),e.unshift(a)})),e.flatMap((t=>t))}return[]},async getData(){this.plans=this.mapInfoPlan(gt.plans)},async getStepInfo(){this.stepContent=gt.infoPlans}}};var re=a(64873),le=a(26721),ce=a(64082),de=a(63815),ue=a(54514),pe=a(76986),me=a(63418),ge=a(97569),he=a(37015),fe=a(27066),ve=a(75329),we=a(24609);const be=(0,yt.A)(oe,[["render",ie]]),ye=be;St()(oe,"components",{QTabs:re.A,QTab:le.A,QTabPanels:ce.A,QTabPanel:de.A,QList:ue.A,QExpansionItem:pe.A,QItemSection:me.A,QCard:ge.A,QSeparator:he.A,QCardSection:fe.A,QImg:xt.A,QItem:ve.A,QIcon:we.A});const ke={class:"step-themes"},xe={key:0,class:"step-title"},Ce={key:1,class:"step-loading"},Le=(0,s.Lk)("div",null,null,-1),Se=(0,s.Lk)("div",null,null,-1),_e=[Le,Se],$e={key:2,class:"row tw-justify-center tw-px-2"},Te={key:0,class:"col-12 tw-text-xs tw-mt-2 tw-px-3"},Ae={class:"tw-font-bold"},ze={key:1,class:"col-12"},Ee={class:"row"},Fe={class:"col-6 col-sm-3 tw-mb-2 tw-p-3 tw-cursor-pointer"},Ie=["onClick"],Xe={class:"item-theme-name tw-text-xs text-center text-weight-bold"},Qe={key:2,class:"col-12 tw-text-base"},Ve={key:3,class:"step-sidebar"},qe={key:0,class:"select-card tw-max-w-md tw-w-full text-center"},Be={class:"select-name text-center text-weight-bold tw-mt-2 text-primary text-h6"},De=["innerHTML"],Pe={key:1,class:"select-card tw-max-w-md tw-w-full"},We=["innerHTML"];function Me(t,e,a,i,o,r){const l=(0,s.g2)("q-img"),c=(0,s.g2)("q-btn");return(0,s.uX)(),(0,s.CE)("div",ke,[o.stepContent?((0,s.uX)(),(0,s.CE)("h2",xe,(0,n.v_)(o.stepContent.title),1)):(0,s.Q3)("",!0),o.loading?((0,s.uX)(),(0,s.CE)("div",Ce,_e)):((0,s.uX)(),(0,s.CE)("div",$e,[o.selected?((0,s.uX)(),(0,s.CE)("div",Te,[(0,s.eW)((0,n.v_)(t.$tr("isite.cms.message.selectedTemplate"))+" : ",1),(0,s.Lk)("span",Ae,(0,n.v_)(o.selected.name),1)])):(0,s.Q3)("",!0),o.themes.length>0?((0,s.uX)(),(0,s.CE)("div",ze,[(0,s.Lk)("div",Ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.themes,((t,e)=>((0,s.uX)(),(0,s.CE)("div",Fe,[(0,s.Lk)("div",{class:(0,n.C4)(["item-theme",t.id===o.selected.id?"selectable--selected":"selectable"]),onClick:e=>r.selectData(t)},[(0,s.bF)(l,{fit:"contain",src:t?.mediaFiles?.mainimage.smallThumb,ratio:1,class:"tw-border tw-w-full tw-bg-white"},null,8,["src"]),(0,s.Lk)("div",Xe,(0,n.v_)(t.name),1)],10,Ie)])))),256))])])):((0,s.uX)(),(0,s.CE)("div",Qe,(0,n.v_)(t.$tr("isite.cms.message.noTemplates")),1))])),o.stepContent?((0,s.uX)(),(0,s.CE)("div",Ve,[o.selected?((0,s.uX)(),(0,s.CE)("div",qe,[(0,s.bF)(l,{class:"img-themes",fit:"contain",src:o.selected?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"]),(0,s.Lk)("div",Be,(0,n.v_)(o.selected.name),1),(0,s.Lk)("div",{class:"select-description text-caption text-center tw-mb-3",innerHTML:o.selected.description},null,8,De),(0,s.bF)(c,{outline:"",label:t.$tr("isite.cms.message.showDemo"),color:"primary",rounded:"",href:o.selected.url,target:"_blank"},null,8,["label","href"])])):((0,s.uX)(),(0,s.CE)("div",Pe,[(0,s.Lk)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:o.stepContent.description},null,8,We),o.stepContent?.mediaFiles?((0,s.uX)(),(0,s.Wv)(l,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])):(0,s.Q3)("",!0)]))])):(0,s.Q3)("",!0)])}const He={emits:["updateData"],data(){return{loading:!1,stepContent:"",selected:"",themes:[]}},mounted(){this.$nextTick((async function(){gt.nextStepButton=!1,this.getThemeSelected(),this.getThemes(),this.getStepInfo(),this.forceScroll()}))},methods:{selectData(t){this.selected=t,gt.data.layout=t,gt.nextStepButton=!0,this.$emit("updateData",t)},async getThemeSelected(){try{gt.data.layout&&gt.data.layout.planId==gt.data.plan.planId&&(this.selected=gt.data.layout,gt.nextStepButton=!0),this.loading=!1}catch(t){console.log(t)}},async getThemes(){try{const t=gt.data.plan;if(t){let e=t.planRelatedProducts;this.themes=e.map((e=>({...e,planId:t.planId})))}}catch(t){console.log(t)}},getStepInfo(){this.stepContent=gt.infoThemes},forceScroll(){const t=document.getElementsByClassName("scroll");t&&(t[0].style.overflowY="scroll")}}},Ne=(0,yt.A)(He,[["render",Me]]),Ue=Ne;St()(He,"components",{QImg:xt.A,QBtn:kt.A});const je={class:"step-terms"},Re={key:0,class:"step-loading"},Ge=(0,s.Lk)("div",null,null,-1),Oe=(0,s.Lk)("div",null,null,-1),Ke=[Ge,Oe],Ye={key:1},Je={key:0,class:"step-title"},Ze={class:"tw-mx-auto tw-text-base tw-max-w-sm"},ta={class:"tw-flex tw-overflow-hidden tw-mb-3"},ea=(0,s.Lk)("div",{class:"tw-pl-3 text-justify"}," Sí, quiero recibir correos electrónicos con consejos prácticos, novedades y ofertas especiales para mi página web. ",-1),aa={class:"tw-flex tw-overflow-hidden tw-mb-3"},sa=["innerHTML"],na={key:2,class:"step-sidebar"},ia={class:"terms-text tw-max-w-sm tw-w-full"},oa=["innerHTML"];function ra(t,e,a,i,o,r){const l=(0,s.g2)("q-checkbox"),c=(0,s.g2)("q-img");return(0,s.uX)(),(0,s.CE)("div",je,[o.loading?((0,s.uX)(),(0,s.CE)("div",Re,Ke)):((0,s.uX)(),(0,s.CE)("div",Ye,[o.stepContent?((0,s.uX)(),(0,s.CE)("h2",Je,(0,n.v_)(o.stepContent.title),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Ze,[(0,s.Lk)("div",ta,[(0,s.bF)(l,{dense:"",modelValue:o.buttonEmail,"onUpdate:modelValue":e[0]||(e[0]=t=>o.buttonEmail=t),color:"primary"},null,8,["modelValue"]),ea]),(0,s.Lk)("div",aa,[(0,s.bF)(l,{dense:"",modelValue:o.buttonTerms,"onUpdate:modelValue":e[1]||(e[1]=t=>o.buttonTerms=t),color:"primary"},null,8,["modelValue"]),(0,s.Lk)("div",{class:"tw-pl-3 text-justify",innerHTML:r.termsAndConditions},null,8,sa)])])])),o.stepContent?((0,s.uX)(),(0,s.CE)("div",na,[(0,s.Lk)("div",ia,[(0,s.Lk)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:o.stepContent.description},null,8,oa),o.stepContent.mediaFiles?((0,s.uX)(),(0,s.Wv)(c,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1},null,8,["src"])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])}const la={emits:["updateData"],data(){return{loading:!1,buttonEmail:!1,buttonTerms:!1,stepContent:"",urlBase:this.$store.state.qsiteApp.baseUrl}},mounted(){this.$nextTick((async function(){this.getStepInfo(),this.getData()}))},watch:{buttonTerms(t,e){gt.nextStepButton=t,gt.data.terms.check=t,this.$emit("updateData",{})},buttonEmail(t,e){gt.data.terms.email=t,this.$emit("updateData",{})}},computed:{termsAndConditions(){let t={politics:this.$getSetting("iprofile::registerUserWithPoliticsOfPrivacy")??`${this.urlBase}/politica-de-privacidad`,terms:this.$getSetting("iprofile::registerUserWithTermsAndConditions")??`${this.urlBase}/terminos-y-condiciones`},e="";return t.politics&&(e+=`<a href="${t.politics}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.privacyPolicy")}</b></a>,`),t.terms&&(e+=`<a href="${t.terms}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.termsAndConditions")}</b></a>,`),this.$tr("iprofile.cms.message.privacyData",{concatData:e,siteName:this.$getSetting("core::site-name")})}},methods:{async getData(){this.buttonTerms=gt.data.terms.check??!1,this.buttonEmail=gt.data.terms.email??!1,gt.previousStepButton=!0,gt.nextStepButton=this.buttonTerms},async getStepInfo(){this.stepContent=gt.infoTerms}}};var ca=a(12225);const da=(0,yt.A)(la,[["render",ra]]),ua=da;St()(la,"components",{QCheckbox:ca.A,QImg:xt.A});const pa={class:"step-welcome"},ma={class:"row justify-center align-center"},ga={class:"col-12 col-sm-10 col-md-11"},ha={class:"tw-mx-auto lg:tw-w-3/5 tw-mt-4"},fa={class:"step-title-1 text-primary"},va=["innerHTML"],wa={class:"text-center tw-mt-6"};function ba(t,e,a,i,o,r){const l=(0,s.g2)("q-img"),c=(0,s.g2)("q-btn");return(0,s.uX)(),(0,s.CE)("div",pa,[(0,s.Lk)("div",ma,[(0,s.Lk)("div",ga,[(0,s.Lk)("div",ha,[(0,s.Lk)("h2",fa,(0,n.v_)(o.stepContent.title),1),(0,s.Lk)("div",{class:"tw-text-xs md:tw-text-xl lg:tw-px-8 tw-text-center tw-pb-4 md:tw-pb-6",innerHTML:o.stepContent.description},null,8,va),o.stepContent?.mediaFiles?((0,s.uX)(),(0,s.Wv)(l,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1,class:"tw-h-44"},null,8,["src"])):(0,s.Q3)("",!0),(0,s.Lk)("div",wa,[(0,s.bF)(c,{rounded:"",class:"tw-text-center","no-caps":"",color:"primary",size:"md",outline:"",onClick:e[0]||(e[0]=t=>r.nextStep())},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(t.$tr("isite.cms.label.start")),1)])),_:1})])])])])])}const ya={components:{},emits:["nextStep"],data(){return{stepContent:""}},mounted(){this.$nextTick((async function(){this.getStepInfo()}))},methods:{async getStepInfo(){this.stepContent=gt.infoWelcome},nextStep(){try{this.$emit("nextStep")}catch(t){console.log("error en welcome")}}}};var ka=a(65699);const xa=(0,yt.A)(ya,[["render",ba]]),Ca=xa;St()(ya,"components",{QImg:xt.A,QBtn:kt.A,QStepper:ka.A});const La={class:"step-summary"},Sa={key:0,class:"step-loading"},_a=(0,s.Lk)("div",null,null,-1),$a=(0,s.Lk)("div",null,null,-1),Ta=[_a,$a],Aa={key:1,class:"row justify-center align-center"},za={class:"col-12 col-sm-10 col-md-11"},Ea={class:"tw-p-4 md:tw-p-4 tw-mx-auto lg:tw-w-3/5"},Fa=["innerHTML"],Ia={key:1,class:"row q-col-gutter-md"},Xa={class:"col-12 col-md-7 tw-mt-3"},Qa={class:"selected-label"},Va={class:"selected-box"},qa={class:"selected-label"},Ba={class:"selected-box"},Da={class:"row q-col-gutter-md"},Pa={class:"col-12 col-md-6"},Wa={class:"selected-label"},Ma={class:"selected-box selected-box-m"},Ha={class:"col-12 col-md-6"},Na={class:"selected-label"},Ua={class:"selected-box"},ja={class:"selected-label"},Ra={class:"selected-box"},Ga={class:"tw-font-medium"},Oa=["innerHTML"],Ka={key:0},Ya=(0,s.Lk)("div",{class:"selected-label"},"Inteligencia Artificial",-1),Ja=(0,s.Lk)("div",{class:"selected-box"}," Activado para sugerencias de contenido en mi sitio web. ",-1),Za=[Ya,Ja],ts={class:"col-12 col-md-5"};function es(t,e,a,i,o,r){const l=(0,s.g2)("q-img");return(0,s.uX)(),(0,s.CE)("div",La,[o.loading?((0,s.uX)(),(0,s.CE)("div",Sa,Ta)):((0,s.uX)(),(0,s.CE)("div",Aa,[(0,s.Lk)("div",za,[(0,s.Lk)("div",Ea,[o.stepContent?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"tw-text-xs md:tw-text-base text-center tw-font-bold tw-pb-4",innerHTML:o.stepContent.description},null,8,Fa)):(0,s.Q3)("",!0),o.selected?((0,s.uX)(),(0,s.CE)("div",Ia,[(0,s.Lk)("div",Xa,[(0,s.Lk)("div",Qa,(0,n.v_)(t.$tr("isite.cms.label.user")),1),(0,s.Lk)("div",Va,(0,n.v_)(o.selected.user.email),1),(0,s.Lk)("div",qa,(0,n.v_)(t.$tr("isite.cms.label.organization")),1),(0,s.Lk)("div",Ba,(0,n.v_)(o.selected.organization),1),(0,s.Lk)("div",Da,[(0,s.Lk)("div",Pa,[(0,s.Lk)("div",Wa,(0,n.v_)(t.$tr("isite.cms.label.category")),1),(0,s.Lk)("div",Ma,(0,n.v_)(o.selected.category.title),1)]),(0,s.Lk)("div",Ha,[(0,s.Lk)("div",Na,(0,n.v_)(t.$tr("isite.cms.label.plan")),1),(0,s.Lk)("div",Ua,(0,n.v_)(o.selected.plan.product.name)+" "+(0,n.v_)(o.selected.plan.optionValue),1)])]),(0,s.Lk)("div",ja,(0,n.v_)(t.$tr("isite.cms.label.template")),1),(0,s.Lk)("div",Ra,[(0,s.Lk)("div",Ga,(0,n.v_)(o.selected.layout.name),1),(0,s.Lk)("div",{class:"select-description",innerHTML:o.selected.layout.description},null,8,Oa)]),o.selected.form.check?((0,s.uX)(),(0,s.CE)("div",Ka,Za)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ts,[(0,s.bF)(l,{class:"img-themes tw-h-44",fit:"contain",src:o.selected.layout?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])])])):(0,s.Q3)("",!0)])])]))])}const as={components:{},data(){return{loading:!1,selected:"",stepContent:""}},mounted(){this.$nextTick((async function(){this.getStepInfo(),this.getDataSelected()}))},methods:{async getStepInfo(){this.stepContent=gt.infoSummary},async getDataSelected(){try{this.loading=!0,this.selected=gt.data,this.loading=!1}catch(t){console.log(t)}}}},ss=(0,yt.A)(as,[["render",es]]),ns=ss;St()(as,"components",{QImg:xt.A,QStepper:ka.A});const is={class:"step-ai tw-overflow-y-hidden"},os={class:"step-title"},rs={class:"tw-flex tw-items-center tw-justify-center tw-mb-3"},ls=(0,s.Lk)("div",{class:"tw-pl-2 tw-text-xs md:tw-text-base text-justify"}," Usar Inteligencia Artificial para sugerencias de contenido en mi sitio web. ",-1),cs={key:0,class:"tw-mt-6"},ds=(0,s.Lk)("div",{class:"tw-pl-4 tw-text-xs"},"Completa el siguiente formulario ",-1),us={style:{"min-height":"100px"}},ps={key:1,class:"step-sidebar"},ms={class:"select-ai tw-max-w-md tw-w-full"},gs=["innerHTML"];function hs(t,e,a,i,o,r){const l=(0,s.g2)("q-toggle"),c=(0,s.g2)("dynamic-form"),d=(0,s.g2)("q-img");return(0,s.uX)(),(0,s.CE)("div",is,[o.stepContent?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["tw-max-w-xl tw-mx-auto",{"form-inactive":!o.activeForm}])},[(0,s.Lk)("h2",os,(0,n.v_)(o.stepContent.title),1),(0,s.Lk)("div",rs,[(0,s.bF)(l,{modelValue:o.activeForm,"onUpdate:modelValue":e[0]||(e[0]=t=>o.activeForm=t),color:"primary"},null,8,["modelValue"]),ls]),o.activeForm?((0,s.uX)(),(0,s.CE)("div",cs,[ds,(0,s.Lk)("div",us,[(0,s.bF)(c,{modelValue:o.form,"onUpdate:modelValue":e[1]||(e[1]=t=>o.form=t),"form-id":o.formId,formType:"grid","no-actions":"",ref:"ai-form","default-col-class":"col-6"},null,8,["modelValue","form-id"])])])):(0,s.Q3)("",!0)],2)):(0,s.Q3)("",!0),o.stepContent?((0,s.uX)(),(0,s.CE)("div",ps,[(0,s.Lk)("div",ms,[(0,s.Lk)("div",{class:"tw-text-base tw-text-center tw-mb-10",innerHTML:o.stepContent.description},null,8,gs),o.stepContent.mediaFiles?((0,s.uX)(),(0,s.Wv)(d,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])}const fs={props:{info:{type:Array,default:()=>[]}},emits:["updateData"],data(){return{activeForm:!1,stepContent:"",form:{},formId:""}},mounted(){this.$nextTick((async function(){this.getData(),this.getStepInfo()}))},watch:{activeForm(t,e){gt.data.form.check=t,t||(gt.data.form.data=!1),this.$emit("updateData",t)},form(t,e){gt.data.form.data=t}},methods:{async getData(){gt.data.form?.check&&(this.activeForm=gt.data.form.check,this.form=gt.data.form.data)},async verifyForm(){try{let t=!1;if(this.$refs["ai-form"]){let e=await this.$refs["ai-form"].validateCompleteForm();e&&(t=!0)}else console.log("no form");return t}catch(t){console.log(t)}},async getStepInfo(){this.stepContent=gt.infoAi,this.formId=this.stepContent.formId}}};var vs=a(90449);const ws=(0,yt.A)(fs,[["render",hs]]),bs=ws;St()(fs,"components",{QToggle:vs.A,QImg:xt.A});const ys=[{id:j,title:"Welcome",prefix:j,component:Ca,done:!1},{id:R,title:"Terms",prefix:R,component:ua,done:!1},{id:G,title:"Company",prefix:G,component:Bt,done:!1},{id:O,title:"Categories",prefix:O,component:$t,done:!1},{id:K,title:"Plans",prefix:K,component:ye,done:!1},{id:Y,title:"Themes",prefix:Y,component:Ue,done:!1},{id:J,title:"AI",prefix:J,component:bs,done:!1},{id:Z,title:"Summary",prefix:Z,component:ns,done:!1}],ks={beforeUnmount(){},computed:{steps(){const t=!!parseInt(this.$getSetting("isite::contentGenerationWithAI"));return ys.filter((e=>!(e.id==J&&!t)&&e))},siteName(){return this.$getSetting("core::site-name")},showStepperNavigation(){return this.currentStep!=j},activatePreviousButton(){return gt.previousStepButton},activateNextButton(){return gt.nextStepButton},getStep(){return gt.step}},data(){return{loading:!1,data:[],logo:this.$store.state.qsiteApp.logo,currentStep:0,progress:0,progressPercent:0,urlBase:this.$store.state.qsiteApp.baseUrl,dataUrl:{planId:"",billingCycle:"",layoutId:""},welcome:j,summary:Z,themes:Y,terms:R,buttonLoading:!1}},mounted(){this.$nextTick((async function(){this.init()}))},methods:{async init(){await this.getInfo(),await this.configProgress()},async getInfo(){this.loading=!0;try{gt.data.user=this.$store.getters["quserAuth/user"]}catch(s){console.log(s)}gt.infoWizard=await wt().getInfoWizard();let t=await this.$cache.get.item("org-wizard-categories");!t?.length>0&&(t=await wt().getCategories(),this.$cache.set("org-wizard-categories",t)),gt.categories=t;let e=await this.$cache.get.item("org-wizard-plans");!e?.length>0&&(e=await wt().getPlans(tt),this.$cache.set("org-wizard-plans",e)),gt.plans=e,gt.step=await this.$cache.get.item("org-wizard-step"),gt.step=gt.step??j;const a=await this.$cache.get.item("org-wizard-data");gt.data.user=gt.data.user??a?.user,gt.data.terms=a?.terms?a.terms:gt.data.terms,gt.data.organization=a?.organization??"",gt.data.category=a?.category??!1,gt.data.plan=a?.plan??!1,gt.data.layout=a?.layout??!1,this.updateData(),this.loading=!1},async configProgress(){this.progressPercent=1/(this.steps.length-1),this.currentStep=gt.step,this.progress=this.progressPercent*this.currentStep},async nextStep(){if(this.currentStep==G){this.buttonLoading=!0;const t=await this.$refs.stepComponent[0].checkOrganizationName(gt.data.organization);if(this.buttonLoading=!1,t&&t?.title)return this.$alert.info({mode:"modal",title:this.siteName,message:this.$tr("isite.cms.alreadyInUse"),actions:[]}),!1}if(this.currentStep==J&&gt.data.form.check){let t=await this.$refs.stepComponent[0].verifyForm();if(!t)return!1}if(this.currentStep==Z)return this.redirectAfterWizard(),!1;this.currentStep+=1,gt.step=this.currentStep,this.updateData(),this.configProgress(),this.$refs.stepper.next()},previousStep(){this.currentStep-=1,gt.step=this.currentStep,this.updateData(),this.configProgress(),this.$refs.stepper.previous()},updateData(t){this.$cache.set("org-wizard-step",gt.step),this.$cache.set("org-wizard-data",gt.data)},async redirectAfterWizard(){let t=null;const e=this.$getSetting("isite::wizardTenantType"),a={billingcycle:gt.data.plan.optionValue.toLowerCase(),layoutId:gt.data.layout.entity.id,organizationName:gt.data.organization,categoryId:gt.data.category.id,email:gt.data.user.email,planId:gt.data.plan.product.entity.id,formIA:gt.data.form.data};switch(e){case"weygo":t=gt.data.plan.planUrl,Object.keys(a).forEach((e=>t+=`&${e}=${a[e]}`));break;default:this.$alert.info({mode:"modal",title:this.siteName,icon:"fa-duotone fa-spinner-third fa-spin",message:this.$tr("isite.cms.message.creatingTenant"),actions:[]});const e=await this.$crud.create("apiRoutes.qplan.buy",a).catch((t=>{this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoCreated")}`})}));e.data&&e.data.redirectTo&&(t=e.data.redirectTo);break}t&&(this.$cache.remove("org-wizard-data"),this.$cache.remove("org-wizard-step"),this.$cache.remove("org-wizard-categories"),this.$cache.remove("org-wizard-plans"),this.$helper.openExternalURL(t,!1))}}};var xs=a(42876),Cs=a(64297),Ls=a(84894),Ss=a(86499),_s=a(57201);const $s=(0,yt.A)(ks,[["render",y]]),Ts=$s;St()(ks,"components",{QLinearProgress:xs.A,QStepper:ka.A,QStepperNavigation:Cs.A,QBtn:kt.A,QStep:Ls.A,QIcon:we.A,QSlider:Ss.A,QDialog:_s.A})}}]);