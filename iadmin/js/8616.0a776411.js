"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[8616],{11996:(e,a,t)=>{t.r(a),t.d(a,{default:()=>O});var s=t(61758),l=t(58790);const i={id:"crudCardAppoinments"},o={key:0,class:"appt-card box"},n={class:"appt-card__title row items-center justify-between"},r={class:"box-title"},d={class:"appt-card__fields"},c={class:"appt-card__fields-title box-title"},m={class:"text-grey-7 q-mr-xs"},u={key:0,class:"appt-card__fields-field q-py-xs"},p={class:"text-grey-7 q-mr-xs"},f={key:0,class:"appt-card__related-users"},v={class:"row q-gutter-y-sm"},b=["src"],g={key:1,class:"appt-card__recommendation"},w={class:"box-title q-mb-sm"},k={key:2,class:"appt-card__conversation"},h={class:"box-title q-mb-sm"},_={key:3,class:"appt-card__fields"},F={class:"box-title"},A={key:1,class:"text-caption"},y={key:4,class:"appt-card__actions text-center"},C={class:"appt-actions text-right"},q={class:"row justify-between q-gutter-sm"},I={style:{width:"600px"}};function x(e,a,t,x,$,D){const L=(0,s.g2)("btn-menu"),Q=(0,s.g2)("q-separator"),X=(0,s.g2)("q-avatar"),E=(0,s.g2)("q-item-section"),T=(0,s.g2)("q-item-label"),N=(0,s.g2)("q-item"),U=(0,s.g2)("q-btn"),K=(0,s.g2)("dynamic-field"),V=(0,s.g2)("advance-chat"),W=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.CE)("div",i,[D.rowData?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",n,[(0,s.Lk)("div",r,(0,l.v_)(D.rowData.title),1),(0,s.bF)(L,{actions:t.fieldActions,"action-data":t.row},null,8,["actions","action-data"])]),(0,s.Lk)("div",d,[(0,s.bF)(Q,{class:"q-my-md"}),(0,s.Lk)("div",c,(0,l.v_)(e.$tr("isite.cms.label.information")),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(D.rowData.mainInformation,((a,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"appt-card__fields-field q-py-xs",key:e.$uid()},[(0,s.Lk)("label",m,(0,l.v_)(a.label)+":",1),(0,s.Lk)("label",null,(0,l.v_)(a.value),1)])))),128)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(D.rowData.informationFields,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},[$.showAllInfo&&e?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("label",p,(0,l.v_)(e.label)+": ",1),(0,s.Lk)("label",null,(0,l.v_)(e.value),1)])):(0,s.Q3)("",!0)],64)))),128))]),$.showAllInfo&&D.rowData.relatedUsers.length?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(Q,{class:"q-my-md"}),(0,s.Lk)("div",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(D.rowData.relatedUsers,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"col-12"},[e?((0,s.uX)(),(0,s.Wv)(N,{key:0,dense:"",class:"q-px-none"},{default:(0,s.k6)((()=>[(0,s.bF)(E,{side:"",class:"q-pr-sm"},{default:(0,s.k6)((()=>[(0,s.bF)(X,{size:"40px"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.mediumImage},null,8,b)])),_:2},1024)])),_:2},1024),(0,s.bF)(E,null,{default:(0,s.k6)((()=>[(0,s.bF)(T,{caption:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.rolName),1)])),_:2},1024),(0,s.bF)(T,{caption:"",class:"text-blue-grey"},{default:(0,s.k6)((()=>[(0,s.Lk)("b",null,(0,l.v_)(e.fullName),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])))),128))])])):(0,s.Q3)("",!0),$.showAllInfo&&D.rowData.recomendation?((0,s.uX)(),(0,s.CE)("div",g,[(0,s.bF)(Q,{class:"q-my-sm"}),(0,s.Lk)("div",w,(0,l.v_)(e.$trp("isite.cms.label.recommendation")),1),(0,s.bF)(U,{unelevated:"",color:"amber",rounded:"","no-caps":"",icon:"fas fa-info",onClick:a[0]||(a[0]=a=>e.$alert.warning({mode:"modal",message:D.rowData.recomendation,title:e.$trp("isite.cms.label.recommendation")})),label:e.$tr("iappointment.cms.message.readRecomendations")},null,8,["label"])])):(0,s.Q3)("",!0),$.showAllInfo&&D.rowData.conversationId?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.bF)(Q,{class:"q-my-sm"}),(0,s.Lk)("div",h,(0,l.v_)(e.$tr("isite.cms.label.chat")),1),(0,s.bF)(U,{unelevated:"",color:"info",rounded:"","no-caps":"",icon:"fa-light fa-message",onClick:a[1]||(a[1]=e=>$.showConversation=!0),label:e.$tr("iappointment.cms.message.readFullConversation")},null,8,["label"])])):(0,s.Q3)("",!0),$.showAllInfo&&D.rowData.ratingFields?((0,s.uX)(),(0,s.CE)("div",_,[(0,s.bF)(Q,{class:"q-my-sm"}),(0,s.Lk)("div",F,(0,l.v_)(e.$tr("isite.cms.label.rating")),1),D.rowData.ratingFields.ratingField?((0,s.uX)(),(0,s.Wv)(K,{key:0,field:D.rowData.ratingFields.ratingField},null,8,["field"])):(0,s.Q3)("",!0),D.rowData.ratingFields.rattingComments?((0,s.uX)(),(0,s.CE)("div",A,(0,l.v_)(D.rowData.ratingFields.rattingComments),1)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),"ipanel"==$.configApp.mode&&$.showAllInfo&&D.rowData.goToAppointment?((0,s.uX)(),(0,s.CE)("div",y,[(0,s.bF)(Q,{class:"q-my-sm"}),(0,s.bF)(U,{unelevated:"",color:"green",rounded:"","no-caps":"",label:e.$tr("iappointment.cms.message.goToAppointment"),to:{name:"qappointment.panel.appointments.index",params:{id:D.rowData.id}}},null,8,["label","to"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",C,[(0,s.bF)(Q,{class:"q-mt-sm q-mb-md"}),(0,s.Lk)("div",q,[(0,s.bF)(U,{color:"info",size:"sm",rounded:"",unelevated:"",padding:"xs md",onClick:a[2]||(a[2]=e=>$.showAllInfo=!$.showAllInfo),label:e.$tr("isite.cms.message."+($.showAllInfo?"showLess":"showMore")),icon:"fas fa-angle-double-"+($.showAllInfo?"up":"down")},null,8,["label","icon"])])])])):(0,s.Q3)("",!0),(0,s.bF)(W,{modelValue:$.showConversation,"onUpdate:modelValue":a[3]||(a[3]=e=>$.showConversation=e)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",I,[(0,s.bF)(V,{"room-id":D.rowData.conversationId,"advanced-props":{showFooter:!1}},null,8,["room-id"])])])),_:1},8,["modelValue"])])}var $=t(78319),D=t(99526)["A"];const L={beforeUnmount(){},props:{row:{default:!1},permitAction:{default:!1},fieldActions:{default:!1}},components:{advanceChat:$.A},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{configApp:D("app"),loading:!1,showAllInfo:!1,showConversation:!1}},computed:{rowData(){if(!this.row)return!1;let e=this.$clone(this.row),a=this.$store.state.quserAuth.userId,t=e.fields?e.fields.filter((e=>-1==e.name.indexOf("rating"))):[],s=!!e.fields&&e.fields.find((e=>"rating"==e.name)),l=!!e.fields&&e.fields.find((e=>"rating_comments"==e.name));return{id:e.id,title:this.$trd(e.createdAt),mainInformation:[{label:`${this.$tr("isite.cms.label.appointment")} NÂ°`,value:e.id},{label:this.$tr("isite.cms.form.status"),value:e.status.title}],informationFields:t.map((e=>({label:e.name,value:e.value}))),relatedUsers:[!(!e.assigned||e.assigned.id==a)&&{...e.assigned,rolName:this.$tr("isite.cms.form.assignedTo")},!(!e.customer||e.customer.id==a)&&{...e.customer,rolName:this.$tr("isite.cms.label.customer")}],recomendation:!(!e.options||!e.options.recommendation)&&e.options.recommendation,conversationId:!!e.conversation&&e.conversation.id,ratingFields:!(!s&&!l)&&{rattingComments:!!l&&l.value,ratingField:!!s&&{value:parseInt(s.value),type:"rating",props:{readonly:!0}}},goToAppointment:-1==[5,6].indexOf(parseInt(e.statusId))}}},methods:{init(){}}};var Q=t(12807),X=t(37015),E=t(75329),T=t(63418),N=t(53581),U=t(35779),K=t(69001),V=t(57201),W=t(98582),j=t.n(W);const z=(0,Q.A)(L,[["render",x]]),O=z;j()(L,"components",{QSeparator:X.A,QItem:E.A,QItemSection:T.A,QAvatar:N.A,QItemLabel:U.A,QBtn:K.A,QDialog:V.A})}}]);