"use strict";(globalThis["webpackChunkimagina_cms"]=globalThis["webpackChunkimagina_cms"]||[]).push([[8160],{78160:(e,t,i)=>{function a(e,t,i,a,s,r){return null}i.r(t),i.d(t,{default:()=>d});const s={data(){return{crudId:this.$uid()}},computed:{crudData(){return{crudId:this.crudId,apiRoute:"apiRoutes.qmedia.files",permission:"media.medias",create:{title:this.$tr("media.cms.newFile"),method:this.create},read:{},update:{title:this.$tr("media.cms.updateFile")},delete:!0,formLeft:{id:{value:""},userId:{value:this.$store.state.quserAuth.userId},file:{value:null,type:"uploader",props:{vIf:"create"==this.crudInfo.typeForm,title:this.$trp("isite.cms.label.file"),gridColClass:"col-xs-12"}},altAttribute:{value:"",type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.name")}`,rules:[e=>!e||this.$helper.validateSlugFormat(e)||this.$tr("isite.cms.message.mustContainAlphanumeric")]}},folderId:{value:"0",type:"treeSelect",props:{label:this.$tr("isite.cms.label.folder"),clearable:!1,options:[{label:this.$tr("isite.cms.message.noValue"),value:"0",id:"0"}]},loadOptions:{apiRoute:"apiRoutes.qmedia.files",requestParams:{filter:{isFolder:!0}},select:{label:"filename",id:"id",parentId:"folderId"}}},description:{value:"",type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.description")}`,type:"textarea",rows:"3"}}},formRight:{}}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}},methods:{create(e){return new Promise((async(t,i)=>{let a=new FormData;a.append("parent_id",e.folderId||0),a.append("file",e.file),await this.$crud.post(this.crudData.apiRoute,a).then((a=>{let s=a.data;delete e.file,e.id=s.id,this.$crud.update(this.crudData.apiRoute,s.id,e).then((e=>{t(e)})).catch((e=>{i(e)}))})).catch((e=>{i(e.response.data.errors)}))}))}}};var r=i(68716);const l=(0,r.c)(s,[["render",a]]),d=l}}]);