"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[2297],{22297:(e,l,a)=>{a.r(l),a.d(l,{default:()=>_});var t=a(61758),i=a(58790);const s={id:"directoryCorporativePage"},o={id:"pageContent",class:"box relative-position"},r={class:"full-width row"},n={id:"usersContent",class:"q-py-lg row q-col-gutter-lg"},c={key:0},u={class:"row items-center user-card"},d={class:"col-12"},p={class:"text-capitalize ellipsis text-weight-bold"},g={class:"col-12 col-lg-5"},h={class:"img-content"},m={class:"col-12 col-lg-7"},f={class:"row justify-end full-width"};function v(e,l,a,v,b,k){const y=(0,t.g2)("dynamic-field"),F=(0,t.g2)("not-result"),q=(0,t.g2)("q-separator"),L=(0,t.g2)("avatar-image"),P=(0,t.g2)("q-icon"),C=(0,t.g2)("q-item-label"),$=(0,t.g2)("q-item-section"),w=(0,t.g2)("q-item"),x=(0,t.g2)("q-list"),D=(0,t.g2)("q-pagination"),I=(0,t.g2)("inner-loading");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.Lk)("div",o,[(0,t.Lk)("div",r,[(0,t.bF)(y,{modelValue:b.search,"onUpdate:modelValue":[l[0]||(l[0]=e=>b.search=e),l[1]||(l[1]=e=>k.getData())],field:k.searchField,class:"col-12 col-md-4 col-xl-3"},null,8,["modelValue","field"])]),(0,t.Lk)("div",n,[b.loading||!b.users||b.users.length?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:1},(0,t.pI)(k.userList,((l,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-12 col-lg-6"},[(0,t.Lk)("div",u,[(0,t.Lk)("div",d,[(0,t.Lk)("div",p,(0,i.v_)(l.fullName),1),(0,t.bF)(q,{class:"q-my-sm"})]),(0,t.Lk)("div",g,[(0,t.Lk)("div",h,[(0,t.bF)(L,{src:l?.mainImage,width:"1160px",height:"116px"},null,8,["src"])])]),(0,t.Lk)("div",m,[(0,t.bF)(x,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.informationBlocks,((l,a)=>((0,t.uX)(),(0,t.Wv)(w,{key:a,style:{padding:"0"},clickable:!!l.copy,onClick:a=>l.copy?e.$helper.copyToClipboard(l.copy):null},{default:(0,t.k6)((()=>[(0,t.bF)($,null,{default:(0,t.k6)((()=>[(0,t.bF)(C,{overline:""},{default:(0,t.k6)((()=>[(0,t.bF)(P,{name:l.icon,color:"primary"},null,8,["name"]),(0,t.eW)(" "+(0,i.v_)(l.label),1)])),_:2},1024),(0,t.bF)(C,{class:"q-pl-sm ellipsis"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(l.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["clickable","onClick"])))),128))])),_:2},1024)])])])))),128)):((0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(F)]))]),(0,t.Lk)("div",f,[(0,t.bF)(D,{modelValue:b.pagination.page,"onUpdate:modelValue":[l[2]||(l[2]=e=>b.pagination.page=e),l[3]||(l[3]=e=>{b.pagination.page=e,k.getData()})],max:b.pagination.lastPage,input:"",color:"grey-9"},null,8,["modelValue","max"])]),(0,t.bF)(I,{visible:b.loading},null,8,["visible"])])])}var b=a(71915);const k={props:{},components:{},watch:{},beforeUnmount(){b.Bt.off("page.data.refresh")},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,search:null,rolesToDirectory:this.$getSetting("iprofile::rolesToDirectory"),pagination:{perPage:20,page:1,lastPage:1},users:[]}},computed:{searchField(){return{value:null,type:"search"}},userList(){let e=this.users||[];return e.forEach((e=>{let l=this.$helper.convertToFrontField(e.fields);e.fullName=e.fullName.toLowerCase(),e.informationBlocks=[{label:this.$tr("isite.cms.label.role"),icon:"fas fa-user",value:e.roles?e.roles.map((e=>e.name)).join(", "):""},{label:this.$tr("isite.cms.label.email"),icon:"fas fa-envelope",copy:e.email,value:e.email},{label:this.$tr("isite.cms.label.phone"),icon:"fas fa-phone",copy:!!l.cellularPhone&&l.cellularPhone.value,value:l.cellularPhone?this.$helper.maskPhone(l.cellularPhone.value):"-"}]})),e}},methods:{init(){this.setFilters(),this.getData(),b.Bt.on("page.data.refresh",(()=>this.getData(!0)))},setFilters(){this.$filter.setFilter({name:this.$route.name,fields:{roleId:{value:null,type:"select",props:{label:this.$tr("isite.cms.label.role"),clearable:!0},loadOptions:{apiRoute:"apiRoutes.quser.roles",select:{label:"name",id:"id"},requestParams:{filter:{id:this.rolesToDirectory}}}}},callBack:()=>this.getData(!0)})},getData(e=!1){return new Promise(((l,a)=>{this.loading=!0;let t={refresh:e,params:{page:this.pagination.page,take:this.pagination.perPage,include:"roles",filter:{search:this.search,...this.$filter.values}}};t.params.filter.roleId||(t.params.filter.roleId=this.rolesToDirectory),this.$crud.index("apiRoutes.quser.users",t).then((e=>{this.users=e.data,this.pagination.lastPage=e.meta.page.lastPage,this.loading=!1,l(e.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading=!1,a(e)}))}))}))}}};var y=a(12807),F=a(37015),q=a(54514),L=a(75329),P=a(63418),C=a(35779),$=a(24609),w=a(33489),x=a(98582),D=a.n(x);const I=(0,y.A)(k,[["render",v]]),_=I;D()(k,"components",{QSeparator:F.A,QList:q.A,QItem:L.A,QItemSection:P.A,QItemLabel:C.A,QIcon:$.A,QPagination:w.A})}}]);