(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[1640],{38688:(e,t,a)=>{"use strict";a.d(t,{c:()=>m});a(23816);var s=a(80472);class i{getMenu(e,t){const a=[];if(e&&t)return e.map((e=>{let s=t.find((({id:t})=>t==e.pageId));a.push({id:e.id,parentId:e.parentId,title:e.title,icon:e.icon,name:s?s.options.name:null,permission:s?s.options.permission:null,activated:!!parseInt(e.status)&&(!s||s.status)})})),s.c.builTree(a)}}const o=new i,l=o;var A=a(27730),r=a(73376);class n{constructor(){this.sidebar={},this.modules=A.c.modules,this.pages=r.c,this.addDefaultItems(),"iadmin"==A.c.mode&&this.loadModulesSidebar({name:"adminSidebar"}),"ipanel"==A.c.mode&&this.loadModulesSidebar({name:"panelSidebar"}),this.orderSidebar()}addDefaultItems(){this.pages.mainapp&&(this.sidebar["app"]=this.pages.mainapp.home||{})}loadModulesSidebar(e={}){this.modules.forEach((t=>{let s=!1;try{s=a(33848)(`./${t}/_config/${e.name}`).default}catch(i){}s&&s.length&&s.forEach(((e,a)=>{this.sidebar[`${t}${a?a+1:""}`]=e}))}));let t=!1;try{t=a(26160)(`./${e.name}`).default}catch(s){}t&&t.length&&t.forEach(((e,t)=>{this.sidebar[`${name}${t?t+1:""}`]=e}))}orderSidebar(){let e={},t={};Object.keys(this.sidebar).forEach((a=>{let s=this.sidebar[a];"app.home"==s.name||s.children?e[a]=s:t[a]=s})),this.sidebar={...e,...t}}}const c=new n,d=(c.sidebar,Object.values(c.sidebar)),m={created(){this.menu=l.getMenu(this.$clone(this.$store.getters["qsiteApp/getMenu"]),this.$clone(this.$store.state.qsiteApp.pages))},data(){return{menu:[],menuTranslatable:!1,menuLocal:d}},computed:{menuSelect(){return this.menuTranslatable=!0,this.menuTranslatable?this.menuLocal:this.menu}}}},8124:(e,t,a)=>{"use strict";a.d(t,{c:()=>o});var s=a(43704);function i(){var e=this.$route.meta&&this.$route.meta.title?this.$route.meta.title:"";this.$route.meta&&this.$route.meta.headerTitle&&(e=this.$route.meta.headerTitle);var t=this.$getSetting("core::site-name"),s=this.$getSetting("core::site-description"),i=this.$store.getters["qsiteApp/getSettingMediaByName"]("isite::favicon"),o=i.id?i.path:a(6324);return{title:"".concat(this.$tr(e)," | ").concat(t),meta:{description:{name:"description",content:s||t}},link:{icon:{rel:"icon",href:o}}}}const o=(0,s.c)(i)},62792:(e,t,a)=>{"use strict";a.d(t,{c:()=>o});var s=a(20584),i=function(){return i=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var i in t=arguments[a],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};const o={getNotifications:function(e){return new Promise((function(t,a){s.c.index("apiRoutes.qnotification.notifications",e).then((function(e){t(e)})).catch((function(e){console.log(e),t(e)}))}))},getSources:function(){return new Promise((function(e,t){var a={refresh:!0,params:{filter:{allTranslations:!0,configNameByModule:"config.notificationSource"}}};s.c.index("apiRoutes.qsite.configs",a).then((function(t){for(var a=[],s=0,o=Object.entries(t.data);s<o.length;s++){var l=o[s],A=l[0],r=l[1];null!=r&&(a=i(i({},a),t.data[A]))}e(a)})).catch((function(t){console.log(t),e(t)}))}))},markAllAsRead:function(){return new Promise((function(e,t){s.c.put("apiRoutes.qnotification.markAllAsRead",{}).then((function(t){e(t)})).catch((function(t){console.log(t),e(t)}))}))},markAsRead:function(e){return new Promise((function(t,a){s.c.update("apiRoutes.qnotification.markRead",e,{}).then((function(e){t(!0)})).catch((function(e){console.log(e),t(e)}))}))}}},78176:(e,t,a)=>{"use strict";a.d(t,{c:()=>g});var s=a(92444),i=a(74044);const o={class:"box"};function l(e,t,a,l,A,r){const n=(0,s.E1)("q-item-label"),c=(0,s.E1)("file-list"),d=(0,s.E1)("q-item-section"),m=(0,s.E1)("q-item"),u=(0,s.E1)("q-list"),p=(0,s.E1)("master-modal");return(0,s.Wz)(),(0,s.Az)(p,{modelValue:A.modal.show,"onUpdate:modelValue":t[0]||(t[0]=e=>A.modal.show=e),loading:A.modal.loading,title:A.modal.title,"custom-position":""},{default:(0,s.Ql)((()=>[(0,s.QD)("div",o,[(0,s.K2)(u,{separator:"",dense:""},{default:(0,s.Ql)((()=>[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(A.modal.data,((e,t)=>((0,s.Wz)(),(0,s.Az)(m,{key:t,style:{padding:"8px 0"}},{default:(0,s.Ql)((()=>[(0,s.K2)(d,null,{default:(0,s.Ql)((()=>["media"!=e.fieldType?((0,s.Wz)(),(0,s.Az)(n,{key:0},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(e.label),1)])),_:2},1024)):(0,s.g1)("",!0),"media"==e.fieldType?((0,s.Wz)(),(0,s.Az)(n,{key:1},{default:(0,s.Ql)((()=>[(0,s.K2)(c,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,"grid-col-class":"col-12","hide-header":""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):((0,s.Wz)(),(0,s.Az)(n,{key:2,caption:"",innerHTML:e.value},null,8,["innerHTML"]))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])),_:1},8,["modelValue","loading","title"])}a(23816);var A=a(98724);const r={components:{fileList:A.c},data(){return{modal:{loading:!1,show:!1,title:null,data:[]}}},computed:{},methods:{async showBidData(e){this.modal={title:`${this.$tr("iauctions.cms.bid")} Id: ${e.id}`,show:!0,data:[{label:this.$tr("iauctions.cms.auction"),value:e.auction.title},{label:this.$tr("isite.cms.label.provider"),value:e.provider?`${e.provider.firstName} ${e.provider.lastName}`:"-"},{label:this.$tr("isite.cms.form.status"),value:e.statusName},{label:this.$tr("isite.cms.label.amount"),value:this.$trn(e.amount)},{label:this.$tr("isite.cms.label.winner"),value:parseInt(e.winner)?this.$tr("isite.cms.label.yes"):this.$tr("isite.cms.label.no")},{label:this.$tr("iauctions.cms.description"),value:e.description},{label:this.$tr("isite.cms.form.createdAt"),value:this.$trd(e.createdAt,{type:"long"})},{label:this.$tr("isite.cms.form.updatedAt"),value:this.$trd(e.updatedAt,{type:"long"})}]};let t=!!(e.auction&&e.auction.category&&e.auction.category.bidFormId)&&e.auction.category.bidFormId;if(t){this.modal.loading=!0;let a={};e.fields.forEach((e=>a[e.name]=e.value));let s=this.$clone(e.files||[]),i={refresh:!0,params:{include:"fields"}};this.$crud.show("apiRoutes.qform.forms",t,i).then((e=>{this.$clone(e.data.fields).forEach((e=>{let t=e.dynamicField?.type||"input",i=a[this.$helper.convertStringToSnakeCase(e.name)],o="media"!=t?null:s.find((t=>t.zone==(e.dynamicField.props.zone||"mainimage")));this.modal.data.push({...e,label:e.label.replace("*",""),value:"media"!=t?null==i?"-":i:o?[{id:this.$uid(),...o,filename:e.label}]:[],fieldType:t})})),this.modal.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.modal.loading=!1}))}))}}}};var n=a(68716),c=a(99588),d=a(84884),m=a(11032),u=a(2992),p=a(95252),h=a.n(p);const f=(0,n.c)(r,[["render",l]]),g=f;h()(r,"components",{QList:c.c,QItem:d.c,QItemSection:m.c,QItemLabel:u.c})},51008:(e,t,a)=>{"use strict";a.d(t,{c:()=>V});var s=a(92444),i=a(74044);const o={key:0,class:"row relative-position"},l={class:"col-12 q-mb-md"},A={key:0,class:"col-7 q-gutter-y-md"},r={key:1,class:"col-5 q-gutter-y-md"},n={class:"input-title"},c={class:"col-12 text-right"};function d(e,t,a,d,m,u){const p=(0,s.E1)("locales"),h=(0,s.E1)("q-input"),f=(0,s.E1)("q-editor"),g=(0,s.E1)("q-select"),v=(0,s.E1)("mediaForm"),b=(0,s.E1)("q-btn"),y=(0,s.E1)("q-form"),$=(0,s.E1)("inner-loading");return m.success?((0,s.Wz)(),(0,s.An)("div",o,[(0,s.QD)("div",l,[(0,s.K2)(p,{modelValue:m.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>m.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),(0,s.K2)(y,{onSubmit:t[12]||(t[12]=e=>m.itemId?u.updateItem():u.createItem()),ref:"formContent",class:"row q-col-gutter-x-md full-width",autocomplete:"off",onValidationError:t[13]||(t[13]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,s.Ql)((()=>[m.locale.success?((0,s.Wz)(),(0,s.An)("div",A,[(0,s.K2)(h,{label:`${e.$tr("isite.cms.form.title")} (${m.locale.language}) `,type:"text",modelValue:m.locale.formTemplate.title,"onUpdate:modelValue":t[1]||(t[1]=e=>m.locale.formTemplate.title=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,s.K2)(h,{label:`${e.$tr("isite.cms.form.caption")} (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.caption,"onUpdate:modelValue":t[2]||(t[2]=e=>m.locale.formTemplate.caption=e)},null,8,["label","modelValue"]),(0,s.K2)(h,{label:"URI ("+m.locale.language+")",outlined:"",dense:"",type:"text",modelValue:m.locale.formTemplate.uri,"onUpdate:modelValue":t[3]||(t[3]=e=>m.locale.formTemplate.uri=e)},null,8,["label","modelValue"]),(0,s.K2)(h,{label:"URL ("+m.locale.language+")",type:"text",modelValue:m.locale.formTemplate.url,"onUpdate:modelValue":t[4]||(t[4]=e=>m.locale.formTemplate.url=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,s.K2)(h,{label:`${e.$tr("isite.cms.form.image")} URL (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.externalImageUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>m.locale.formTemplate.externalImageUrl=e)},null,8,["label","modelValue"]),(0,s.K2)(f,{label:`${e.$tr("isite.cms.form.description")} (${m.locale.language}) `,modelValue:m.locale.formTemplate.customHtml,"onUpdate:modelValue":t[6]||(t[6]=e=>m.locale.formTemplate.customHtml=e),style:{width:"100%"}},null,8,["label","modelValue"])])):(0,s.g1)("",!0),m.locale.success?((0,s.Wz)(),(0,s.An)("div",r,[u.canManageRecordMaster?((0,s.Wz)(),(0,s.Az)(g,{key:0,modelValue:m.locale.formTemplate.options.masterRecord,"onUpdate:modelValue":t[7]||(t[7]=e=>m.locale.formTemplate.options.masterRecord=e),label:e.$tr("isite.cms.form.masterRecord"),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:this.$tr("isite.cms.label.yes"),value:1},{label:this.$tr("isite.cms.label.no"),value:0}]},null,8,["modelValue","label","options"])):(0,s.g1)("",!0),(0,s.K2)(g,{label:`${e.$tr("isite.cms.form.status")} (${m.locale.language})`,modelValue:m.locale.formTemplate.active,"onUpdate:modelValue":t[8]||(t[8]=e=>m.locale.formTemplate.active=e),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:e.$tr("isite.cms.label.enabled"),value:!0},{label:e.$tr("isite.cms.label.disabled"),value:!1}]},null,8,["label","modelValue","options"]),(0,s.K2)(g,{label:`${e.$tr("isite.cms.form.option")}`,modelValue:m.locale.formTemplate.target,"onUpdate:modelValue":t[9]||(t[9]=e=>m.locale.formTemplate.target=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"_self",label:"Same tab"},{value:"_blank",label:"New tab"}]},null,8,["label","modelValue"]),(0,s.K2)(g,{label:`${e.$tr("isite.cms.form.type")}`,modelValue:m.locale.formTemplate.type,"onUpdate:modelValue":t[10]||(t[10]=e=>m.locale.formTemplate.type=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"auto",label:"Auto"},{value:"360",label:"360"},{value:"video",label:"Video"},{value:"image",label:"Image"}]},null,8,["label","modelValue"]),(0,s.QD)("div",n,(0,i.WA)(`${e.$tr("isite.cms.form.image")}`),1),((0,s.Wz)(),(0,s.Az)(v,{entity:"Modules\\Slider\\Entities\\Slide","entity-id":m.itemId?m.itemId:"",modelValue:m.locale.formTemplate.mediasSingle,"onUpdate:modelValue":t[11]||(t[11]=e=>m.locale.formTemplate.mediasSingle=e),zone:"slideimage",key:m.mediaKey},null,8,["entity-id","modelValue"]))])):(0,s.g1)("",!0),(0,s.QD)("div",c,[m.itemId?((0,s.Wz)(),(0,s.Az)(b,{key:0,color:"green",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit",rounded:""},null,8,["loading","label"])):((0,s.Wz)(),(0,s.Az)(b,{key:1,color:"green",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit",rounded:""},null,8,["loading","label"]))])])),_:1},512),(0,s.K2)($,{visible:m.loading},null,8,["visible"])])):(0,s.g1)("",!0)}a(23816);var m=a(15432);const u={components:{mediaForm:m.c},watch:{$route(e,t){this.initForm()}},mounted(){this.$nextTick((()=>{this.initForm()}))},data(){return{locale:{},loading:!1,success:!1,itemId:!1,mediaKey:this.$uid()}},computed:{dataLocale(){return{fields:{positionId:this.$route.params.positionId,target:null,type:"auto",mediasSingle:{},externalImageUrl:"",options:{masterRecord:0}},fieldsTranslatable:{title:"",caption:"",active:!0,url:"",uri:"",customHtml:""}}},canManageRecordMaster(){let e=!0;return this.$route.params.positionId.id&&!this.$hasAccess("isite.master.records.edit")&&(e=!1),this.$route.params.positionId.id||this.$hasAccess("isite.master.records.create")||(e=!1),e}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const a=this.$clone(this.itemId);if(a){let s="apiRoutes.qbanner.banners",i={refresh:!0,params:{filter:{allTranslations:!0}}};this.$crud.show(s,a,i).then((t=>{this.orderDataItemToLocale(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qbanner.banners";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")} ID: ${e.data.id}`}),this.$router.push({name:"qbanner.admin.sliders.show",params:{id:this.$route.params.positionId}}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoCreated"),pos:"bottom"})}))}},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qbanner.banners";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let a=e[t];null!=a&&void 0!=a||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var p=a(68716),h=a(14288),f=a(20540),g=a(85664),v=a(36008),b=a(99140),y=a(95252),$=a.n(y);const q=(0,p.c)(u,[["render",d]]),V=q;$()(u,"components",{QForm:h.c,QInput:f.c,QEditor:g.c,QSelect:v.c,QBtn:b.c})},19058:(e,t,a)=>{"use strict";a.d(t,{c:()=>P});var s=a(92444),i=a(74044);const o={id:"advanceChatComponent"},l={id:"advanceChatComponentContent",class:"relative-position"},A={class:"row"},r={style:{width:"300px"}},n={class:"row q-pa-sm justify-between"},c=(0,s.QD)("label",{class:"text-h5 cursor-pointer"},"+",-1),d={key:0,class:"row justify-center q-my-md"},m=["src"],u={class:"row justify-center q-my-md"},p={class:"col"},h=["room-id","rooms","messages","height","current-user-id","load-first-room","username-options","menu-actions","messages-loaded","message-actions","show-add-room","show-reaction-emojis","scroll-distance","single-room","accepted-files"];function f(e,t,a,f,g,v){const b=(0,s.E1)("dynamic-field"),y=(0,s.E1)("q-btn"),$=(0,s.E1)("q-spinner-dots"),q=(0,s.E1)("q-avatar"),V=(0,s.E1)("q-item-section"),I=(0,s.E1)("q-item-label"),w=(0,s.E1)("q-icon"),z=(0,s.E1)("q-badge"),T=(0,s.E1)("q-item"),Q=(0,s.E1)("q-infinite-scroll"),R=(0,s.E1)("dynamic-form"),x=(0,s.E1)("master-modal");return(0,s.Wz)(),(0,s.An)("div",o,[(0,s.QD)("div",l,[(0,s.QD)("div",A,[(0,s.QD)("div",r,[(0,s.QD)("div",n,[(0,s.K2)(b,{modelValue:g.roomsPagination.search,"onUpdate:modelValue":[t[0]||(t[0]=e=>g.roomsPagination.search=e),v.handleSearch],field:v.dynamicfields.search},null,8,["modelValue","field","onUpdate:modelValue"]),(0,s.K2)(y,{color:"primary",round:"",unelevated:"",onClick:t[1]||(t[1]=e=>g.modalNewRoom.show=!0)},{default:(0,s.Ql)((()=>[c])),_:1})]),(0,s.QD)("div",{ref:"listRoomsContent",style:(0,i.MN)(`max-height: calc(${a.height} - 58px); overflow-y: scroll`)},[!v.rooms.length&&g.loading.rooms?((0,s.Wz)(),(0,s.An)("div",d,[(0,s.K2)($,{color:"primary",size:"40px"})])):(0,s.g1)("",!0),(0,s.K2)(Q,{onLoad:t[2]||(t[2]=(e,t)=>v.getRooms({index:e,done:t})),offset:50,"scroll-target":e.$refs.listRoomsContent,ref:"infiniteScroll",debounce:"300"},{loading:(0,s.Ql)((()=>[(0,s.QD)("div",u,[(0,s.K2)($,{color:"primary",size:"40px"})])])),default:(0,s.Ql)((()=>[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(v.rooms,((e,t)=>((0,s.Wz)(),(0,s.Az)(T,{key:t,class:"q-pl-sm",clickable:"",onClick:t=>g.openRoomId=e.roomId,focused:g.openRoomId==e.roomId},{default:(0,s.Ql)((()=>[(0,s.K2)(V,{top:"",avatar:"",class:"q-pr-sm",style:{"min-width":"48px","max-width":"48px"}},{default:(0,s.Ql)((()=>[(0,s.K2)(q,null,{default:(0,s.Ql)((()=>[(0,s.QD)("img",{src:e.avatar},null,8,m)])),_:2},1024)])),_:2},1024),(0,s.K2)(V,null,{default:(0,s.Ql)((()=>[(0,s.K2)(I,{class:"text-body2 text-blue-grey text-weight-bold",lines:"1"},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(e.roomName),1)])),_:2},1024),e.phone?((0,s.Wz)(),(0,s.Az)(I,{key:0,caption:"",class:"text-blue-grey"},{default:(0,s.Ql)((()=>[(0,s.K2)(w,{name:"fa-light fa-phone",class:"q-mr-xs"}),(0,s.mY)(" "+(0,i.WA)(e.phone),1)])),_:2},1024)):(0,s.g1)("",!0),(0,s.K2)(I,{caption:"",lines:"1"},{default:(0,s.Ql)((()=>[(0,s.K2)(w,{name:"fa-light fa-message",class:"q-mr-xs"}),(0,s.mY)(" "+(0,i.WA)(e.lastMessage.content),1)])),_:2},1024)])),_:2},1024),(0,s.K2)(V,{side:"",top:""},{default:(0,s.Ql)((()=>[(0,s.K2)(I,{caption:""},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(e.lastMessage.timestamp),1)])),_:2},1024),e.unreadCount?((0,s.Wz)(),(0,s.Az)(z,{key:0,color:"primary",class:"q-mt-sm","text-color":"white",label:e.unreadCount},null,8,["label"])):(0,s.g1)("",!0)])),_:2},1024)])),_:2},1032,["onClick","focused"])))),128))])),_:1},8,["scroll-target"])],4)]),(0,s.QD)("div",p,[(0,s.QD)("vue-advanced-chat",{"room-id":g.openRoomId,rooms:v.rooms,messages:v.messages,height:v.chatProps["height"],"current-user-id":v.chatProps["current-user-id"],"rooms-loaded":!0,"load-first-room":v.chatProps["load-first-room"],"username-options":v.chatProps["username-options"],"menu-actions":v.chatProps["menu-actions"],"messages-loaded":v.chatProps["messages-loaded"],"message-actions":v.chatProps["message-actions"],"show-add-room":v.chatProps["show-add-room"],"show-reaction-emojis":v.chatProps["show-reaction-emojis"],"scroll-distance":v.chatProps["scroll-distance"],"single-room":v.chatProps["single-room"],"accepted-files":v.chatProps["accepted-files"],onSendMessage:t[3]||(t[3]=e=>v.sendMessage(e.detail[0])),onAddRoom:t[4]||(t[4]=e=>g.modalNewRoom.show=!0),onMenuActionHandler:t[5]||(t[5]=(...e)=>v.menuActionHandler&&v.menuActionHandler(...e)),onOpenFile:t[6]||(t[6]=({message:t})=>e.$helper.openExternalURL(t.files[0].url,!0)),onFetchMessages:t[7]||(t[7]=e=>v.getMessages(e.detail[0])),onFetchMoreRooms:t[8]||(t[8]=e=>v.getRooms(e.detail[0])),onOpenFailedMessage:t[9]||(t[9]=(...e)=>v.showError&&v.showError(...e))},null,40,h)])]),(0,s.K2)(x,{modelValue:g.modalNewRoom.show,"onUpdate:modelValue":t[12]||(t[12]=e=>g.modalNewRoom.show=e),loading:g.modalNewRoom.loading,title:`${e.$tr("isite.cms.label.new")} ${e.$tr("isite.cms.label.chat")}`},{default:(0,s.Ql)((()=>[(0,s.QD)("div",null,[(0,s.K2)(b,{modelValue:g.newRoom.type,"onUpdate:modelValue":t[10]||(t[10]=e=>g.newRoom.type=e),field:v.fieldsToNewRooms.type},null,8,["modelValue","field"]),v.fieldsToNewRooms.blocks[g.newRoom.type]?((0,s.Wz)(),(0,s.Az)(R,{key:0,modelValue:g.newRoom.form,"onUpdate:modelValue":t[11]||(t[11]=e=>g.newRoom.form=e),blocks:v.fieldsToNewRooms.blocks[g.newRoom.type],"default-col-class":"col-12",onSubmit:v.createRoom},null,8,["modelValue","blocks","onSubmit"])):(0,s.g1)("",!0)])])),_:1},8,["modelValue","loading","title"])])])}a(23816);var g=a(21128),v=a(8932);const b={beforeUnmount(){v.kN.off("inotification.chat.message")},props:{accept:{default:".pdf, .xlsx, .docx, .pptx, .mp4, .mp3, .jpg, image/*"},roomId:{default:!1},roomsId:{default:!1},allowCreateChat:{default:!1},allowProviders:{type:Boolean,defualt:!1},height:{default:"600px"},advancedProps:{default:!1},loadRooms:{default:!0}},emits:["room-opened"],watch:{roomId(){this.getRooms()},roomsId(){this.getRooms()},openRoomId(e){this.$emit("room-opened",e)}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{conversations:[],conversationMessages:[],openRoomId:null,chatPagination:{page:0,perPage:50,lastPage:-1},loading:{rooms:!1,messages:!1},search:{userId:null,userList:[]},modalNewRoom:{show:!1,loading:!1},newRoom:{type:"user",form:{userId:null,providerType:null,providerId:null,firstName:null,lastName:null}},providers:{whatsapp:{image:`${this.$store.state.qsiteApp.baseUrl}/modules/isite/img/logos/whatsapp.jpg`}},roomsPagination:{search:null,page:0,perPage:20,total:0}}},computed:{acceptFiles(){if("images"==this.accept)return".jpg, image/*";if("documents"==this.accept)return".pdf, .xlsx, .docx, .pptx";if("media"==this.accept)return".mp4, .mp3, .jpg, image/*";let e=this.$store.state.qsiteApp.configs.Media;return this.$clone(e?e["allowed-types"]:this.accept)},chatProps(){let e={"current-user-id":this.$store.state.quserAuth.userId,"loading-rooms":this.loading.rooms,"rooms-loaded":!0,"show-reaction-emojis":!1,"messages-loaded":this.chatPagination.page==this.chatPagination.lastPage,"load-first-room":!1,"single-room":!0,"show-add-room":this.allowCreateChat,"message-actions":JSON.stringify([{name:"replyMessage",title:"Reply"}]),"accepted-files":this.acceptFiles,height:this.height,"menu-actions":[],"username-options":JSON.stringify({minUsers:1,currentUser:!1}),"scroll-distance":10,...this.advancedProps||{}};return e},rooms(){let e=[],t=this.$clone(this.conversations);return t.sort(((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt))),t.forEach((t=>{var a=t?.userConversation?.mainImage;Object.keys(this.providers).includes(t.entityType)&&a.includes("default.")&&(a=this.providers[t.providerType].image);let s={roomId:t.id.toString(),roomName:this.conversationExternalData(t).title,avatar:a,unreadCount:t.unreadMessagesCount||!1,messageActions:!1,phone:"whatsapp"==t.entityType?t.entityId:null,lastMessage:!!t.lastMessage&&{content:t.lastMessage.body||"",senderId:t.lastMessage.userId,timestamp:this.$date.getHumanCalendar(t.updatedAt)},users:t.users.map((e=>({_id:e.id,username:e.fullName,avatar:e?.mainImage,status:{lastChanged:!!Object.keys(this.providers).includes(t.entityType)&&`(${t.entityType})`}})))};e.push(s)})),this.$clone(e)},messages(){let e=[],t=this.$clone(this.conversationMessages).reverse(),a=t.length?this.conversations.find((e=>e.id==t[0].conversationId)):null,s=a?this.conversationExternalData(a).externalUsers.map((e=>e.id)):[],i=s.includes(this.$store.state.quserAuth.userId)?"external":"internal";return t.forEach((t=>{if(!e.find((e=>e._id==t.id))){let o=s.includes(t.user.id)?"external":"internal",l=!!a&&o==i;if(t.replyTo&&(t.replyMessage={_id:t.replyTo.id,content:t.replyTo.body||"",sender_id:t.replyTo.userId,file:!!t.replyTo.attachment&&{name:t.replyTo.attachment.filename,size:t.replyTo.attachment.filesize,type:t.replyTo.attachment.mimetype,extension:`.${t.replyTo.attachment.extension}`,url:t.replyTo.attachment.path,audio:"mp3"==t.replyTo.attachment.extension}}),t.attachment&&(t.file={id:t.attached,name:t.attachment.filename,size:t.attachment.filesize,type:t.attachment.mimetype,extension:`.${t.attachment.extension}`,url:t.attachment.path,audio:"mp3"==t.attachment.extension}),t.status>=5){let a={_id:t.id+"_",content:t.statusName||"",date:this.$trd(t.createdAt),senderId:l?this.$store.state.quserAuth.userId:t.user.id,system:!0,frontId:t.frontId||!1};e.push(a)}let A="";t.status&&(A=t.status<5?t.statusName:"No enviado");let r={_id:t.id,content:t.body||"",senderId:l?this.$store.state.quserAuth.userId:t.user.id,username:t.user.fullName,avatar:t.user?.mainImage,date:this.$trd(t.createdAt),failure:t.status>=5,timestamp:`${A} ${this.$trd(t.createdAt,{type:"time"})}`,files:t.file?Array.isArray(t.file)?t.file:[t.file]:[],replyMessage:t.replyMessage||!1,seen:3===t.status,errorMessage:t.status>=5?t.statusName:"",frontId:t.frontId||!1};e.push(r)}})),this.$clone(e)},fieldsToNewRooms(){return{type:{value:"user",type:"select",props:{label:this.$tr("isite.cms.form.type"),vIf:this.allowProviders,options:[{label:this.$tr("isite.cms.label.user"),value:"user"},{label:this.$tr("isite.cms.label.provider"),value:"provider"}]}},blocks:{user:[{fields:{userId:{value:null,type:"select",required:!0,props:{label:this.$tr("isite.cms.label.user")+"*"},loadOptions:{apiRoute:"apiRoutes.quser.users",select:{label:"fullName",id:"id"},filterByQuery:!0}}}}],provider:[{fields:{providerType:{value:null,type:"select",required:!0,props:{label:this.$tr("isite.cms.label.provider")+"*"},loadOptions:{delayed:()=>new Promise((e=>{this.$crud.index("apiRoutes.qnotification.providers",{refresh:!0}).then((t=>{e(t.data.filter((e=>{if(e.data&&parseInt(e.data.status||"0")&&parseInt(e.data.fields?.canCreateConversation||"0"))return e})).map((e=>({label:e.name,value:e.systemName}))))})).catch((t=>{this.$apiResponse.handleError(t,(()=>{e([])}))}))}))}},providerId:{value:null,type:"input",required:!0,props:{label:this.$tr("isite.cms.label.contact")+"*"}},firstName:{value:null,type:"input",props:{label:this.$tr("isite.cms.form.firstName")}},lastName:{value:null,type:"input",props:{label:this.$tr("isite.cms.form.lastName")}}}}]}}},dynamicfields(){return{search:{type:"search",props:{icon:null,clearable:!1}}}}},methods:{init(){(0,g.s)(),this.listenEvents(),this.getRooms()},listenEvents(){v.kN.on("inotification.chat.message",(e=>{e.data&&this.pushMessage(e.data)}))},getRooms(e={}){return new Promise(((t,a)=>{if(this.loadRooms){e={index:1,done:null,search:null,roomId:this.roomsId,...e},this.loading.rooms=!0,this.rooms.map((e=>e.roomId)).includes(this.openRoomId)||(this.openRoomId=null);let a={refresh:!0,params:{include:"users,lastMessage,conversationUsers",filter:{ids:this.$clone(this.roomsId)}}};e.roomId?this.$crud.show("apiRoutes.qchat.conversations",e.roomId,a).then((e=>{this.orderConversationData([e.data]),this.openRoomId=this.conversations[0].id,this.loading.rooms=!1,t(e.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading.rooms=!1,t(e)}))})):1==e.index||this.conversations.length<this.roomsPagination.total?(a.params={...a.params,page:e.search?1:e.index,take:this.roomsPagination.perPage,filter:{...a.params.filter,search:this.roomsPagination.search}},this.$crud.index("apiRoutes.qchat.conversations",a).then((a=>{this.orderConversationData(a.data,1!=a.meta.page.currentPage),this.roomsPagination.total=a.meta.page.total,this.roomsPagination.page=a.meta.page.currentPage,this.loading.rooms=!1,this.openRoomFromUrl(),t(a.data),e.done&&e.done()})).catch((a=>{this.$apiResponse.handleError(a,(()=>{this.loading.rooms=!1,t(a),e.done&&e.done()}))}))):this.$refs.infiniteScroll.stop()}}))},orderConversationData(e,t=!0){e.forEach((e=>{e.userConversation={...e.conversationUsers.find((e=>e.userId!=this.$store.state.quserAuth.userId)),...e.users.find((e=>e.id!=this.$store.state.quserAuth.userId))},e.authUserConversation={...e.conversationUsers.find((e=>e.userId==this.$store.state.quserAuth.userId)),...e.users.find((e=>e.id==this.$store.state.quserAuth.userId))},e.unreadMessagesCount=parseInt(e.authUserConversation.unreadMessagesCount)})),t&&(e=this.$array.mergeUniqueBy([...this.conversations,...e],"id")),this.conversations=e},getMessages({options:e}){return new Promise(((t,a)=>{this.loading.messages=!0,e&&e.reset&&(this.conversationMessages=[],this.chatPagination.page=0,this.chatPagination.lastPage=-1);let s=this.openRoomId,i=this.conversations.findIndex((e=>e.id==s));this.conversations[i].unreadMessagesCount=!1;let o={refresh:!0,params:{page:this.chatPagination.page+1,take:this.chatPagination.perPage,filter:{conversationId:s},include:"user,replyTo"}};this.$crud.index("apiRoutes.qchat.messages",o).then((a=>{e&&e.reset&&(this.conversationMessages=[]),this.conversationMessages=this.$clone([...this.conversationMessages,...a.data]),this.chatPagination.lastPage=a.meta.page.lastPage,this.chatPagination.page=a.meta.page.currentPage,this.loading.messages=!1,t(a.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading.messages=!1,t(e)}))}))}))},sendMessage({content:e,roomId:t,files:a,replyMessage:s}){return new Promise((async(i,o)=>{if(a)a.forEach(((s,i)=>{let o={body:i==a.length-1?e:"",frontId:this.$uid(),file:{name:s.name,size:s.size,type:s.extension||s.type,extension:`.${s.extension||s.type}`,url:s.url||s.localUrl,audio:!!s.audio,duration:s.duration||0}};this.pushMessage(o),this.uploadMessage({...o,roomId:t,file:{...o.file,blob:s.blob}})}));else{let a={body:e,frontId:this.$uid(),...s?{replyMessage:s}:{}};this.pushMessage(a),this.uploadMessage({...a,roomId:t})}}))},uploadMessage(e){return new Promise((async(t,a)=>{let s={frontId:e.frontId,conversationId:e.roomId,body:e.body||"",userId:this.$store.state.quserAuth.userId,replyToId:e.replyMessage?e.replyMessage._id:null};if(e.attached&&(s.mediasSingle={attachment:e.attached},s.attached=e.attached),e.file){let{file:t}=e,a=await this.$helper.getBase64(t.blob),i=await this.$helper.urlToFile(a,t.audio?t.name:`${t.name}.${t.extension}`,t.type),o=new FormData;o.append("parent_id",0),o.append("file",i),o.append("disk","privatemedia");let l=await this.$crud.post("apiRoutes.qmedia.files",o);l&&l.data&&(s.mediasSingle={attachment:l.data.id},s.attached=l.data.id)}this.$crud.create("apiRoutes.qchat.messages",s).then((e=>{let a=this.conversationMessages.findIndex((t=>t.frontId==e.data.frontId));-1!=a&&(this.conversationMessages[a].id=e.data.id,this.conversationMessages[a].attachment=e.data.attachment||!1),t(e)})).catch((e=>a(e)))}))},pushMessage(e){let t=e.conversation?e.conversation.id:this.openRoomId,a=!!t&&this.conversations.findIndex((e=>e.id==t)),s=a>=0&&this.conversations[a],i={id:this.$uid(),user:e.userId&&s?s.users.find((t=>t.id==e.userId)):this.$store.state.quserAuth.userData,createdAt:this.$moment().format("YYYY-MM-DD HH:mm:ss"),updatedAt:this.$moment().format("YYYY-MM-DD HH:mm:ss"),...e};!s&&e.conversation&&this.orderConversationData([...this.conversations,{...e.conversation,lastMessage:i}]),s&&(this.conversations[a].updatedAt=this.$moment().format("YYYY-MM-DD HH:mm:ss"),this.conversations[a].lastMessage=i,e.conversation&&e.conversation.id!=this.openRoomId&&(this.conversations[a].unreadMessagesCount+=1)),e.conversation&&e.conversation.id!=this.openRoomId||this.conversationMessages.unshift(i),this.playSound(e)},playSound(e){e.conversation&&e.conversation.id!=this.openRoomId?this.$helper.playSound({url:`${this.$store.state.qsiteApp.baseUrl}/modules/ichat/audio/sound_chat_notification.mp3`}):e.userId&&e.userId!=this.$store.state.quserAuth.userId&&this.$helper.playSound({url:`${this.$store.state.qsiteApp.baseUrl}/modules/ichat/audio/sound_message_notification.mp3`,volume:.2})},createRoom(){return new Promise(((e,t)=>{let a=null,s=null;if("user"==this.newRoom.type&&this.newRoom.form.userId){const i=this.newRoom.form.userId;if(i==this.chatProps["current-user-id"])return this.modalNewRoom.loading=!1,this.$alert.error(this.$tr("isite.cms.message.errorRequest")),t(!1);let o=this.conversations.find((e=>!!e.users.find((e=>e.id==i))&&e));if(o)return this.modalNewRoom={show:!1,loading:!1},this.openRoomId=o.id,e(o);a="apiRoutes.qchat.conversations",s={users:[i,this.chatProps["current-user-id"]]}}else a="apiRoutes.qchat.providerConversations",s={provider:this.newRoom.form.providerType,conversationId:this.newRoom.form.providerId,firstName:this.newRoom.form.firstName,lastName:this.newRoom.form.lastName};a&&s&&(this.modalNewRoom.loading=!0,this.$crud.create(a,s).then((async t=>{await this.getRooms(!0),this.openRoomId=t.data.id||t.data.conversation?.id,this.newRoom.form={userId:null,providerType:null,providerId:null,firstName:null,lastName:null},this.modalNewRoom={show:!1,loading:!1},e(t.data)})).catch((e=>{this.modalNewRoom={show:!1,loading:!1},t(e)})))}))},menuActionHandler({roomId:e,action:t}){t.action&&t.action({roomId:e,action:t})},async handleSearch(e){this.$refs.listRoomsContent.scrollTop=0,this.$refs.infiniteScroll.reset(),this.$refs.infiniteScroll.resume(),this.conversations=[],await this.getRooms({search:e}),this.$refs.infiniteScroll.setIndex(1)},conversationExternalData(e){let t=this.$getSetting("ichat::externalRoles")??[],a=this.$getSetting("core::site-name"),s=this.$store.state.quserAuth.userId,i=e.users.filter((e=>{let a=e.roles.map((e=>e.id));return this.$array.hasCommonElement(a,t)||!a.length}));return{title:i.map((e=>e.id)).includes(s)?a:(i.length?i:e.users).map((e=>e.fullName)).join(", "),externalUsers:i}},showError({roomId:e,message:t}){this.$alert.warning({mode:"modal",title:this.$trp("ichat.cms.message.couldNotSend"),message:`<div>${this.$tr("isite.cms.label.error")}: ${t.errorMessage}</div>`,actions:[{label:this.$tr("isite.cms.label.close"),color:"grey-5"},{label:this.$tr("ichat.cms.label.resend"),color:"primary",handler:()=>{const a={...t,roomId:e,body:t.content,attached:t.files[0]?.id};this.conversationMessages=this.conversationMessages.filter((e=>e.id!==t._id)),this.pushMessage(a),this.uploadMessage(a).then((e=>{this.$crud.delete("apiRoutes.qchat.messages",t._id)}))}}]})},openRoomFromUrl(){setTimeout((()=>{let e=this.$route.query.conversationId;if(e){let t=this.conversations.find((t=>t.id==e));t?this.openRoomId=t.id:this.getRooms({roomId:e})}}),200)}}};var y=a(68716),$=a(99140),q=a(54420),V=a(75960),I=a(84884),w=a(11032),z=a(11252),T=a(2992),Q=a(58120),R=a(29104),x=a(95252),D=a.n(x);const k=(0,y.c)(b,[["render",f]]),P=k;D()(b,"components",{QBtn:$.c,QSpinnerDots:q.c,QInfiniteScroll:V.c,QItem:I.c,QItemSection:w.c,QAvatar:z.c,QItemLabel:T.c,QIcon:Q.c,QBadge:R.c})},13488:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var s=a(92444),i=a(74044);const o={class:"row gutter-x-sm relative-position q-mb-lg"},l={key:0,class:"col-12"},A={class:"row"},r={class:"col-12 q-mb-md"},n={key:0,class:"col-12"},c={class:"row q-col-gutter-md"},d={class:"col-12"},m={key:0,class:"row q-col-gutter-xs"},u={class:"col-8 col-md-10"},p={class:"col-4 col-md-2"},h={key:1,class:"relative-position"},f={class:"input-title"},g={class:"col-12 text-right"};function v(e,t,a,v,b,y){const $=(0,s.E1)("locales"),q=(0,s.E1)("q-input"),V=(0,s.E1)("q-select"),I=(0,s.E1)("q-color"),w=(0,s.E1)("q-popup-proxy"),z=(0,s.E1)("q-icon"),T=(0,s.E1)("q-chip"),Q=(0,s.E1)("upload-media"),R=(0,s.E1)("q-btn"),x=(0,s.E1)("q-form"),D=(0,s.E1)("inner-loading");return(0,s.Wz)(),(0,s.An)("div",o,[b.success?((0,s.Wz)(),(0,s.An)("div",l,[(0,s.QD)("div",A,[(0,s.QD)("div",r,[(0,s.K2)($,{modelValue:b.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>b.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),(0,s.K2)(x,{onSubmit:t[6]||(t[6]=e=>b.itemId?y.updateItem():y.createItem()),ref:"formContent",class:"row q-col-gutter-x-sm full-width",autocomplete:"off",onValidationError:t[7]||(t[7]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,s.Ql)((()=>[b.locale.success?((0,s.Wz)(),(0,s.An)("div",n,[(0,s.QD)("div",c,[(0,s.QD)("div",d,[(0,s.K2)(q,{outlined:"",dense:"",modelValue:b.locale.formTemplate.description,"onUpdate:modelValue":t[1]||(t[1]=e=>b.locale.formTemplate.description=e),rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:`${e.$tr("isite.cms.form.description")} (${b.locale.language})*`},null,8,["modelValue","rules","label"]),(0,s.K2)(V,{outlined:"",dense:"",modelValue:b.locale.formTemplate.options.type,"onUpdate:modelValue":t[2]||(t[2]=e=>b.locale.formTemplate.options.type=e),rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:`${e.$tr("isite.cms.form.type")} *`,options:b.typeOptions,"map-options":"","emit-value":""},null,8,["modelValue","rules","label","options"]),3==b.locale.form.options.type?((0,s.Wz)(),(0,s.An)("div",m,[(0,s.QD)("div",u,[(0,s.K2)(q,{outlined:"",dense:"",modelValue:b.locale.formTemplate.options.color,"onUpdate:modelValue":t[4]||(t[4]=e=>b.locale.formTemplate.options.color=e),rules:["anyColor"],label:`${e.$tr("icommerce.cms.form.color")} *`},{append:(0,s.Ql)((()=>[(0,s.K2)(z,{name:"colorize",class:"cursor-pointer"},{default:(0,s.Ql)((()=>[(0,s.K2)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.Ql)((()=>[(0,s.K2)(I,{modelValue:b.locale.formTemplate.options.color,"onUpdate:modelValue":t[3]||(t[3]=e=>b.locale.formTemplate.options.color=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","label"])]),(0,s.QD)("div",p,[(0,s.K2)(T,{class:"full-width no-border-radius q-ma-none",style:(0,i.MN)("height: 40px;background-color: "+b.locale.formTemplate.options.color)},null,8,["style"])])])):(0,s.g1)("",!0),2==b.locale.form.options.type?((0,s.Wz)(),(0,s.An)("div",h,[(0,s.QD)("div",f,(0,i.WA)(e.$tr("isite.cms.form.image")),1),(0,s.K2)(Q,{modelValue:b.locale.formTemplate.mediasSingle,"onUpdate:modelValue":t[5]||(t[5]=e=>b.locale.formTemplate.mediasSingle=e),entity:"Modules\\Icommerce\\Entities\\OptionValue","entity-id":b.itemId||null,zone:"mainimage"},null,8,["modelValue","entity-id"])])):(0,s.g1)("",!0)])])])):(0,s.g1)("",!0),(0,s.QD)("div",g,[(0,s.K2)(R,{color:"green",loading:b.loading,icon:"fas fa-edit",label:b.itemId?e.$tr("isite.cms.label.update"):e.$tr("isite.cms.label.create"),type:"submit",rounded:""},null,8,["loading","label"])])])),_:1},512)])])):(0,s.g1)("",!0),(0,s.K2)(D,{visible:b.loading},null,8,["visible"])])}a(23816);var b=a(15432);const y={emits:["updated"],components:{uploadMedia:b.c},watch:{$route(e,t){this.initForm()},id(){this.initForm()}},mounted(){this.$nextTick((function(){this.initForm()}))},validations(){return this.getObjectValidation()},data(){return{locale:{},loading:!1,success:!1,users:[],itemId:!1,optionValues:[],pages:[],typeOptions:[{label:this.$tr("isite.cms.label.text"),value:1},{label:this.$tr("isite.cms.label.image"),value:2},{label:this.$tr("icommerce.cms.form.color"),value:3}]}},computed:{dataLocale(){return{fields:{optionId:this.optionId||this.$route.params.optionId,sortOrder:1,options:{type:1,color:"#000000"},mediasSingle:{},mediasMulti:{}},fieldsTranslatable:{description:""}}}},props:{optionId:{default:0},id:{default:0}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),0==this.id?this.itemId=this.$route.params.id||0:this.itemId=this.id>-1?this.id:0,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(),this.getoptionValues(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const a=this.$clone(this.itemId);if(a>0){let s="apiRoutes.qcommerce.optionValues",i={refresh:!0,params:{filter:{allTranslations:!0}}};this.$crud.show(s,a,i).then((t=>{this.orderDataItemToLocale(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest")}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qcommerce.optionValues";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")} ID: ${e.data.id}`}),this.$route.params.optionId&&this.$router.push({name:"qcommerce.admin.options.edit",params:{id:this.$route.params.optionId}}),this.$emit("updated")})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoCreated")})}))}},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qcommerce.optionValues";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$emit("updated"),this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated")})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let a=e[t];null!=a&&void 0!=a||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e},getoptionValues(){return new Promise(((e,t)=>{let a="apiRoutes.qcommerce.optionValues",s={refresh:!0,params:{filter:{allTranslations:!0,optionId:this.$route.params.optionId||this.optionId}}};this.$crud.index(a,s).then((t=>{this.optionValues=this.$array.tree(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error("Failed: "+e,"bottom"),t(!0)}))}))}))},arrayUnique(e){return e.filter(((e,t,a)=>a.findIndex((t=>JSON.stringify(t)===JSON.stringify(e)))===t))}}};var $=a(68716),q=a(14288),V=a(20540),I=a(36008),w=a(58120),z=a(7120),T=a(14512),Q=a(84256),R=a(99140),x=a(95252),D=a.n(x);const k=(0,$.c)(y,[["render",v]]),P=k;D()(y,"components",{QForm:q.c,QInput:V.c,QSelect:I.c,QIcon:w.c,QPopupProxy:z.c,QColor:T.c,QChip:Q.c,QBtn:R.c})},74964:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var s=a(92444);const i={id:"pageId",class:"q-layout-page layout-padding location-form"},o={class:"relative-position q-mb-lg backend-page"},l={key:0,class:"box"},A={class:"col-12"},r={class:"row q-col-gutter-md"},n={class:"col-12 col-md-6"},c={class:"col-12 col-md-6"},d={class:"col-12"},m={class:"row q-col-gutter-md"},u={class:"col-12 col-sm-6"},p={class:"col-12 col-sm-6"};function h(e,t,h,f,g,v){const b=(0,s.E1)("locales"),y=(0,s.E1)("q-input"),$=(0,s.E1)("crud"),q=(0,s.E1)("q-btn"),V=(0,s.E1)("q-page-sticky"),I=(0,s.E1)("q-form"),w=(0,s.E1)("inner-loading");return(0,s.Wz)(),(0,s.An)("div",i,[(0,s.QD)("div",o,[g.success?((0,s.Wz)(),(0,s.An)("div",l,[(0,s.QD)("div",A,[(0,s.K2)(b,{modelValue:g.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>g.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),g.locale.success?((0,s.Wz)(),(0,s.Az)(I,{key:0,autocorrect:"off",autocomplete:"off",ref:"formContent",class:"full-width q-my-sm",onSubmit:t[6]||(t[6]=e=>g.itemId?v.updateItem():v.createItem()),onValidationError:t[7]||(t[7]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,s.Ql)((()=>[(0,s.QD)("div",r,[(0,s.QD)("div",n,[(0,s.K2)(y,{outlined:"",dense:"",modelValue:g.locale.formTemplate.name,"onUpdate:modelValue":t[1]||(t[1]=e=>g.locale.formTemplate.name=e),label:`${e.$tr("isite.cms.form.name")} (${g.locale.language})*`,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},null,8,["modelValue","label","rules"])]),(0,s.QD)("div",c,[(0,s.K2)(y,{outlined:"",dense:"",modelValue:g.locale.formTemplate.code,"onUpdate:modelValue":t[2]||(t[2]=e=>g.locale.formTemplate.code=e),label:`${e.$tr("ilocations.cms.form.code")} (${g.locale.language})*`,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},null,8,["modelValue","label","rules"])]),(0,s.QD)("div",d,[(0,s.QD)("div",m,[(0,s.QD)("div",u,[(0,s.K2)($,{ref:"countries","crud-data":a.e(8488).then(a.bind(a,68488)),modelValue:g.locale.formTemplate.countryId,"onUpdate:modelValue":[t[3]||(t[3]=e=>g.locale.formTemplate.countryId=e),t[4]||(t[4]=()=>{g.locale.formTemplate.countryId&&e.$refs.provinces.init()})],type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.country")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"}}},null,8,["crud-data","modelValue","crud-props"])]),(0,s.QD)("div",p,[(0,s.K2)($,{ref:"provinces","crud-data":a.e(5972).then(a.bind(a,95972)),modelValue:g.locale.formTemplate.provinceId,"onUpdate:modelValue":t[5]||(t[5]=e=>g.locale.formTemplate.provinceId=e),type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.province")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"},requestParams:{filter:{country:g.locale.formTemplate.countryId}}}},null,8,["crud-data","modelValue","crud-props","config"])])])])]),(0,s.K2)(V,{position:"bottom-right",offset:[18,18]},{default:(0,s.Ql)((()=>[e.$route.params.id?((0,s.Wz)(),(0,s.Az)(q,{key:0,color:"positive",loading:g.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit"},null,8,["loading","label"])):((0,s.Wz)(),(0,s.Az)(q,{key:1,color:"positive",loading:g.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit"},null,8,["loading","label"]))])),_:1})])),_:1},512)):(0,s.g1)("",!0)])):(0,s.g1)("",!0),(0,s.K2)(w,{visible:g.loading},null,8,["visible"])])])}a(23816);const f={components:{},watch:{$route(e,t){this.initForm(!0)}},mounted(){this.$nextTick((function(){this.initForm()}))},data(){return{locale:{},loading:!1,countryLoading:!1,provinceLoading:!1,success:!1,itemId:!1}},props:{id:{default:null}},computed:{dataLocale(){return{fields:{code:"",countryId:null,provinceId:null},fieldsTranslatable:{name:""}}}},methods:{async initForm(e=!1){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=null!==this.id?this.id:this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(e),this.success=!0,this.loading=!1},getData(e=!1){return new Promise(((t,a)=>{const s=this.$clone(this.itemId);if(s){let i="apiRoutes.qlocations.cities",o={refresh:e,params:{include:"province,country",filter:{allTranslations:!0}}};this.$crud.show(i,s,o).then((e=>{this.orderDataItemToLocale(e.data),this.locale.form.provinceId=parseInt(e.data.provinceId),this.getProvinces(),t(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,a(!1)}))}))}else t(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.cities";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.$router.push({name:"qlocations.admin.cities.index"}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.cities";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let a=e[t];null!=a&&void 0!=a||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var g=a(68716),v=a(41628),b=a(14288),y=a(20540),$=a(60352),q=a(99140),V=a(95252),I=a.n(V);const w=(0,g.c)(f,[["render",h]]),z=w;I()(f,"components",{QLayout:v.c,QForm:b.c,QInput:y.c,QPageSticky:$.c,QBtn:q.c})},79792:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var s=a(92444),i=a(74044);const o={id:"pageId",class:"q-layout-page layout-padding location-form"},l={class:"relative-position q-mb-lg backend-page"},A={key:0,class:"box"},r={class:"col-12"},n={class:"row q-col-gutter-md"},c={class:"col-12 col-md-6"},d={class:"col-12 col-md-6"},m={class:"col-12 col-md-6"},u={class:"col-12 col-md-6"},p={class:"row q-col-gutter-md"},h={class:"col-8 col-md-10"},f={class:"col-4 col-md-2 text-right"};function g(e,t,g,v,b,y){const $=(0,s.E1)("locales"),q=(0,s.E1)("q-input"),V=(0,s.E1)("crud"),I=(0,s.E1)("q-tooltip"),w=(0,s.E1)("q-btn"),z=(0,s.E1)("q-page-sticky"),T=(0,s.E1)("q-form"),Q=(0,s.E1)("inner-loading"),R=(0,s.E1)("q-toolbar-title"),x=(0,s.E1)("q-toolbar"),D=(0,s.E1)("cityForm"),k=(0,s.E1)("q-card-section"),P=(0,s.E1)("q-card"),C=(0,s.E1)("q-dialog"),M=(0,s.iS)("close-popup");return(0,s.Wz)(),(0,s.An)("div",o,[(0,s.QD)("div",l,[b.success?((0,s.Wz)(),(0,s.An)("div",A,[(0,s.QD)("div",r,[(0,s.K2)($,{modelValue:b.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>b.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),b.locale.success?((0,s.Wz)(),(0,s.Az)(T,{key:0,autocorrect:"off",autocomplete:"off",ref:"formContent",class:"full-width q-my-sm",onSubmit:t[8]||(t[8]=e=>b.itemId?y.updateItem():y.createItem()),onValidationError:t[9]||(t[9]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,s.Ql)((()=>[(0,s.QD)("div",n,[(0,s.QD)("div",c,[(0,s.K2)(q,{outlined:"",dense:"",modelValue:b.locale.formTemplate.name,"onUpdate:modelValue":t[1]||(t[1]=e=>b.locale.formTemplate.name=e),label:`${e.$tr("isite.cms.form.name")} (${b.locale.language})*`,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},null,8,["modelValue","label","rules"])]),(0,s.QD)("div",d,[(0,s.K2)(V,{ref:"countries","crud-data":a.e(8488).then(a.bind(a,68488)),modelValue:b.locale.formTemplate.countryId,"onUpdate:modelValue":[t[2]||(t[2]=e=>b.locale.formTemplate.countryId=e),t[3]||(t[3]=()=>{b.locale.formTemplate.countryId&&e.$refs.provinces.init()})],type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.country")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"}}},null,8,["crud-data","modelValue","crud-props"])]),(0,s.QD)("div",m,[(0,s.K2)(V,{ref:"provinces","crud-data":a.e(5972).then(a.bind(a,95972)),modelValue:b.locale.formTemplate.provinceId,"onUpdate:modelValue":[t[4]||(t[4]=e=>b.locale.formTemplate.provinceId=e),t[5]||(t[5]=()=>{b.locale.formTemplate.provinceId&&e.$refs.cities.init()})],type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.province")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},config:{options:{label:"name",value:"id"},requestParams:{filter:{country:b.locale.formTemplate.countryId}}}},null,8,["crud-data","modelValue","crud-props","config"])]),(0,s.QD)("div",u,[(0,s.QD)("div",p,[(0,s.QD)("div",h,[(0,s.K2)(V,{ref:"cities","crud-data":a.e(6576).then(a.bind(a,76576)),modelValue:b.locale.formTemplate.cityId,"onUpdate:modelValue":t[6]||(t[6]=e=>b.locale.formTemplate.cityId=e),type:"select","crud-props":{label:`${e.$tr("ilocations.cms.form.city")} *`,clearable:!0,rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")]},"custom-data":{create:!1},config:{options:{label:"name",value:"id"},requestParams:{filter:{province_id:b.locale.formTemplate.provinceId}}}},null,8,["crud-data","modelValue","crud-props","config"])]),(0,s.QD)("div",f,[(0,s.K2)(w,{size:"sm",class:"btn-small",color:"green",icon:"fas fa-plus",onClick:t[7]||(t[7]=e=>b.showCityCreate=!0)},{default:(0,s.Ql)((()=>[(0,s.K2)(I,{offset:[10,10]},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(e.$tr("ilocations.cms.newCity")),1)])),_:1})])),_:1})])])])]),(0,s.K2)(z,{position:"bottom-right",offset:[18,18]},{default:(0,s.Ql)((()=>[e.$route.params.id?((0,s.Wz)(),(0,s.Az)(w,{key:0,color:"green",loading:b.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit"},null,8,["loading","label"])):((0,s.Wz)(),(0,s.Az)(w,{key:1,color:"green",loading:b.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit"},null,8,["loading","label"]))])),_:1})])),_:1},512)):(0,s.g1)("",!0)])):(0,s.g1)("",!0),(0,s.K2)(Q,{visible:b.loading},null,8,["visible"])]),b.showCityCreate?((0,s.Wz)(),(0,s.Az)(C,{key:0,"content-class":"modal-form-crud",modelValue:b.showCityCreate,"onUpdate:modelValue":t[10]||(t[10]=e=>b.showCityCreate=e),onHide:e.getCities,"no-esc-dismiss":"","no-backdrop-dismiss":""},{default:(0,s.Ql)((()=>[(0,s.K2)(P,{class:"bg-grey-1 backend-page row",style:{"max-width":"80vw!important"}},{default:(0,s.Ql)((()=>[(0,s.K2)(x,{class:"bg-primary text-white"},{default:(0,s.Ql)((()=>[(0,s.K2)(R,null,{default:(0,s.Ql)((()=>[(0,s.QD)("label",null,(0,i.WA)(e.$tr("ilocations.cms.newCity")),1)])),_:1}),(0,s.wt)((0,s.K2)(w,{flat:"",icon:"fas fa-times"},null,512),[[M]])])),_:1}),(0,s.K2)(k,{class:"relative-position col-12"},{default:(0,s.Ql)((()=>[(0,s.K2)(D,{id:!1})])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])):(0,s.g1)("",!0)])}a(23816);var v=a(74964);const b={components:{cityForm:v["default"]},watch:{$route(e,t){this.initForm()}},mounted(){this.$nextTick((function(){this.initForm()}))},data(){return{locale:{},loading:!1,success:!1,itemId:!1,showCityCreate:!1}},props:{id:{default:null}},computed:{dataLocale(){return{fields:{code:"",countryId:null,provinceId:null,cityId:null},fieldsTranslatable:{name:""}}}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=null!==this.id?this.id:this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),this.getCountries(),await this.getData(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const a=this.$clone(this.itemId);if(a){let s="apiRoutes.qlocations.neighborhoods",i={refresh:!0,params:{include:"city",filter:{allTranslations:!0}}};this.$crud.show(s,a,i).then((t=>{this.orderDataItemToLocale(t.data),this.locale.form.countryId=parseInt(t.data.city.countryId),this.locale.form.provinceId=parseInt(t.data.city.provinceId),this.locale.form.cityId=parseInt(t.data.cityId),this.getProvinces(),this.getCities(),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.neighborhoods";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qlocations.neighborhoods";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")}`}),this.$router.push({name:"qlocations.admin.neighborhoods.index"}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let a=e[t];null!=a&&void 0!=a||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var y=a(68716),$=a(41628),q=a(14288),V=a(20540),I=a(99140),w=a(90111),z=a(60352),T=a(30852),Q=a(70608),R=a(6536),x=a(36524),D=a(71008),k=a(81020),P=a(95252),C=a.n(P);const M=(0,y.c)(b,[["render",g]]),U=M;C()(b,"components",{QLayout:$.c,QForm:q.c,QInput:V.c,QBtn:I.c,QTooltip:w.c,QPageSticky:z.c,QDialog:T.c,QCard:Q.c,QToolbar:R.c,QToolbarTitle:x.c,QCardSection:D.c}),C()(b,"directives",{ClosePopup:k.c})},27056:(e,t,a)=>{"use strict";a.d(t,{c:()=>Q});var s=a(92444),i=a(74044),o=a(264),l={class:"tw-text-base tw-leading-4 text-weight-bold"},A=["innerHTML"],r={class:"tw-text-[13px] tw-leading-[13px] text-grey-7"},n={class:"notification-unread"};function c(e,t,a,c,d,m){var u=(0,s.E1)("q-icon"),p=(0,s.E1)("q-item-section"),h=(0,s.E1)("q-item-label"),f=(0,s.E1)("q-tooltip"),g=(0,s.E1)("q-badge"),v=(0,s.E1)("q-btn"),b=(0,s.E1)("q-item");return(0,s.Wz)(),(0,s.Az)(b,{clickable:"",dense:"",class:"q-pt-sm q-my-sm q-px-sm",onClick:t[1]||(t[1]=function(t){return e.openModal()})},{default:(0,s.Ql)((function(){return[(0,s.K2)(p,{avatar:"",top:""},{default:(0,s.Ql)((function(){return[(0,s.QD)("div",{class:"flex flex-center notification-notification-icon-small tw-w-12 tw-h-12 tw-rounded-lg",style:(0,i.MN)({backgroundColor:e.sourceData.backgroundColor})},[(0,s.K2)(u,{name:e.sourceData.icon,style:(0,i.MN)({color:e.sourceData.color,fontSize:"20px"})},null,8,["name","style"])],4)]})),_:1}),(0,s.K2)(p,{top:""},{default:(0,s.Ql)((function(){return[(0,s.K2)(h,{lines:"1",class:"tw-m-0 tw-mb-0.5"},{default:(0,s.Ql)((function(){return[(0,s.QD)("span",l,(0,i.WA)(e.notification.title),1)]})),_:1}),(0,s.K2)(h,{lines:"2",class:"tw-m-0 tw-mb-1"},{default:(0,s.Ql)((function(){return[(0,s.QD)("div",{class:"text-body2 tw-leading-[18px]",innerHTML:e.notification.message},null,8,A)]})),_:1}),(0,s.K2)(h,{caption:"",class:"no-margin"},{default:(0,s.Ql)((function(){return[(0,s.QD)("span",r,[(0,s.mY)((0,i.WA)(e.notification.timeAgo)+" ",1),(0,s.K2)(f,{anchor:"bottom end",self:"center right"},{default:(0,s.Ql)((function(){return[(0,s.mY)((0,i.WA)(e.notification.createdAt),1)]})),_:1})])]})),_:1})]})),_:1}),(0,s.K2)(p,{side:"",top:""},{default:(0,s.Ql)((function(){return[(0,s.QD)("div",n,[e.isUnread?((0,s.Wz)(),(0,s.Az)(g,{key:0,color:e.notification.isImportant?"orange":"blue",rounded:""},null,8,["color"])):(0,s.g1)("",!0),e.isUnread&&e.showMarkAsRead?((0,s.Wz)(),(0,s.Az)(v,{key:1,class:"notification-mark-as-read",rounded:"",dense:"",unelevated:"","no-caps":"",size:"md",onClick:t[0]||(t[0]=(0,o.Y7)((function(t){return e.markAsReadHandler()}),["stop"])),label:e.$tr("notification.cms.markAsRead"),loading:e.loading},null,8,["label","loading"])):(0,s.g1)("",!0)])]})),_:1})]})),_:1})}var d=a(75836),m=a(17072),u=a(62792),p=function(){return p=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var i in t=arguments[a],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)};function h(e,t){var a={},i=(0,d.cB)({loading:!1,notification:e.itemNotification}),o={isUnread:(0,s.S6)((function(){return!i.notification.isRead})),sourceData:(0,s.S6)((function(){var t,a=e.sourceSettings[null===(t=e.itemNotification)||void 0===t?void 0:t.source]||{};return p({backgroundColor:"#D9D9D9",color:"#2196f3",icon:"fa-light fa-bell"},a)}))},l={markAsRead:function(){return i.notification.isRead=!0,t("read"),new Promise((function(e,t){u.c.markAsRead(i.notification.id).then((function(t){e(i.notification)})).catch((function(e){m.c.handleError(e,(function(){i.notification.isRead=!1,i.loading=!1}))}))}))},openModal:function(){t("openModal",i.notification),o.isUnread.value&&l.markAsRead()},markAsReadHandler:function(){i.loading=!0,l.markAsRead().then((function(){i.loading=!1}))}};return(0,s.u2)((function(){})),(0,s.Kg)((function(){return e.itemNotification}),(function(e){i.notification=e})),p(p(p(p({},a),(0,d.kx)(i)),o),l)}const f=(0,s._M)({props:{itemNotification:{default:{}},sourceSettings:{default:[]},showMarkAsRead:{default:!1}},components:{},emits:["read","openModal"],setup:function(e,t){var a=t.emit;return h(e,a)}});var g=a(68716),v=a(84884),b=a(11032),y=a(58120),$=a(2992),q=a(90111),V=a(29104),I=a(99140),w=a(95252),z=a.n(w);const T=(0,g.c)(f,[["render",c]]),Q=T;z()(f,"components",{QItem:v.c,QItemSection:b.c,QIcon:y.c,QItemLabel:$.c,QTooltip:q.c,QBadge:V.c,QBtn:I.c})},83996:(e,t,a)=>{"use strict";a.d(t,{c:()=>Y});var s=a(92444),i=a(74044);const o={id:"componentContent",class:"box relative-position",style:{padding:"0px"}},l={class:"row items-center"},A={class:"col-12"},r={key:0,class:"col-12"},n={class:"row items-center justify-center q-gutter-x-sm q-py-md"},c={id:"calendarContent"},d={key:0,class:"row q-py-md"},m=["onClick"],u={class:"event-icon row justify-center"},p={class:"event-description q-pb-sm q-px-sm"},h={class:"text-caption ellipsis"},f={class:"text-weight-bold"},g={key:1,class:"q-pa-sm row q-col-gutter-y-xs"},v=["onClick"],b={key:1,id:"eventListcontent"},y={class:"row"},$=["onClick"],q={class:"event-icon row justify-center"},V={class:"event-description q-pb-sm q-px-sm"},I={class:"text-caption ellipsis"},w={class:"text-weight-bold"},z={key:1,class:"box"},T={class:"text-left"};function Q(e,t,a,Q,R,x){const D=(0,s.E1)("q-btn-toggle"),k=(0,s.E1)("q-btn"),P=(0,s.E1)("q-date"),C=(0,s.E1)("q-dialog"),M=(0,s.E1)("q-separator"),U=(0,s.E1)("q-avatar"),E=(0,s.E1)("q-icon"),W=(0,s.E1)("q-tooltip"),N=(0,s.E1)("q-calendar"),K=(0,s.E1)("q-item-section"),F=(0,s.E1)("q-item"),S=(0,s.E1)("q-list"),H=(0,s.E1)("master-modal"),B=(0,s.E1)("inner-loading");return(0,s.Wz)(),(0,s.An)("div",{id:"calendarComponent",key:R.componentId},[(0,s.QD)("div",o,[(0,s.QD)("div",l,[(0,s.QD)("div",A,[(0,s.K2)(D,{modelValue:R.calendarType,"onUpdate:modelValue":t[0]||(t[0]=e=>R.calendarType=e),"no-caps":"",unelevated:"","toggle-color":"blue-grey",color:"white","text-color":"blue-grey",options:R.calendarTypeOptions,id:"btnCalendarType",size:"14px",padding:"md sm",spread:""},null,8,["modelValue","options"])]),"all"!=R.calendarType?((0,s.Wz)(),(0,s.An)("div",r,[(0,s.QD)("div",n,["all"!=R.calendarType?((0,s.Wz)(),(0,s.Az)(k,{key:0,onClick:t[1]||(t[1]=t=>e.$refs.calendarComponent.prev()),icon:"fas fa-chevron-left",color:"blue-grey",round:"",unelevated:"",size:"sm",flat:""})):(0,s.g1)("",!0),(0,s.QD)("div",{class:"text-blue-grey text-weight-bold text-subtitle1 cursor-pointer",onClick:t[2]||(t[2]=e=>R.modalQDate=!0)},(0,i.WA)("day"==R.calendarType?e.$trd(R.calendarDate,{type:"small"}):e.$trd(R.calendarDate,{type:"month"}))+", "+(0,i.WA)(e.$trd(R.calendarDate,{type:"year"})),1),(0,s.K2)(C,{modelValue:R.modalQDate,"onUpdate:modelValue":t[5]||(t[5]=e=>R.modalQDate=e)},{default:(0,s.Ql)((()=>[(0,s.K2)(P,{modelValue:R.calendarDate,"onUpdate:modelValue":[t[3]||(t[3]=e=>R.calendarDate=e),t[4]||(t[4]=e=>R.modalQDate=!1)],mask:"YYYY-MM-DD"},null,8,["modelValue"])])),_:1},8,["modelValue"]),"all"!=R.calendarType?((0,s.Wz)(),(0,s.Az)(k,{key:1,onClick:t[6]||(t[6]=t=>e.$refs.calendarComponent.next()),icon:"fas fa-chevron-right",color:"blue-grey",round:"",unelevated:"",size:"sm",flat:""})):(0,s.g1)("",!0)]),(0,s.K2)(M)])):(0,s.g1)("",!0)]),(0,s.QD)("div",c,["all"!=R.calendarType?((0,s.Wz)(),(0,s.Az)(N,(0,s.Gu)({key:0,id:"calendarComponent",modelValue:R.calendarDate,"onUpdate:modelValue":t[7]||(t[7]=e=>R.calendarDate=e)},x.propsCalendar[R.calendarType],{ref:"calendarComponent","no-scroll":""}),{day:(0,s.Ql)((({scope:{timestamp:e}})=>["card"==x.propsCalendar[R.calendarType].type?((0,s.Wz)(),(0,s.An)("div",d,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(x.getEventsList(e),((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,class:(0,i.WN)(x.propsCalendar[R.calendarType].eventClass)},[(0,s.QD)("div",{class:"event-content",onClick:t=>x.openEvent(e)},[(0,s.QD)("div",u,[(0,s.K2)(U,{icon:e.icon,color:e.color},null,8,["icon","color"])]),(0,s.QD)("div",p,[(0,s.QD)("div",h,(0,i.WA)(e.title),1),(0,s.QD)("div",f,(0,i.WA)(e.time),1),((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(e.mainDetails||[],((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,class:"text-caption ellipsis"},[e.icon?((0,s.Wz)(),(0,s.Az)(E,{key:0,name:e.icon},null,8,["name"])):(0,s.g1)("",!0),(0,s.mY)(" "+(0,i.WA)(e.value),1)])))),128))])],8,m)],2)))),128))])):((0,s.Wz)(),(0,s.An)("div",g,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(x.getEventsList(e),((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,class:"col-12"},[(0,s.QD)("div",{class:"event-content q-px-sm q-py-xs relative-position text-caption ellipsis",style:{margin:"0 !important"},onClick:t=>x.openEvent(e)},[(0,s.K2)(U,{icon:e.icon,color:e.color,size:"sm","text-color":"white"},null,8,["icon","color"]),(0,s.mY)(" "+(0,i.WA)(e.time)+" - "+(0,i.WA)(e.title)+" ",1),(0,s.K2)(W,null,{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(e.title),1)])),_:2},1024)],8,v)])))),128))]))])),_:1},16,["modelValue"])):((0,s.Wz)(),(0,s.An)("div",b,[(0,s.QD)("div",y,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(x.getEventsList(),((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,class:(0,i.WN)(x.propsCalendar[R.calendarType].eventClass)},[(0,s.QD)("div",{class:"event-content",onClick:t=>x.openEvent(e)},[(0,s.QD)("div",q,[(0,s.K2)(U,{icon:e.icon,color:e.color},null,8,["icon","color"])]),(0,s.QD)("div",V,[(0,s.QD)("div",I,(0,i.WA)(e.title),1),(0,s.QD)("div",w,(0,i.WA)(e.time),1),((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(e.mainDetails||[],((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,class:"text-caption ellipsis"},[e.icon?((0,s.Wz)(),(0,s.Az)(E,{key:0,name:e.icon},null,8,["name"])):(0,s.g1)("",!0),(0,s.mY)(" "+(0,i.WA)(e.value),1)])))),128))])],8,$)],2)))),128))])]))]),(0,s.K2)(H,{modelValue:R.modal.show,"onUpdate:modelValue":t[8]||(t[8]=e=>R.modal.show=e),"custom-position":"",actions:a.eventActions||[],loading:R.loading,title:e.$tr("isite.cms.label.event")+(R.modal.data.id?" ID: "+R.modal.data.id:"")},{default:(0,s.Ql)((()=>[R.modal.data.card?((0,s.Wz)(),(0,s.Az)((0,s.mk)(R.modal.data.card.component),{key:0,row:R.modal.data.card.row},null,8,["row"])):((0,s.Wz)(),(0,s.An)("div",z,[(0,s.K2)(S,{separator:"",dense:""},{default:(0,s.Ql)((()=>[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(R.modal.data.extraDetails,((e,t)=>((0,s.Wz)(),(0,s.Az)(F,{key:t,class:"q-px-none"},{default:(0,s.Ql)((()=>[(0,s.K2)(K,null,{default:(0,s.Ql)((()=>[(0,s.QD)("div",T,[(0,s.K2)(E,{name:e.icon,color:"grey-7",class:"q-mr-sm",size:"sm"},null,8,["name"]),(0,s.mY)(" "+(0,i.WA)(e.title),1)])])),_:2},1024),(0,s.K2)(K,{side:"",innerHTML:e.value},null,8,["innerHTML"])])),_:2},1024)))),128))])),_:1})]))])),_:1},8,["modelValue","actions","loading","title"]),(0,s.K2)(B,{visible:R.loading},null,8,["visible"])])])}a(23816);var R=a(83636),x=a(8932),D=a(75836);const k={components:{QCalendar:R.mA},props:{eventsData:{default:!1},eventActions:{default:!1}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{componentId:this.$uid(),loading:!1,calendarType:"day",calendarTypeOptions:[{label:this.$tr("isite.cms.label.month"),value:"month",icon:"fas fa-calendar-alt"},{label:this.$tr("isite.cms.label.week"),value:"week",icon:"fas fa-calendar-week"},{label:this.$tr("isite.cms.label.day"),value:"day",icon:"fas fa-calendar-day"},{label:this.$tr("isite.cms.label.all"),value:"all",icon:"fas fa-list-alt"}],calendarDate:this.$moment().format("YYYY-MM-DD"),modalQDate:!1,modal:{show:!1,data:!1}}},computed:{propsCalendar(){return{month:{view:"month",mode:"month",style:"min-width: 1200px;",type:"badge"},week:{view:"week",mode:"agenda",eventClass:"col-12",style:"min-width: 1200px;",type:"card"},day:{view:"day",mode:"agenda",eventClass:"col-6 col-md-4 col-lg-3",type:"card"},all:{view:"all",eventClass:"col-6 col-md-4 col-lg-3",type:"card"}}}},methods:{init(){x.kN.on("page.data.refresh",(()=>this.componentId=this.$uid()))},getEventsList(e=!1){let t=this.$clone(this.eventsData||[]),a=[];return t.forEach((t=>{let s=(0,R.$1)(new Date(t.date)),i=`${s.date} ${s.time}`;e&&s.date!=e.date||a.push({...t,time:this.$trd(i,{type:"time"}),extraDetails:[{value:t.title},{title:this.$tr("isite.cms.label.date"),icon:"fas fa-calendar-day",value:this.$trd(s.date)},{title:this.$tr("isite.cms.label.time"),icon:"fas fa-clock",value:this.$trd(i,{type:"time"})},...t.extraDetails||[]]})})),a},async openEvent(e){if(e.card){const t=await e.card.component;t.default&&(e.card.component=(0,D.Md)(t.default))}this.modal={data:e,show:!0}}}};var P=a(68716),C=a(15344),M=a(99140),U=a(30852),E=a(59576),W=a(70880),N=a(11252),K=a(58120),F=a(90111),S=a(99588),H=a(84884),B=a(11032),L=a(95252),j=a.n(L);const X=(0,P.c)(k,[["render",Q]]),Y=X;j()(k,"components",{QBtnToggle:C.c,QBtn:M.c,QDialog:U.c,QDate:E.c,QSeparator:W.c,QAvatar:N.c,QIcon:K.c,QTooltip:F.c,QList:S.c,QItem:H.c,QItemSection:B.c})},68260:(e,t,a)=>{"use strict";a.d(t,{c:()=>I});var s=a(92444),i=a(74044);const o={id:"cropperContent",class:"row items-center justify-center"},l={id:"topActions",class:"row q-gutter-x-xs"},A={key:1,id:"bottomActions",class:"row q-gutter-x-sm"},r=["onClick"];function n(e,t,a,n,c,d){const m=(0,s.E1)("vue-cropper"),u=(0,s.E1)("q-btn"),p=(0,s.E1)("q-icon"),h=(0,s.E1)("q-input"),f=(0,s.E1)("q-popup-edit"),g=(0,s.E1)("inner-loading"),v=(0,s.E1)("q-dialog"),b=(0,s.iS)("close-popup");return(0,s.Wz)(),(0,s.Az)(v,{id:"modalCropperComponent",modelValue:c.show,"onUpdate:modelValue":t[1]||(t[1]=e=>c.show=e),persistent:"",maximized:""},{default:(0,s.Ql)((()=>[(0,s.QD)("div",o,[c.imgSrc?((0,s.Wz)(),(0,s.Az)(m,(0,s.Gu)({key:0},d.cropperProps,{ref:"cropper",onCrop:t[0]||(t[0]=e=>d.getCropperData())}),null,16)):(0,s.g1)("",!0),(0,s.QD)("div",l,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(d.cropperActions.top,((e,t)=>((0,s.Wz)(),(0,s.Az)(u,{key:t,round:"",flat:"",icon:e.icon,onClick:t=>e.action(),color:"white",size:"11px"},null,8,["icon","onClick"])))),128))]),c.information?((0,s.Wz)(),(0,s.An)("div",A,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(d.cropperActions.bottom,((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,class:"btnActionCropper row items-center text-center",onClick:t=>!e.popupName&&e.action()},[(0,s.K2)(p,{name:e.icon,class:"q-mr-xs"},null,8,["name"]),(0,s.mY)(" "+(0,i.WA)(e.value)+" ",1),e.popupName?((0,s.Wz)(),(0,s.Az)(f,{key:0,modelValue:c.cropperSize[e.popupName],"onUpdate:modelValue":t=>c.cropperSize[e.popupName]=t,"auto-save":""},{default:(0,s.Ql)((()=>[(0,s.K2)(h,{modelValue:c.cropperSize[e.popupName],"onUpdate:modelValue":[t=>c.cropperSize[e.popupName]=t,t=>e.action()],dense:"",autofocus:"",outlined:"",type:"number",label:e.label},{append:(0,s.Ql)((()=>[(0,s.wt)((0,s.K2)(p,{name:e.icon,class:"cursor-pointer"},null,8,["name"]),[[b]])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,s.g1)("",!0)],8,r)))),128))])):(0,s.g1)("",!0),(0,s.K2)(g,{visible:c.loading},null,8,["visible"])])])),_:1},8,["modelValue"])}var c=a(95476),d=a(48848),m=a(8932);const u={beforeUnmount(){m.kN.off("master.cropper.image")},mixins:[c.c],props:{props:{type:Object}},emits:["cropped","canceled"],components:{VueCropper:d.c},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,show:!1,scale:{y:1,x:1},information:!1,cropperSize:{width:100,height:100},imgSrc:!1,imgType:!1,callBack:!1,aspectRatio:NaN}},computed:{cropperProps(){return{ref:"cropper",autoCropArea:1,background:!1,toggleDragModeOnDblclick:!1,cropBoxResizable:!0,src:this.imgSrc,viewMode:1,containerStyle:{height:"92%",width:"96%","max-height":"92%","max-width":"96%"},aspectRatio:this.aspectRatio,...this.props||{}}},cropperActions(){return{top:[{icon:"fas fa-search-plus",action:()=>this.$refs.cropper.relativeZoom(.2)},{icon:"fas fa-search-minus",action:()=>this.$refs.cropper.relativeZoom(-.2)},{icon:"fas fa-undo-alt",action:()=>this.$refs.cropper.rotate(-45)},{icon:"fas fa-redo-alt",action:()=>this.$refs.cropper.rotate(45)},{icon:"fas fa-vector-square",action:()=>{let e=this.$refs.cropper.getImageData(),t=this.$refs.cropper.getData(),a=[1,.9,.8,.7],s=parseFloat((100*t.width/e.naturalWidth/100).toFixed(2)),i=a.indexOf(s)+1;i>a.length-1&&(i=0);let o={width:e.naturalWidth*a[i],height:e.naturalHeight*a[i]};this.$refs.cropper.setData({...o,x:(e.naturalWidth-o.width)/2,y:(e.naturalHeight-o.height)/2})}},{icon:"fas fa-arrows-alt-h",action:()=>{this.$refs.cropper.scaleY(-this.scale.y),this.scale.y=-this.scale.y}},{icon:"fas fa-arrows-alt-v",action:()=>{this.$refs.cropper.scaleX(-this.scale.x),this.scale.x=-this.scale.x}},{icon:"fas fa-reply",action:()=>this.$refs.cropper.reset()}],bottom:[{icon:"fas fa-ban",value:this.$tr("isite.cms.label.cancel"),action:()=>{this.cropImage(!1)}},{popupName:"width",icon:"fas fa-arrows-alt-h",value:`${this.information?this.information.cropper.width:""}px`,label:this.$tr("isite.cms.form.width"),action:()=>{this.$refs.cropper.setData({width:parseInt(this.cropperSize.width),height:parseInt(this.cropperSize.height)})}},{popupName:"height",icon:"fas fa-arrows-alt-v",value:`${this.information?this.information.cropper.height:""}px`,label:this.$tr("isite.cms.form.height"),action:()=>{this.$refs.cropper.setData({width:parseInt(this.cropperSize.width),height:parseInt(this.cropperSize.height)})}},{icon:"fas fa-save",value:this.$tr("isite.cms.label.save"),action:this.cropImage}]}}},methods:{init(){m.kN.on("master.cropper.image",(e=>{e.src&&this.loadFile(e.src),e.type&&(this.imgType=this.$clone(e.type)),e.callBack&&(this.callBack=e.callBack),e.ratio&&(this.aspectRatio=this.parseRatio(e.ratio))}))},loadFile(e){this.show=!0,setTimeout((()=>this.imgSrc=this.$clone(e)),500)},getCropperData(){this.information={cropper:this.$refs.cropper.getData(!0),container:this.$refs.cropper.getContainerData(),image:this.$refs.cropper.getImageData()},this.cropperSize={width:parseInt(this.information.cropper.width),height:parseInt(this.information.cropper.height)}},cropImage(e=!0){if(e){this.loading=!0;let e=this.$refs.cropper.getCroppedCanvas().toDataURL(this.imgType),t={base64:e,size:parseInt(.75*e.replace(/=/g,"").length),height:this.information.cropper.height,width:this.information.cropper.width};this.$emit("cropped",t),this.callBack&&this.callBack(t)}else this.$emit("canceled"),this.callBack&&this.callBack(null);this.show=!1,this.imgSrc=!1,this.callBack=!1,this.imgType=!1,this.loading=!1}}};var p=a(68716),h=a(30852),f=a(99140),g=a(58120),v=a(86742),b=a(20540),y=a(81020),$=a(95252),q=a.n($);const V=(0,p.c)(u,[["render",n]]),I=V;q()(u,"components",{QDialog:h.c,QBtn:f.c,QIcon:g.c,QPopupEdit:v.c,QInput:b.c}),q()(u,"directives",{ClosePopup:y.c})},90940:(e,t,a)=>{"use strict";a.d(t,{c:()=>O});var s=a(92444),i=a(74044);const o={id:"quickCardComponent"},l={class:"box"},A={class:"box-title"},r={id:"contentQuickCard",class:"relative-position"},n={key:0,id:"itemsContent",class:"q-mb-md"},c={key:0,id:"itemsListV"},d={key:1,id:"itemsListH"},m={class:"row q-col-gutter-md"},u=["onClick"],p={class:"itemSide"},h={class:"itemInformation"},f={key:2,id:"itemsListRankin"},g={key:1,class:"text-center"},v={key:2},b={key:1},y={class:"tw-flex tw-items-end tw-justify-center tw-gap-6"},$={key:3},q={key:0,class:"tw-flex"},V={class:"text-center"},I=["innerHTML"],w={key:4},z={class:"text-center"};function T(e,t,a,T,Q,R){const x=(0,s.E1)("q-icon"),D=(0,s.E1)("q-separator"),k=(0,s.E1)("q-item-section"),P=(0,s.E1)("q-item-label"),C=(0,s.E1)("q-item"),M=(0,s.E1)("q-list"),U=(0,s.E1)("q-scroll-area"),E=(0,s.E1)("q-tooltip"),W=(0,s.E1)("q-chip"),N=(0,s.E1)("q-linear-progress"),K=(0,s.E1)("not-result"),F=(0,s.E1)("QCharts"),S=(0,s.E1)("q-skeleton"),H=(0,s.E1)("q-circular-progress"),B=(0,s.E1)("q-btn");return(0,s.Wz)(),(0,s.An)("div",o,[(0,s.QD)("div",l,[(0,s.QD)("div",A,[R.cardParams.icon?((0,s.Wz)(),(0,s.Az)(x,{key:0,name:R.cardParams.icon,class:"q-mr-sm"},null,8,["name"])):(0,s.g1)("",!0),(0,s.mY)(" "+(0,i.WA)(R.cardParams.title),1)]),(0,s.K2)(D,{class:"q-my-md"}),(0,s.QD)("div",r,[Q.loading?(0,s.g1)("",!0):((0,s.Wz)(),(0,s.An)("div",n,["list-v"==R.cardParams.type?((0,s.Wz)(),(0,s.An)("div",c,[(0,s.K2)(U,{style:{height:"260px",width:"100%"}},{default:(0,s.Ql)((()=>[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(Q.items,((e,t)=>((0,s.Wz)(),(0,s.Az)(M,{key:t},{default:(0,s.Ql)((()=>[(0,s.K2)(C,{class:"q-px-none",onClick:t=>!!R.cardParams.itemAction&&R.cardParams.itemAction(e),clickable:!!R.cardParams.itemAction,"v-ripple":!!R.cardParams.itemAction},{default:(0,s.Ql)((()=>[(0,s.K2)(k,{class:"sideItem",side:""},{default:(0,s.Ql)((()=>[R.getInformation(e,"image")?((0,s.Wz)(),(0,s.An)("div",{key:0,class:"itemImage img-as-bg",style:(0,i.MN)(`background-image: url('${R.getInformation(e,"image")}')`)},null,4)):(0,s.g1)("",!0),!R.getInformation(e,"image")&&R.cardParams.icon?((0,s.Wz)(),(0,s.Az)(x,{key:1,class:"itemIcon",name:R.cardParams.icon},null,8,["name"])):(0,s.g1)("",!0)])),_:2},1024),(0,s.K2)(k,null,{default:(0,s.Ql)((()=>[(0,s.K2)(P,{caption:"",class:"ellipsis"},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(R.getInformation(e,"text1")),1)])),_:2},1024),(0,s.K2)(P,{class:"ellipsis text-grey-8 q-my-xs"},{default:(0,s.Ql)((()=>[(0,s.QD)("b",null,(0,i.WA)(R.getInformation(e,"text2")),1)])),_:2},1024),(0,s.K2)(P,{caption:"",lines:"2"},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(R.getInformation(e,"text3")),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","clickable","v-ripple"])])),_:2},1024)))),128))])),_:1})])):(0,s.g1)("",!0),"list-h"==R.cardParams.type?((0,s.Wz)(),(0,s.An)("div",d,[(0,s.QD)("div",m,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(Q.items,((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,class:(0,i.WN)("col-6 col-md-4 "+(R.cardParams.itemAction?"cursor-pointer":"")),onClick:t=>!!R.cardParams.itemAction&&R.cardParams.itemAction(e)},[(0,s.QD)("div",p,[R.getInformation(e,"image")?((0,s.Wz)(),(0,s.An)("div",{key:0,class:"itemImage img-as-bg",style:(0,i.MN)(`background-image: url('${R.getInformation(e,"image")}')`)},null,4)):(0,s.g1)("",!0),!R.getInformation(e,"image")&&R.cardParams.icon?((0,s.Wz)(),(0,s.Az)(x,{key:1,class:"itemIcon",name:R.cardParams.icon},null,8,["name"])):(0,s.g1)("",!0)]),(0,s.QD)("div",h,[(0,s.K2)(P,{caption:"",class:"ellipsis q-my-sm"},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(R.getInformation(e,"text1")),1)])),_:2},1024),(0,s.K2)(P,{class:"ellipsis-2-lines text-grey-8"},{default:(0,s.Ql)((()=>[(0,s.QD)("b",null,(0,i.WA)(R.getInformation(e,"text2")),1),(0,s.K2)(E,null,{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(R.getInformation(e,"text2")),1)])),_:2},1024)])),_:2},1024)])],10,u)))),128))])])):(0,s.g1)("",!0),"list-ranking"==R.cardParams.type?((0,s.Wz)(),(0,s.An)("div",f,[!Q.loading&&Q.items&&Q.items.length?((0,s.Wz)(),(0,s.Az)(U,{key:0,style:{height:"350px"}},{default:(0,s.Ql)((()=>[(0,s.K2)(M,{bordered:"",separator:""},{default:(0,s.Ql)((()=>[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(Q.items,((e,t)=>((0,s.Wz)(),(0,s.Az)(C,{key:t,class:"bg-grey-2"},{default:(0,s.Ql)((()=>[(0,s.K2)(k,null,{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(R.getInformation(e,"text1")),1)])),_:2},1024),(0,s.K2)(k,{side:""},{default:(0,s.Ql)((()=>[(0,s.K2)(W,{label:R.getInformation(e,"text2"),color:"white","text-color":"blue-grey",class:"text-weight-bold"},null,8,["label"])])),_:2},1024),R.getInformation(e,"percentage")?((0,s.Wz)(),(0,s.Az)(N,{key:0,color:"green",value:R.getInformation(e,"percentage")},null,8,["value"])):(0,s.g1)("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})):(0,s.g1)("",!0)])):(0,s.g1)("",!0)])),R.showNotResult?((0,s.Wz)(),(0,s.An)("div",g,[(0,s.K2)(K)])):(0,s.g1)("",!0),"chart"===R.cardParams.type?((0,s.Wz)(),(0,s.An)("div",v,[Q.loading||"object"!==typeof Q.items?(0,s.g1)("",!0):((0,s.Wz)(),(0,s.Az)(F,{key:0,chartsData:Q.items},null,8,["chartsData"])),Q.loading?((0,s.Wz)(),(0,s.An)("section",b,[(0,s.K2)(S,{type:"QChip",class:"tw-mb-4 tw-mx-auto"}),(0,s.QD)("div",y,[(0,s.K2)(S,{animated:"",type:"rect",height:"220px",width:"75px"}),(0,s.K2)(S,{animated:"",type:"rect",height:"280px",width:"75px"}),(0,s.K2)(S,{animated:"",type:"rect",height:"250px",width:"75px"}),(0,s.K2)(S,{animated:"",type:"rect",height:"310px",width:"75px"}),(0,s.K2)(S,{animated:"",type:"rect",height:"350px",width:"75px"})])])):(0,s.g1)("",!0)])):(0,s.g1)("",!0),"percentage"===R.cardParams.type?((0,s.Wz)(),(0,s.An)("div",$,[Q.loading||"object"!==typeof Q.items?(0,s.g1)("",!0):((0,s.Wz)(),(0,s.An)("div",q,[(0,s.QD)("div",V,[(0,s.K2)(H,{"show-value":"","font-size":"40px",value:Q.items.value,size:"200px",thickness:.22,"track-color":"grey-3",class:"q-ma-md tw-text-center colorPercentage"},{default:(0,s.Ql)((()=>[(0,s.mY)((0,i.WA)(Q.items.value||0)+"% ",1)])),_:1},8,["value"])]),(0,s.QD)("div",null,[(0,s.QD)("p",{class:"tw-font-semibold tw-py-5 tw-text-base tw-text-justify tw-break-normal",innerHTML:Q.items.description},null,8,I)])]))])):(0,s.g1)("",!0),"custom"===R.cardParams.type?((0,s.Wz)(),(0,s.An)("div",w,[((0,s.Wz)(),(0,s.Az)((0,s.mk)(R.cardParams.component),{cardParams:{...R.cardParams},items:{...Q.items},loading:Q.loading},null,8,["cardParams","items","loading"]))])):(0,s.g1)("",!0),(0,s.QD)("div",z,[Q.items.length&&R.cardParams.actionTo?((0,s.Wz)(),(0,s.Az)(B,{key:0,unelevated:"",label:e.$tr("isite.cms.label.showMore"),color:"primary",rounded:"",to:{name:R.cardParams.actionTo}},null,8,["label","to"])):(0,s.g1)("",!0)]),Q.loading&&"chart"!==R.cardParams.type?((0,s.Wz)(),(0,s.Az)(S,{key:5,type:"rect",height:"350px",width:"100%",class:"tw-mt-4"})):(0,s.g1)("",!0)])])])}var Q=a(93724),R=a(8932);const x={beforeUnmount(){R.kN.off("page.data.refresh")},props:{params:{type:Object,default:!1}},components:{QCharts:Q.c},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,items:[],filterValues:!1}},computed:{showNotResult(){return"custom"!==this.cardParams.type&&("percentage"!==this.cardParams.type&&"chart"!==this.cardParams.type||"object"!==typeof this.items?!this.items.length&&!this.loading:0===Object.keys(this.items).length&&!this.loading)},cardParams(){let e={type:"list-v",...this.params,requestParams:{take:"list-v"==this.params.type?10:6,page:1,...this.params.requestParams||{}}};return this.params.filters&&this.filterValues&&(e.requestParams.filter={...e.requestParams.filter||{},...this.filterValues}),e}},methods:{async init(){this.params.filters?this.setFilters():this.getData(),R.kN.on("page.data.refresh",(()=>this.getData()))},getData(){return new Promise(((e,t)=>{this.loading=!0;let a={refresh:!0,params:this.cardParams.requestParams||{}};this.$crud.index(this.cardParams.apiRoute,a).then((t=>{this.items=t.data,this.loading=!1,e(t.data)})).catch((t=>{this.$apiResponse.handleError(t,(()=>{this.loading=!1,e(t)}))}))}))},setFilters(){return new Promise((async e=>{await this.$filter.setFilter({name:this.$route.name,fields:this.$clone(this.params.filters||{}),callBack:()=>{this.filterValues=this.$clone(this.$filter.values),this.getData()}}),e(!0)}))},getInformation(e,t){let a=this.cardParams.information||{};return a[t]?a[t].format?a[t].field?a[t].format(e[a[t].field]):a[t].format(e):e[a[t].field]:null}}};var D=a(68716),k=a(58120),P=a(70880),C=a(94380),M=a(99588),U=a(84884),E=a(11032),W=a(2992),N=a(90111),K=a(84256),F=a(48488),S=a(39692),H=a(1452),B=a(99140),L=a(85220),j=a(95252),X=a.n(j);const Y=(0,D.c)(x,[["render",T]]),O=Y;X()(x,"components",{QIcon:k.c,QSeparator:P.c,QScrollArea:C.c,QList:M.c,QItem:U.c,QItemSection:E.c,QItemLabel:W.c,QTooltip:N.c,QChip:K.c,QLinearProgress:F.c,QSkeleton:S.cp,QCircularProgress:H.c,QBtn:B.c}),X()(x,"directives",{Ripple:L.c})},74048:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(92444),i=a(74044);const o={id:"organizationFormPage"},l={key:0,id:"pageContent"},A={class:"box box-auto-height q-mb-md"},r={id:"adminHomeActivities",class:"col-12 q-mb-md"},n={class:"relative-position"},c={key:1,class:"box box-auto-height text-center"},d={class:"q-py-md"};function m(e,t,a,m,u,p){const h=(0,s.E1)("page-actions"),f=(0,s.E1)("activities"),g=(0,s.E1)("dynamic-form"),v=(0,s.E1)("inner-loading"),b=(0,s.E1)("q-icon");return(0,s.Wz)(),(0,s.An)("div",o,[p.organizationIdLocal?((0,s.Wz)(),(0,s.An)("div",l,[(0,s.QD)("div",A,[(0,s.K2)(h,{title:p.pageTitle,onRefresh:t[0]||(t[0]=e=>p.getData(!0))},null,8,["title"])]),(0,s.QD)("div",r,[(0,s.K2)(f,{"system-name":"admin_home_actions",view:"cardImage"})]),(0,s.QD)("div",n,[(0,s.K2)(g,{modelValue:u.form,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form=e),blocks:p.blocks.blocks,"form-type":"grid",onSubmit:p.syncOrganization,"item-id":u.organization.id,"form-col-number":2},null,8,["modelValue","blocks","onSubmit","item-id"]),(0,s.K2)(v,{visible:u.loading},null,8,["visible"])])])):((0,s.Wz)(),(0,s.An)("div",c,[(0,s.QD)("div",d,[(0,s.K2)(b,{name:"fal fa-crown",size:"40px",color:"primary",class:"q-mb-md"}),(0,s.QD)("div",null,(0,i.WA)(e.$tr("isite.cms.messages.noOrganization"))+"...",1)])]))])}var u=a(2328);const p={beforeUnmount(){(0,u.c)().setValueLayoutList([])},props:{organizationId:{default:null}},components:{},watch:{"$route.params.id"(e){this.init()}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,organization:!1,crudData:!1,form:{}}},computed:{blocks(){const e=(0,u.c)().getLayoutsList(),t={blocks:[{title:this.$tr("isite.cms.crudMySite.information.title"),help:{title:this.$tr("isite.cms.crudMySite.information.title"),description:this.$tr("isite.cms.crudMySite.information.description")},name:"information",fields:{title:{value:null,type:"input",isTranslatable:!0,required:!0,props:{label:`${this.$tr("isite.cms.form.name")}*`}},categoryId:{value:null,type:"treeSelect",required:!0,props:{label:`${this.$tr("isite.cms.label.category")}*`},loadOptions:{apiRoute:"apiRoutes.qsite.categories"}},description:{value:null,type:"html",isTranslatable:!0,colClass:"col-12",required:!0,props:{label:`${this.$tr("isite.cms.label.description")}*`}}}},{title:this.$tr("isite.cms.crudMySite.socialNetworks.title"),help:{title:this.$tr("isite.cms.crudMySite.socialNetworks.title"),description:this.$tr("isite.cms.crudMySite.socialNetworks.description")},name:"socialNetworks",fields:{email:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.email")}`}},facebook:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.facebook")}`}},instagram:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.instagram")}`}},youtube:{value:null,type:"input",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.label.youtube")}`}},phones:{value:null,type:"select",colClass:"col-12",isTranslatable:!0,props:{label:this.$tr("isite.cms.form.phone"),useInput:!0,useChips:!0,multiple:!0,hideDropdownIcon:!0,newValueMode:"add-unique"}},whatsapp1:{name:"whatsapp1",label:"Whatsapp #1",isTranslatable:!0,multiple:!0,children:{calling_code:{value:null,type:"select",colClass:"col-6",props:{label:this.$tr("isite.cms.label.codeCountry")},loadOptions:{apiRoute:"apiRoutes.qlocations.countries",select:{label:"name",id:"callingCode"}}},number:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.label.whatsappNumber"),type:"number"}},message:{value:null,type:"input",colClass:"col-12",props:{label:this.$tr("isite.cms.label.defaultMessage")}},label:{value:null,type:"input",colClass:"col-6",props:{label:"Etiqueta"}},iconLabel:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.form.icon")}}}},whatsapp2:{name:"whatsapp2",label:"Whatsapp #2",isTranslatable:!0,multiple:!0,children:{calling_code:{value:null,type:"select",colClass:"col-6",props:{label:this.$tr("isite.cms.label.codeCountry")},loadOptions:{apiRoute:"apiRoutes.qlocations.countries",select:{label:"name",id:"callingCode"}}},number:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.label.whatsappNumber"),type:"number"}},message:{value:null,type:"input",colClass:"col-12",props:{label:this.$tr("isite.cms.label.defaultMessage")}},label:{value:null,type:"input",colClass:"col-6",props:{label:"Etiqueta"}},iconLabel:{value:null,type:"input",colClass:"col-6",props:{label:this.$tr("isite.cms.form.icon")}}}}}},{title:this.$tr("isite.cms.crudMySite.media.title"),help:{title:this.$tr("isite.cms.crudMySite.media.title"),description:this.$tr("isite.cms.crudMySite.media.description")},name:"media",fields:{logo:{name:"mediasSingle",value:[],type:"media",colClass:"col-12",fieldItemId:this.organization.id,props:{label:"Logo",zone:"mainimage",entity:"Modules\\Isite\\Entities\\Organization",entityId:null,accept:"images"}}}},{title:this.$tr("isite.cms.crudMySite.colors.title"),help:{title:this.$tr("isite.cms.crudMySite.colors.title"),description:this.$tr("isite.cms.crudMySite.colors.description")},name:"colors",fields:{colorPrimary:{value:"#420b0b",type:"inputColor",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.primaryColor")}*`}},colorSecondary:{value:"#8b2d2d",type:"inputColor",isTranslatable:!0,props:{label:`${this.$tr("isite.cms.form.secondaryColor")}*`}}}},{title:this.$tr("isite.cms.crudMySite.schedule.title"),help:{title:this.$tr("isite.cms.crudMySite.schedule.title"),description:this.$tr("isite.cms.crudMySite.schedule.description")},name:"schedule",fields:{schedule:{value:null,type:"schedulable",colClass:"col-12",props:{label:`${this.$tr("isite.cms.label.schedule")}*`}}}},{title:this.$tr("isite.cms.crudMySite.meta.title"),help:{title:this.$tr("isite.cms.crudMySite.meta.title"),description:this.$tr("isite.cms.crudMySite.meta.description")},name:"meta",fields:{tags:{value:[],type:"select",colClass:"col-12",props:{label:this.$trp("isite.cms.form.tag"),useInput:!0,useChips:!0,multiple:!0,hideDropdownIcon:!0,inputDebounce:"0",newValueMode:"add-unique"}}}},{...e,name:"layouts",title:this.$tr("isite.cms.crudMySite.layouts.title"),help:{title:this.$tr("isite.cms.crudMySite.layouts.title"),description:this.$tr("isite.cms.crudMySite.layouts.description")}},{title:this.$tr("isite.cms.crudMySite.location.title"),help:{title:this.$tr("isite.cms.crudMySite.location.title"),description:this.$tr("isite.cms.crudMySite.location.description")},name:"location",fields:{provinceId:{value:null,type:"select",isTranslatable:!0,colClass:"col-12",props:{label:this.$tr("isite.cms.form.province")},loadOptions:{apiRoute:"apiRoutes.qlocations.provinces",select:{label:"name",id:"id"},requestParams:{filter:{allTranslations:!0,country:48}},filterByQuery:!0}},cityId:{value:null,type:"select",isTranslatable:!0,colClass:"col-12",props:{label:this.$tr("isite.cms.form.city"),readonly:!1},loadOptions:{apiRoute:"apiRoutes.qlocations.cities",select:{label:"name",id:"id"},requestParams:{filter:{allTranslations:!0,country:48}},filterByQuery:!0}},address:{value:null,type:"input",colClass:"col-12",isTranslatable:!0,props:{label:this.$tr("isite.cms.form.address")}},map:{value:null,type:"positionMarkerMap",colClass:"col-12",isTranslatable:!0,props:{label:this.$tr("isite.cms.label.map")}}}}]};return t},pageTitle(){return this.$tr(this.$route.meta.title)},organizationIdLocal(){return this.$clone(this.organizationId||this.$route.params.id)}},methods:{init(){this.getData(!0)},getData(e=!1){return new Promise((async t=>{this.loading=!0;try{await Promise.all([this.getOrganizationData(e),(0,u.c)().getLayouts()]),await this.getSubscriptionData(!0,this.organization.userId)}catch(a){this.$alert.error({message:this.$tr("isite.cms.message.errorRequest")})}this.loading=!1}))},getOrganizationData(e=!1){return new Promise(((t,a)=>{if(!this.organizationIdLocal)return t(null);let s={refresh:e,params:{include:"fields,schedule.workTimes,tags",filter:{allTranslations:!0}}};this.$crud.show("apiRoutes.qsite.organizations",this.organizationIdLocal,s).then((e=>{this.organization=this.$clone(e.data),this.form=this.$clone(e.data),(0,u.c)().setSelectedLayout(e.data.layoutId),t(e.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{a(e)}))}))}))},syncOrganization(){return new Promise(((e,t)=>{const a=(0,u.c)().getSelectedLayout();a&&(this.form.layoutId=a,(0,u.c)().setSelectedLayout(a)),this.loading=!0,this.$crud.update("apiRoutes.qsite.organizations",this.organization.id,this.form).then((e=>{this.$alert.info({message:this.$tr("isite.cms.message.recordUpdated")}),this.loading=!1,(0,u.c)().setSelectedFile()})).catch((e=>{this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated")}),this.loading=!1}))}))},getSubscriptionData(e=!1,t){return new Promise(((a,s)=>{if(!t)return a(null);let i={refresh:e,params:{include:"plan",filter:{field:"entity_id",entity:"Modules\\User\\Entities\\Sentinel\\User"}}};this.$crud.show("apiRoutes.qplan.subscriptions",t,i).then((e=>{const t=e?.data?.plan?.options?.layouts??[];this.filteredLayouts(t),a(e.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{s(e)}))}))}))},filteredLayouts(e=[]){const t=(0,u.c)(),a=t.getAllLayouts(),s=a.filter((t=>e.includes(t.systemName))),i=t.mapLayoutsList(s);t.setValueLayoutList(i)}}};var h=a(68716),f=a(58120),g=a(95252),v=a.n(g);const b=(0,h.c)(p,[["render",m]]),y=b;v()(p,"components",{QIcon:f.c})},68514:(e,t,a)=>{"use strict";a.d(t,{c:()=>V});var s=a(92444),i=a(74044);const o={key:0,class:"row relative-position"},l={class:"col-12 q-mb-md"},A={key:0,class:"col-7 q-gutter-y-md"},r={key:1,class:"col-5 q-gutter-y-md"},n={class:"input-title"},c={class:"col-12 text-right"};function d(e,t,a,d,m,u){const p=(0,s.E1)("locales"),h=(0,s.E1)("q-input"),f=(0,s.E1)("q-editor"),g=(0,s.E1)("q-select"),v=(0,s.E1)("mediaForm"),b=(0,s.E1)("q-btn"),y=(0,s.E1)("q-form"),$=(0,s.E1)("inner-loading");return m.success?((0,s.Wz)(),(0,s.An)("div",o,[(0,s.QD)("div",l,[(0,s.K2)(p,{modelValue:m.locale,"onUpdate:modelValue":t[0]||(t[0]=e=>m.locale=e),ref:"localeComponent",form:e.$refs.formContent},null,8,["modelValue","form"])]),(0,s.K2)(y,{onSubmit:t[12]||(t[12]=e=>m.itemId?u.updateItem():u.createItem()),ref:"formContent",class:"row q-col-gutter-x-md full-width",autocomplete:"off",onValidationError:t[13]||(t[13]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,s.Ql)((()=>[m.locale.success?((0,s.Wz)(),(0,s.An)("div",A,[(0,s.K2)(h,{label:`${e.$tr("isite.cms.form.title")} (${m.locale.language}) `,type:"text",modelValue:m.locale.formTemplate.title,"onUpdate:modelValue":t[1]||(t[1]=e=>m.locale.formTemplate.title=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,s.K2)(h,{label:`${e.$tr("isite.cms.form.caption")} (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.caption,"onUpdate:modelValue":t[2]||(t[2]=e=>m.locale.formTemplate.caption=e)},null,8,["label","modelValue"]),(0,s.K2)(h,{label:"URI ("+m.locale.language+")",outlined:"",dense:"",type:"text",modelValue:m.locale.formTemplate.uri,"onUpdate:modelValue":t[3]||(t[3]=e=>m.locale.formTemplate.uri=e)},null,8,["label","modelValue"]),(0,s.K2)(h,{label:"URL ("+m.locale.language+")",type:"text",modelValue:m.locale.formTemplate.url,"onUpdate:modelValue":t[4]||(t[4]=e=>m.locale.formTemplate.url=e),outlined:"",dense:""},null,8,["label","modelValue"]),(0,s.K2)(h,{label:`${e.$tr("isite.cms.form.image")} URL (${m.locale.language}) `,type:"text",outlined:"",dense:"",modelValue:m.locale.formTemplate.externalImageUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>m.locale.formTemplate.externalImageUrl=e)},null,8,["label","modelValue"]),(0,s.K2)(f,{label:`${e.$tr("isite.cms.form.description")} (${m.locale.language}) `,modelValue:m.locale.formTemplate.customHtml,"onUpdate:modelValue":t[6]||(t[6]=e=>m.locale.formTemplate.customHtml=e),style:{width:"100%"}},null,8,["label","modelValue"])])):(0,s.g1)("",!0),m.locale.success?((0,s.Wz)(),(0,s.An)("div",r,[u.canManageRecordMaster?((0,s.Wz)(),(0,s.Az)(g,{key:0,modelValue:m.locale.formTemplate.options.masterRecord,"onUpdate:modelValue":t[7]||(t[7]=e=>m.locale.formTemplate.options.masterRecord=e),label:e.$tr("isite.cms.form.masterRecord"),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:this.$tr("isite.cms.label.yes"),value:1},{label:this.$tr("isite.cms.label.no"),value:0}]},null,8,["modelValue","label","options"])):(0,s.g1)("",!0),(0,s.K2)(g,{label:`${e.$tr("isite.cms.form.status")} (${m.locale.language})`,modelValue:m.locale.formTemplate.active,"onUpdate:modelValue":t[8]||(t[8]=e=>m.locale.formTemplate.active=e),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:e.$tr("isite.cms.label.enabled"),value:!0},{label:e.$tr("isite.cms.label.disabled"),value:!1}]},null,8,["label","modelValue","options"]),(0,s.K2)(g,{label:`${e.$tr("isite.cms.form.option")}`,modelValue:m.locale.formTemplate.target,"onUpdate:modelValue":t[9]||(t[9]=e=>m.locale.formTemplate.target=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"_self",label:"Same tab"},{value:"_blank",label:"New tab"}]},null,8,["label","modelValue"]),(0,s.K2)(g,{label:`${e.$tr("isite.cms.form.type")}`,modelValue:m.locale.formTemplate.type,"onUpdate:modelValue":t[10]||(t[10]=e=>m.locale.formTemplate.type=e),"emit-value":"","map-options":"",outlined:"",dense:"",options:[{value:"auto",label:"Auto"},{value:"360",label:"360"},{value:"video",label:"Video"},{value:"image",label:"Image"}]},null,8,["label","modelValue"]),(0,s.QD)("div",n,(0,i.WA)(`${e.$tr("isite.cms.form.image")}`),1),((0,s.Wz)(),(0,s.Az)(v,{entity:"Modules\\Slider\\Entities\\Slide","entity-id":m.itemId?m.itemId:"",modelValue:m.locale.formTemplate.mediasSingle,"onUpdate:modelValue":t[11]||(t[11]=e=>m.locale.formTemplate.mediasSingle=e),zone:"slideimage",key:m.mediaKey},null,8,["entity-id","modelValue"]))])):(0,s.g1)("",!0),(0,s.QD)("div",c,[m.itemId?((0,s.Wz)(),(0,s.Az)(b,{key:0,color:"positive",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.update"),type:"submit",rounded:""},null,8,["loading","label"])):((0,s.Wz)(),(0,s.Az)(b,{key:1,color:"positive",loading:m.loading,icon:"fas fa-edit",label:e.$tr("isite.cms.label.create"),type:"submit",rounded:""},null,8,["loading","label"]))])])),_:1},512),(0,s.K2)($,{visible:m.loading},null,8,["visible"])])):(0,s.g1)("",!0)}a(23816);var m=a(15432);const u={components:{mediaForm:m.c},watch:{$route(e,t){this.initForm()}},mounted(){this.$nextTick((()=>{this.initForm()}))},data(){return{locale:{},loading:!1,success:!1,itemId:!1,mediaKey:this.$uid()}},computed:{dataLocale(){return{fields:{sliderId:this.$route.params.sliderId,target:null,type:"auto",mediasSingle:{},externalImageUrl:"",options:{masterRecord:0}},fieldsTranslatable:{title:"",caption:"",active:!0,url:"",uri:"",customHtml:""}}},canManageRecordMaster(){let e=!0;return this.$route.params.sliderId.id&&!this.$hasAccess("isite.master.records.edit")&&(e=!1),this.$route.params.sliderId.id||this.$hasAccess("isite.master.records.create")||(e=!1),e}},methods:{async initForm(){this.loading=!0,this.success=!1,this.locale=this.$clone(this.dataLocale),this.itemId=this.$route.params.id,this.locale.success&&this.$refs.localeComponent.vReset(),await this.getData(),this.success=!0,this.loading=!1},getData(){return new Promise(((e,t)=>{const a=this.$clone(this.itemId);if(a){let s="apiRoutes.qslider.slides",i={refresh:!0,params:{filter:{allTranslations:!0}}};this.$crud.show(s,a,i).then((t=>{this.orderDataItemToLocale(t.data),e(!0)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error({message:this.$tr("isite.cms.message.errorRequest"),pos:"bottom"}),this.loading=!1,t(!1)}))}))}else e(!0)}))},orderDataItemToLocale(e){let t=this.$clone(e);this.locale.form=this.$clone(t)},async createItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qslider.slides";this.$crud.create(e,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordCreated")} ID: ${e.data.id}`}),this.$router.push({name:"qslider.admin.sliders.show",params:{id:this.$route.params.sliderId}}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoCreated"),pos:"bottom"})}))}},async updateItem(){if(await this.$refs.localeComponent.validateForm()){this.loading=!0;let e="apiRoutes.qslider.slides";this.$crud.update(e,this.itemId,this.getDataForm()).then((e=>{this.$alert.success({message:`${this.$tr("isite.cms.message.recordUpdated")}`}),this.loading=!1})).catch((e=>{this.loading=!1,this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated"),pos:"bottom"})}))}},getDataForm(){let e=this.locale.form;for(var t in e){let a=e[t];null!=a&&void 0!=a||delete e[t]}return e.selectable=JSON.stringify(e.selectable),e}}};var p=a(68716),h=a(14288),f=a(20540),g=a(85664),v=a(36008),b=a(99140),y=a(95252),$=a.n(y);const q=(0,p.c)(u,[["render",d]]),V=q;$()(u,"components",{QForm:h.c,QInput:f.c,QEditor:g.c,QSelect:v.c,QBtn:b.c})},6324:(e,t,a)=>{e.exports=a.p+"img/favicon.004b103b.ico"},33112:e=>{e.exports="data:image/jpeg;base64,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"}}]);