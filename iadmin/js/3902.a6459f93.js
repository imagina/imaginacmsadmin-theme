"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[3902],{83902:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var i=a(61758);function s(e,t,a,s,l,r){const o=(0,i.g2)("dynamic-field"),d=(0,i.g2)("master-modal");return(0,i.uX)(),(0,i.Wv)(d,(0,i.v6)({modelValue:l.modal.show,"onUpdate:modelValue":t[0]||(t[0]=e=>l.modal.show=e)},l.modal.props,{"custom-position":""}),{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.crudData.formLeft,((e,t)=>((0,i.uX)(),(0,i.Wv)(o,{key:t,modelValue:l.form[e.name||t],"onUpdate:modelValue":a=>l.form[e.name||t]=a,field:e},null,8,["modelValue","onUpdate:modelValue","field"])))),128))])),_:1},16,["modelValue"])}var l=a(71915);const r={data(){return{crudId:this.$uid(),modal:{show:!1,props:{title:"Edit CRUD Form",loading:!1,actions:[{action:this.saveCrud,props:{label:this.$tr("isite.cms.label.save"),color:"green"}}]}},form:{},selectedCrud:null}},computed:{crudData(){return{crudId:this.crudId,apiRoute:"apiRoutes.qsite.icruds",permission:"isite.organizations",create:!1,read:{columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",align:"left"},{name:"entity",label:this.$tr("isite.cms.label.entity"),field:"entity",align:"left"},{name:"module",label:this.$tr("isite.cms.label.module"),field:"module",align:"left"},{name:"createdAt",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",format:e=>e?this.$trd(e):"-",align:"left",sortable:!0},{name:"updatedAt",label:this.$tr("isite.cms.form.updatedAt"),field:"updatedAt",format:e=>e?this.$trd(e):"-",align:"left",sortable:!0},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"center"}],requestParams:{filter:{noTranslate:!0}},actions:[{label:"Edit",icon:"fas fa-clipboard-list",action:e=>{this.selectedCrud=this.$clone(e),this.form=this.$clone(e.projectCrud),this.modal.show=!0}}]},update:!1,delete:!1,formLeft:{title:{value:"",type:"input",props:{label:`${this.$tr("isite.cms.form.title")}`}},description:{value:"",type:"input",props:{label:`${this.$tr("isite.cms.form.description")}`,type:"textarea",rows:"3"}},icon:{value:"fas fa-list-alt",type:"selectIcon"},form:{value:null,type:"json"}}}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}},methods:{saveCrud(){return new Promise(((e,t)=>{this.modal.props.loading=!0;let a={projectCrud:this.form};this.$crud.update("apiRoutes.qsite.icruds",this.selectedCrud.id,a).then((t=>{this.$alert.info({message:this.$tr("isite.cms.message.recordUpdated")}),l.Bt.emit("crud.data.refresh"),this.modal.props.loading=!1,this.modal.show=!1,e(t.data)})).catch((e=>{this.$alert.error({message:this.$tr("isite.cms.message.recordNoUpdated")}),this.modal.props.loading=!1,t(e)}))}))}}};var o=a(12807);const d=(0,o.A)(r,[["render",s]]),n=d}}]);