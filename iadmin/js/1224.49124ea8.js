"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[1224],{1224:(e,t,i)=>{i.r(t),i.d(t,{default:()=>yt});var a=i(92444),n=i(74044);const o={class:"row"},r={class:"col-xs-12 col-sm-12 col-md-6 q-mb-sm"},l={class:"q-px-md"},s={class:"tw-w-full tw-flex q-my-md items-center"},c={class:"tw-w-full row"},u={class:"text-primary q-pa-md",style:{"font-size":"16px"}};function d(e,t,i,d,p,m){const f=(0,a.E1)("q-tab"),v=(0,a.E1)("q-tabs"),g=(0,a.E1)("q-tooltip"),h=(0,a.E1)("q-btn"),y=(0,a.E1)("dynamic-field"),b=(0,a.E1)("dynamicList"),w=(0,a.E1)("inner-loading");return(0,a.Wz)(),(0,a.An)("div",null,[(0,a.QD)("div",o,[(0,a.QD)("div",r,[(0,a.K2)(v,{modelValue:p.tabModel,"onUpdate:modelValue":t[0]||(t[0]=e=>p.tabModel=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"left","no-caps":"","narrow-indicator":"",style:{"align-items":"center"}},{default:(0,a.Ql)((()=>[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(p.tabs,((e,t)=>((0,a.Wz)(),(0,a.Az)(f,{key:t,name:e.value,label:e.label},null,8,["name","label"])))),128))])),_:1},8,["modelValue"])])]),(0,a.QD)("div",l,[p.tabModel==p.tabs[0].value?((0,a.Wz)(),(0,a.Az)(b,{key:0,ref:"dynamicList",listData:p.listData},{"top-table":(0,a.Ql)((()=>[(0,a.QD)("div",s,[(0,a.QD)("div",null,[(0,a.K2)(h,{"text-color":"primary",class:"q-mr-sm",size:"sm",unelevated:"",round:"",icon:"fa-regular fa-chevron-left",onClick:t[1]||(t[1]=e=>m.goToPrevious())},{default:(0,a.Ql)((()=>[(0,a.K2)(g,{anchor:"bottom middle",self:"top middle"},{default:(0,a.Ql)((()=>[(0,a.mY)(" Previous week ")])),_:1})])),_:1})]),(0,a.QD)("div",c,[(0,a.K2)(y,{modelValue:p.dateRangeFilter.value,"onUpdate:modelValue":[t[2]||(t[2]=e=>p.dateRangeFilter.value=e),t[3]||(t[3]=e=>m.setDateRange(e))],field:p.dateRangeFilter,style:{width:"246px"}},null,8,["modelValue","field"]),(0,a.QD)("div",u,[(0,a.QD)("div",null,(0,n.WA)(m.dynamicListTitle),1)])]),(0,a.QD)("div",null,[(0,a.K2)(h,{"text-color":"primary",class:"q-mr-sm",size:"sm",unelevated:"",round:"",icon:"fa-regular fa-chevron-right",onClick:t[4]||(t[4]=e=>m.goToNext())},{default:(0,a.Ql)((()=>[(0,a.K2)(g,{anchor:"bottom middle",self:"top middle"},{default:(0,a.Ql)((()=>[(0,a.mY)(" Next week ")])),_:1})])),_:1})])])])),_:1},8,["listData"])):(0,a.g1)("",!0)]),(0,a.K2)(w,{visible:p.loading},null,8,["visible"])])}var p={id:"componentDynamicList"},m={id:"backend-page"},f={class:"q-my-md"},v={key:2,class:(0,n.WN)("row text-primary text-weight-bold ellipsis title-content items-center")},g={key:0,id:"titleCrudTable"};function h(e,t,i,o,r,l){var s=(0,a.E1)("page-actions"),c=(0,a.E1)("crud"),u=(0,a.E1)("dynamicFilter"),d=(0,a.E1)("dynamicTable");return(0,a.Wz)(),(0,a.An)("div",p,[(0,a.QD)("div",m,[(0,a.QD)("div",f,[e.loadPageActions?((0,a.Wz)(),(0,a.Az)(s,{key:0,"extra-actions":e.tableActions,title:e.title,help:e.help,"expires-in":e.expiresIn,dynamicFilter:e.dynamicFilter,dynamicFilterValues:e.dynamicFilterValues,dynamicFilterSummary:e.dynamicFilterSummary,onToggleDynamicFilterModal:e.toggleDynamicFilterModal,onNew:t[0]||(t[0]=function(){e.$refs.crudComponent.create()}),onSearch:t[1]||(t[1]=function(t){return e.search(t)}),onRefresh:t[2]||(t[2]=function(t){return e.getData({pagination:{page:1}},!0)})},null,8,["extra-actions","title","help","expires-in","dynamicFilter","dynamicFilterValues","dynamicFilterSummary","onToggleDynamicFilterModal"])):(0,a.g1)("",!0),(0,a.K2)(c,{ref:"crudComponent","crud-data":e.crudData,type:null,onCreated:t[3]||(t[3]=function(t){return e.getData({page:1},!0)}),onDeleted:t[4]||(t[4]=function(t){return e.getData({page:1},!0)})},null,8,["crud-data"]),e.dynamicFilter?((0,a.Wz)(),(0,a.Az)(u,{key:1,systemName:e.systemName,modelValue:e.showDynamicFilterModal,filters:e.dynamicFilter,onShowModal:t[5]||(t[5]=function(t){return e.showDynamicFilterModal=!0}),onHideModal:t[6]||(t[6]=function(t){return e.showDynamicFilterModal=!1}),"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.updateDynamicFilterValues(t)}),"onUpdate:summary":t[8]||(t[8]=function(t){return e.dynamicFilterSummary=t})},null,8,["systemName","modelValue","filters"])):(0,a.g1)("",!0),e.loadPageActions?(0,a.g1)("",!0):((0,a.Wz)(),(0,a.An)("div",v,[e.title?((0,a.Wz)(),(0,a.An)("label",g,(0,n.WA)(e.title),1)):(0,a.g1)("",!0)])),(0,a.oF)(e.$slots,"top-table"),(0,a.K2)(d,{tableProps:e.tableProps,columns:e.columns,rows:e.rows,actions:e.actions,initialPagination:e.pagination,loading:e.loading,beforeUpdate:e.beforeUpdate,onOnPagination:t[9]||(t[9]=function(t){return e.setPagination(t)}),onUpdateRow:t[10]||(t[10]=function(t){return e.updateRow(t)})},null,8,["tableProps","columns","rows","actions","initialPagination","loading","beforeUpdate"])])])])}var y=i(75836),b=i(20584);const w={getData:function(e,t,i){return void 0===t&&(t=!1),void 0===i&&(i={}),new Promise((function(a,n){var o={refresh:t,params:i};b.c.index(e,o).then((function(e){a(e)})).catch((function(e){return n(e)}))}))},updateItem:function(e,t,i,a){return void 0===a&&(a={params:{}}),new Promise((function(n,o){b.c.update(e,t,i,a).then((function(e){n(e)})).catch((function(e){return o(e)}))}))},showItem:function(e,t,i){return void 0===i&&(i={}),new Promise((function(a,n){b.c.show(e,t,i).then((function(e){a(e)})).catch((function(e){return n(e)}))}))}};var D=i(8932),k=function(){return k=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},k.apply(this,arguments)},P=function(e,t,i,a){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function r(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?i(e.value):n(e.value).then(r,l)}s((a=a.apply(e,t||[])).next())}))},x=function(e,t){var i,a,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(i)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(r=0)),r)try{if(i=1,a&&(n=2&l[0]?a["return"]:l[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,l[1])).done)return n;switch(a=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(6===l[0]&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(s){l=[6,s],a=0}finally{i=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function $(e,t){(0,a._S)().appContext.config.globalProperties;var i={},n=(0,y.cB)({loading:!1,columns:[],rows:[],loadPageActions:!1,requestParams:{},showModal:!1,expiresIn:null,showDynamicFilterModal:!1,dynamicFilterValues:{},dynamicFilterSummary:{},pagination:{page:1,rowsNumber:"",rowsPerPage:10,descending:!0}}),o={hasPermission:(0,a.S6)((function(){var t,i,a,n,o,r,l,s;return{create:!(null===(t=e.listData)||void 0===t?void 0:t.permission)||D.is.hasAccess("".concat(null===(i=e.listData)||void 0===i?void 0:i.permission,".create")),index:!(null===(a=e.listData)||void 0===a?void 0:a.permission)||D.is.hasAccess("".concat(null===(n=e.listData)||void 0===n?void 0:n.permission,".index")),edit:!(null===(o=e.listData)||void 0===o?void 0:o.permission)||D.is.hasAccess("".concat(null===(r=e.listData)||void 0===r?void 0:r.permission,".edit")),destroy:!(null===(l=e.listData)||void 0===l?void 0:l.permission)||D.is.hasAccess("".concat(null===(s=e.listData)||void 0===s?void 0:s.permission,".destroy"))}})),beforeUpdate:(0,a.S6)((function(){var t;return(null===(t=e.listData)||void 0===t?void 0:t.beforeUpdate)||!1})),title:(0,a.S6)((function(){var t;return(null===(t=null===e||void 0===e?void 0:e.listData)||void 0===t?void 0:t.read.title)||!1})),help:(0,a.S6)((function(){var t;return(null===(t=null===e||void 0===e?void 0:e.listData)||void 0===t?void 0:t.read.help)||!1})),actions:(0,a.S6)((function(){var t;return(null===(t=null===e||void 0===e?void 0:e.listData)||void 0===t?void 0:t.actions)||!1})),tableProps:(0,a.S6)((function(){var t,i;return(null===(i=null===(t=null===e||void 0===e?void 0:e.listData)||void 0===t?void 0:t.read)||void 0===i?void 0:i.tableProps)||null})),tableActions:(0,a.S6)((function(){var t,i,a=[];return!1!==e.listData.read.search&&a.push("search"),e.listData.create&&o.hasPermission.value["create"]&&a.push("new"),(null===(i=null===(t=e.listData)||void 0===t?void 0:t.extraActions)||void 0===i?void 0:i.length)>0&&a.push.apply(a,e.listData.extraActions),a.filter((function(e){return!e.vIfAction}))})),dynamicFilter:(0,a.S6)((function(){var t,i,a;return(null===(t=e.listData.read)||void 0===t?void 0:t.filters)&&Object.keys(null===(i=e.listData.read)||void 0===i?void 0:i.filters).length>0?null===(a=e.listData.read)||void 0===a?void 0:a.filters:{}})),systemName:(0,a.S6)((function(){var t,i,a;return(null===(t=e.listData.read)||void 0===t?void 0:t.systemName)||(null===(i=e.listData)||void 0===i?void 0:i.permission)||(null===(a=e.listData)||void 0===a?void 0:a.entityName)}))},r={init:function(){return P(this,void 0,void 0,(function(){return x(this,(function(e){switch(e.label){case 0:return[4,r.setPageActions()];case 1:return e.sent(),[4,r.setColumns()];case 2:return e.sent(),dynamicFilter||r.getData({pagination:{page:1}},!0),[2]}}))}))},setPageActions:function(){var t;(null===(t=e.listData)||void 0===t?void 0:t.read.filters)&&(n.loadPageActions=!0)},search:function(t){t?n.requestParams.filter={search:t}:n.requestParams=k({},e.listData.read.requestParams),n.requestParams["filter"]=k(k({},n.requestParams["filter"]),n.dynamicFilterValues),n.pagination.page=1,n.pagination.take=10,r.getData()},setColumns:function(){n.columns=e.listData.read.columns,n.columns.forEach((function(e){e["isEditable"]=o.hasPermission.value["edit"]&&e.hasOwnProperty("dynamicField")}))},setPagination:function(e){var t=e.rowsPerPage>n.pagination.rowsNumber;n.pagination=k(k({},n.pagination),e),t&&r.getData()},getData:function(i,a){var o,r,l,s,c,u;return void 0===i&&(i=!1),void 0===a&&(a=!1),P(this,void 0,void 0,(function(){var d;return x(this,(function(p){return(null===(r=null===(o=e.listData.read)||void 0===o?void 0:o.requestParams)||void 0===r?void 0:r.include)&&(n.requestParams.include=e.listData.read.requestParams.include),n.requestParams.filter=k(k(k({},(null===(l=n.requestParams)||void 0===l?void 0:l.filter)||{}),(null===(c=null===(s=e.listData.read)||void 0===s?void 0:s.requestParams)||void 0===c?void 0:c.filter)||{}),n.dynamicFilterValues),n.requestParams["page"]=(null===i||void 0===i?void 0:i.page)||n.pagination.page,n.requestParams["take"]=n.pagination.rowsPerPage,d=(null===(u=n.pagination)||void 0===u?void 0:u.sortBy)||"id",n.requestParams.filter.order={field:d,way:void 0!=n.pagination.descending?n.pagination.descending?"desc":"asc":"desc"},n.loading=!0,w.getData(e.listData.apiRoute,a,n.requestParams).then((function(e){n.expiresIn=null===e||void 0===e?void 0:e.expiresIn,(null===e||void 0===e?void 0:e.data)&&(n.rows=e.data,n.loading=!1,n.pagination.page=(0,D.ct)(null===e||void 0===e?void 0:e.meta.page.currentPage),n.pagination.rowsNumber=(0,D.ct)(null===e||void 0===e?void 0:e.meta.page.total),n.pagination.rowsPerPage=(0,D.ct)(n.pagination.rowsPerPage),n.pagination.descending=(0,D.ct)(n.pagination.descending),t("dataLoaded",e.data))})),[2]}))}))},updateRow:function(i){var a=n.rows.findIndex((function(e){return e.id==i.id}));n.rows[a]["isLoading"]=!0,w.updateItem(e.listData.apiRoute,i.id,i).then((function(o){var r;if(null===o||void 0===o?void 0:o.data){var l=(null===(r=e.listData.read)||void 0===r?void 0:r.requestParams)?k({},e.listData.read.requestParams):{};w.showItem(e.listData.apiRoute,i.id,{params:l}).then((function(e){n.rows[a]=e.data,n.rows[a]["isLoading"]=!1})),t("updatedRow",o.data)}}))},toggleDynamicFilterModal:function(){n.showDynamicFilterModal=!n.showDynamicFilterModal},updateFilter:function(e,t){n.dynamicFilterValues[e]=t},updateDynamicFilterValues:function(e){n.dynamicFilterValues=e,n.requestParams.filter=n.dynamicFilterValues,n.pagination.page=1,r.getData()}};return(0,a.u2)((function(){r.init()})),k(k(k(k({},i),(0,y.kx)(n)),o),r)}var q=i(264),Q={id:"dynamic-table"},A={key:1},F={class:"col-12 q-ml-sm q-mr-lg flex flex-center"},R={class:"flex items-center"},z={class:"flex items-center tw-mr-4 text-blue-grey"},W={class:"sm:tw-text-sm"},M={class:"sm:tw-text-sm"},C={class:"actionsBtnPag"},E=(0,a.QD)("i",{class:"fa-solid fa-chevron-left"},null,-1),I=(0,a.QD)("i",{class:"fa-solid fa-chevron-right"},null,-1);function S(e,t,i,o,r,l){var s=(0,a.E1)("q-inner-loading"),c=(0,a.E1)("contextMenu"),u=(0,a.E1)("editablePopup"),d=(0,a.E1)("btn-menu"),p=(0,a.E1)("contentType"),m=(0,a.E1)("q-td"),f=(0,a.E1)("q-tr"),v=(0,a.E1)("q-pagination"),g=(0,a.E1)("q-select"),h=(0,a.E1)("q-btn"),y=(0,a.E1)("q-table");return(0,a.Wz)(),(0,a.An)("div",Q,[(0,a.K2)(y,(0,a.Gu)(e.tableProps,{title:e.title,loading:e.loading,rows:e.rows,columns:e.columns,"row-key":"name",pagination:e.pagination,"onUpdate:pagination":t[5]||(t[5]=function(t){return e.pagination=t}),"hide-pagination":"",onRequest:t[6]||(t[6]=function(){console.log("request")})}),{loading:(0,a.Ql)((function(){return[(0,a.K2)(s,{showing:"",color:"primary"})]})),body:(0,a.Ql)((function(i){return[(0,a.K2)(f,{props:i},{default:(0,a.Ql)((function(){return[(0,a.K2)(c,{actions:e.actions,"action-data":i.row},null,8,["actions","action-data"]),((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(i.cols,(function(o){var r;return(0,a.Wz)(),(0,a.Az)(m,{key:o.name,props:i,class:(0,n.WN)("".concat((null===o||void 0===o?void 0:o.dynamicField)&&!(null===(r=i.row)||void 0===r?void 0:r.isLoading)?"cursor-pointer":""))},{default:(0,a.Ql)((function(){var n;return["actions"!=o.name&&i.row[o.name]&&(null===o||void 0===o?void 0:o.dynamicField)&&!(null===(n=i.row)||void 0===n?void 0:n.isLoading)?((0,a.Wz)(),(0,a.Az)(u,{key:0,row:i.row,col:o,beforeUpdate:e.beforeUpdate,onUpdateRow:t[0]||(t[0]=function(t){return e.$emit("updateRow",t)})},null,8,["row","col","beforeUpdate"])):(0,a.g1)("",!0),"actions"==o.name?((0,a.Wz)(),(0,a.An)("div",A,[(0,a.K2)(d,{actions:e.actions,"action-data":i.row},null,8,["actions","action-data"])])):(0,a.g1)("",!0),"actions"!=o.name?((0,a.Wz)(),(0,a.Az)(p,{key:2,col:o,row:i.row},null,8,["col","row"])):(0,a.g1)("",!0)]})),_:2},1032,["props","class"])})),128))]})),_:2},1032,["props"])]})),bottom:(0,a.Ql)((function(i){return[(0,a.QD)("div",{class:(0,n.WN)("bottonCrud full-width flex items-center ".concat("mobile"==e.windowSize?"justify-center":"justify-between"))},[(0,a.QD)("div",{class:(0,n.WN)(["sm:tw-text-sm","text-blue-grey ".concat("mobile"==e.windowSize?"q-mb-sm":""," ")])},[(0,a.mY)((0,n.WA)(e.$tr("isite.cms.label.showing"))+" ",1),(0,a.QD)("b",null,(0,n.WA)(e.countPage(i)),1),(0,a.mY)(" "+(0,n.WA)(e.$trp("isite.cms.label.entry")),1)],2),(0,a.QD)("div",F,[e.showPagination(i)?((0,a.Wz)(),(0,a.Az)(v,{key:0,id:"crudPaginationComponent",modelValue:e.pagination.page,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.pagination.page=t}),value:i.pagination,onClick:t[2]||(t[2]=(0,q.Y7)((function(){return e.$emit("onPagination",e.pagination)}),["prevent"])),round:"","input-class":"no-shadow",color:"while","text-color":"primary","active-color":"primary","active-text-color":"white",max:i.pagesNumber,"max-pages":6,ellipses:!1,"boundary-numbers":!1,unelevated:""},null,8,["modelValue","value","max"])):(0,a.g1)("",!0)]),(0,a.QD)("div",R,[(0,a.QD)("div",z,[(0,a.QD)("span",W,(0,n.WA)(e.$tr("isite.cms.label.show")),1),(0,a.K2)(g,{modelValue:e.pagination.rowsPerPage,"onUpdate:modelValue":[t[3]||(t[3]=function(t){return e.pagination.rowsPerPage=t}),t[4]||(t[4]=function(t){return e.$emit("onPagination",e.pagination)})],options:e.rowsPerPageOption,"options-cover":"",dense:"",class:"q-mx-sm text-caption",outlined:""},null,8,["modelValue","options"]),(0,a.QD)("span",M,(0,n.WA)(e.$trp("isite.cms.label.entry")),1)]),(0,a.QD)("div",C,[(0,a.K2)(h,{color:"primary",class:"tw-mr-2",dense:"",size:"14px",round:"",flat:"",disable:i.isFirstPage,onClick:i.prevPage},{default:(0,a.Ql)((function(){return[E]})),_:2},1032,["disable","onClick"]),(0,a.K2)(h,{color:"primary",dense:"",size:"14px",round:"",flat:"",disable:i.isLastPage,onClick:i.nextPage},{default:(0,a.Ql)((function(){return[I]})),_:2},1032,["disable","onClick"])])])],2)]})),_:1},16,["title","loading","rows","columns","pagination"])])}var T=function(){return T=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},T.apply(this,arguments)};function O(e,t){(0,a._S)().appContext.config.globalProperties;var i={pagination:(0,y.IL)({page:1,rowsPerPage:10,descending:!0})},n=(0,y.cB)({}),o={rowsPerPageOption:(0,a.S6)((function(){return[5,10,20,50,100,300,500]}))},r={countPage:function(t){var i=t.pagination.page,a=t.pagination.rowsPerPage,n=e.initialPagination.rowsNumber,o=e.initialPagination.rowsNumber,r=1==i?1:i*a-(a-(i-1)<=0?1:a-(i-1)),l=n<a?o:i*a;return"".concat(r," - ").concat(l," ").concat(D._s.tr("isite.cms.label.of")," ").concat(o)}};return(0,a.u2)((function(){})),T(T(T(T({},i),(0,y.kx)(n)),o),r)}var V={class:"q-py-sm"},_={class:"row justify-center q-gutter-sm"};function U(e,t,i,o,r,l){var s,c,u=(0,a.E1)("dynamic-field"),d=(0,a.E1)("q-btn"),p=(0,a.E1)("q-form"),m=(0,a.E1)("q-popup-edit");return(null===(s=e.col)||void 0===s?void 0:s.isEditable)&&(null===(c=e.col)||void 0===c?void 0:c.dynamicField)?((0,a.Wz)(),(0,a.Az)(m,{key:0,ref:"popupEditRef",modelValue:e.row[e.col.name],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.row[e.col.name]=t}),"no-caps":"",cover:!1,anchor:"bottom start","transition-show":"fade-in","transition-hide":"fade-out"},{default:(0,a.Ql)((function(i){return[(0,a.K2)(p,{autocorrect:"off",autocomplete:"off",ref:"formContent",onSubmit:function(t){return e.runBeforeUpdate(i)},onValidationError:t[1]||(t[1]=function(t){return e.$alert.error(e.$tr("isite.cms.message.formInvalid"))})},{default:(0,a.Ql)((function(){return[(0,a.QD)("p",null,"Update "+(0,n.WA)(e.col.label)+" Id: "+(0,n.WA)(e.row.id),1),(0,a.QD)("div",V,[e.isSelectField?((0,a.Wz)(),(0,a.Az)(u,{key:0,modelValue:i.value.id,"onUpdate:modelValue":function(e){return i.value.id=e},field:e.col["dynamicField"],enableCache:!0},null,8,["modelValue","onUpdate:modelValue","field"])):((0,a.Wz)(),(0,a.Az)(u,{key:1,modelValue:i.value,"onUpdate:modelValue":function(e){return i.value=e},field:e.col["dynamicField"],enableCache:!0},null,8,["modelValue","onUpdate:modelValue","field"])),(0,a.QD)("div",_,[(0,a.K2)(d,{label:"Close","no-caps":"",unelevated:"",rounded:"",onClick:(0,q.Y7)(i.cancel,["stop","prevent"])},null,8,["onClick"]),(0,a.K2)(d,{label:"Update","no-caps":"",unelevated:"",rounded:"",onClick:t[0]||(t[0]=function(t){return e.$refs.formContent.submit()}),disable:!1===i.validate(i.value)||i.initialValue===i.value},null,8,["disable"])])])]})),_:2},1032,["onSubmit"])]})),_:1},8,["modelValue"])):(0,a.g1)("",!0)}var L=function(){return L=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},L.apply(this,arguments)},N=function(e,t,i,a){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function r(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?i(e.value):n(e.value).then(r,l)}s((a=a.apply(e,t||[])).next())}))},K=function(e,t){var i,a,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(i)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(r=0)),r)try{if(i=1,a&&(n=2&l[0]?a["return"]:l[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,l[1])).done)return n;switch(a=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(6===l[0]&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(s){l=[6,s],a=0}finally{i=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function Y(e,t){var i={},n=(0,y.cB)({dynamicModel:null}),o={isSelectField:(0,a.S6)((function(){return"select"==e.col.dynamicField.type})),fieldName:(0,a.S6)((function(){var t;return(null===(t=e.col.dynamicField)||void 0===t?void 0:t.name)?e.col.dynamicField.name:e.col.name}))},r={runBeforeUpdate:function(i){return N(this,void 0,void 0,(function(){var a,n;return K(this,(function(r){switch(r.label){case 0:return a=!0,n=L({},e.row),n[o.fieldName.value]=o.isSelectField.value?i.value.id:i.value,e.beforeUpdate?[4,e.beforeUpdate(n).then((function(e){i.set(),t("updateRow",n)})).catch((function(e){i.value=i.initialValue,a=!1}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,a]}}))}))}};return(0,a.u2)((function(){})),L(L(L(L({},i),(0,y.kx)(n)),o),r)}const j=(0,a._M)({props:{row:{type:Object,default:null},col:{type:Object,default:null},beforeUpdate:{type:Function,default:function(){}}},setup:function(e,t){var i=t.emit;return Y(e,i)},components:{}});var B=i(68716),G=i(86742),H=i(14288),J=i(99140),X=i(95252),Z=i.n(X);const ee=(0,B.c)(j,[["render",U]]),te=ee;Z()(j,"components",{QPopupEdit:G.c,QForm:H.c,QBtn:J.c});var ie=["innerHTML"];function ae(e,t,i,o,r,l){var s,c=(0,a.E1)("q-skeleton");return(0,a.Wz)(),(0,a.An)("div",{style:(0,n.MN)(null===(s=e.col)||void 0===s?void 0:s.style)},[e.component?(0,a.wt)(((0,a.Wz)(),(0,a.Az)((0,a.mk)(e.component),{key:0,col:e.col,row:e.row,data:e.data},null,8,["col","row","data"])),[[q.Ub,!e.isLoading]]):(0,a.g1)("",!0),e.isComponent?(0,a.g1)("",!0):(0,a.wt)(((0,a.Wz)(),(0,a.An)("div",{key:1,class:"ellipsis",innerHTML:e.deleteHtml(e.data)},null,8,ie)),[[q.Ub,!e.isLoading]]),e.isLoading?((0,a.Wz)(),(0,a.Az)(c,{key:2,animated:"",type:"text"})):(0,a.g1)("",!0)],4)}var ne=function(){return ne=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},ne.apply(this,arguments)};function oe(e,t){var i={},n=(0,y.cB)({component:(0,y.kl)()}),o={data:(0,a.S6)((function(){var t;return(null===(t=e.col)||void 0===t?void 0:t.format)?e.col.format(e.row[e.col.name]):e.row[e.col.name]})),isComponent:(0,a.S6)((function(){var t;return(null===(t=e.col)||void 0===t?void 0:t.component)||!1})),isLoading:(0,a.S6)((function(){var t;return(null===(t=e.row)||void 0===t?void 0:t.isLoading)||!1})),showOnLoading:(0,a.S6)((function(){return o.isLoading.value&&"id"!=e.col.name}))},r={init:function(){r.loadComponent()},loadComponent:function(){o.isComponent.value&&(n.component=(0,y.Md)(e.col.component))}};return(0,a.u2)((function(){r.init()})),ne(ne(ne(ne({},i),(0,y.kx)(n)),o),r)}const re=(0,a._M)({props:{col:{default:[]},row:{default:[]}},setup:function(e,t){var i=t.emit;return oe(e,i)},computed:{deleteHtml:function(){return function(e){return e?"string"===typeof e?e.replace(/<[^>]+>/g,""):e:""}}}});var le=i(39692);const se=(0,B.c)(re,[["render",ae]]),ce=se;Z()(re,"components",{QSkeleton:le.cp});var ue={class:"row items-center text-blue-grey"};function de(e,t,i,o,r,l){var s=(0,a.E1)("q-icon"),c=(0,a.E1)("q-item-section"),u=(0,a.E1)("q-item"),d=(0,a.E1)("q-list"),p=(0,a.E1)("q-menu"),m=(0,a.iS)("close-popup");return(0,a.Wz)(),(0,a.Az)(p,{"touch-position":"","context-menu":"","max-width":"200px",class:"btn-menu-component__menu",anchor:"bottom right",self:"top right"},{default:(0,a.Ql)((function(){return[(0,a.K2)(d,{dense:"",separator:""},{default:(0,a.Ql)((function(){return[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(e.actions,(function(t,i){return(0,a.wt)(((0,a.Wz)(),(0,a.Az)(u,(0,a.Gu)(t.props,{onClick:function(i){return e.runAction(t)}}),{default:(0,a.Ql)((function(){return[(0,a.K2)(c,null,{default:(0,a.Ql)((function(){return[(0,a.QD)("div",ue,[(0,a.K2)(s,{name:t.icon,color:"blue-grey",size:"16px"},null,8,["name"]),(0,a.mY)("   "+(0,n.WA)(t.label||t.tooltip),1)])]})),_:2},1024)]})),_:2},1040,["onClick"])),[[m]])})),256))]})),_:1})]})),_:1})}var pe=function(e,t,i,a){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,o){function r(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?i(e.value):n(e.value).then(r,l)}s((a=a.apply(e,t||[])).next())}))},me=function(e,t){var i,a,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(e){return function(t){return s([e,t])}}function s(l){if(i)throw new TypeError("Generator is already executing.");while(o&&(o=0,l[0]&&(r=0)),r)try{if(i=1,a&&(n=2&l[0]?a["return"]:l[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,l[1])).done)return n;switch(a=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(6===l[0]&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(s){l=[6,s],a=0}finally{i=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};const fe=(0,a._M)({props:{actions:{default:[]},actionData:{default:[]}},methods:{runAction:function(e){return pe(this,void 0,void 0,(function(){var t;return me(this,(function(i){switch(i.label){case 0:return t=this.$clone(this.actionData||{}),e.action?[4,e.action(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}}});var ve=i(93832),ge=i(99588),he=i(84884),ye=i(11032),be=i(58120),we=i(81020);const De=(0,B.c)(fe,[["render",de]]),ke=De;Z()(fe,"components",{QMenu:ve.c,QList:ge.c,QItem:he.c,QItemSection:ye.c,QIcon:be.c}),Z()(fe,"directives",{ClosePopup:we.c});const Pe=(0,a._M)({props:{tableProps:{default:null},loading:{default:!1},title:{default:""},columns:{default:[]},rows:{default:[]},actions:{default:[]},initialPagination:{default:[]},beforeUpdate:{type:Function,default:function(){}}},components:{editablePopup:te,contextMenu:ke,contentType:ce},setup:function(e,t){var i=t.emit;return O(e,i)},computed:{windowSize:function(){return window.innerWidth>="500"?"desktop":"mobile"}},methods:{showPagination:function(e){return"desktop"==this.windowSize&&e.pagesNumber>1}}});var xe=i(40792),$e=i(23372),qe=i(45144),Qe=i(50213),Ae=i(15496),Fe=i(36008);const Re=(0,B.c)(Pe,[["render",S]]),ze=Re;Z()(Pe,"components",{QTable:xe.c,QInnerLoading:$e.c,QTr:qe.c,QTd:Qe.c,QPagination:Ae.c,QSelect:Fe.c,QBtn:J.c});var We=i(47904),Me=i(1436);const Ce=(0,a._M)({props:{listData:{apiRoute:{default:""},title:{default:""},columns:{default:[]},actions:{default:[]},permission:{default:""},requestParams:{default:{}},filters:{default:{}},help:{default:{}},pageActions:{default:!0},beforeUpdate:{type:Function,default:function(){}}}},components:{dynamicTable:ze,crudForm:We.c,dynamicFilter:Me.c},setup:function(e,t){var i=t.emit;return $(e,i)},computed:{crudData:function(){var e=this;return{default:{render:function(){},data:function(){return{crudId:this.$uid()}},computed:{crudData:function(){return e.listData},crudInfo:function(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}}}}},crud:function(){return this.$refs.crudComponent}},methods:{}}),Ee=(0,B.c)(Ce,[["render",h]]),Ie=Ee;Z()(Ce,"components",{QTable:xe.c,QBtn:J.c});var Se={class:"flex justify-center items-center",style:{width:"140px",height:"36px",padding:"8px"}},Te={class:"ellipsis"};function Oe(e,t,i,o,r,l){var s,c,u=(0,a.iS)("ripple");return e.data?(0,a.wt)(((0,a.Wz)(),(0,a.An)("div",{key:0,style:(0,n.MN)({"background-color":e.background,color:e.color})},[(0,a.QD)("div",Se,[(0,a.QD)("div",Te,[(null===(s=e.data)||void 0===s?void 0:s.icon)?((0,a.Wz)(),(0,a.An)("i",{key:0,class:(0,n.WN)(null===(c=e.data)||void 0===c?void 0:c.icon)},null,2)):(0,a.g1)("",!0),(0,a.mY)("  "+(0,n.WA)(e.data.title),1)])])],4)),[[u]]):(0,a.g1)("",!0)}const Ve=(0,a._M)({props:{row:{default:{}},col:{default:{}},data:{default:{}}},computed:{background:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.color)?this.data.color:"#000000"},color:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.color)?"#ffffff":"#000000"}}});var _e=i(85220);const Ue=(0,B.c)(Ve,[["render",Oe]]),Le=Ue;Z()(Ve,"directives",{Ripple:_e.c});var Ne={class:"flex justify-center items-center",style:{width:"140px",height:"36px",padding:"8px"}},Ke={class:"ellipsis"};function Ye(e,t,i,o,r,l){var s,c,u=(0,a.iS)("ripple");return e.data?(0,a.wt)(((0,a.Wz)(),(0,a.An)("div",{key:0,style:(0,n.MN)({"background-color":e.background,color:e.color})},[(0,a.QD)("div",Ne,[(0,a.QD)("div",Ke,[(null===(s=e.data)||void 0===s?void 0:s.icon)?((0,a.Wz)(),(0,a.An)("i",{key:0,class:(0,n.WN)(null===(c=e.data)||void 0===c?void 0:c.icon)},null,2)):(0,a.g1)("",!0),(0,a.mY)("  "+(0,n.WA)(e.data.title),1)])])],4)),[[u]]):(0,a.g1)("",!0)}const je=(0,a._M)({props:{row:{default:{}},col:{default:{}},data:{default:{}}},computed:{background:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.color)?this.data.color:"#000000"},color:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.color)?"#ffffff":"#000000"}}}),Be=(0,B.c)(je,[["render",Ye]]),Ge=Be;Z()(je,"directives",{Ripple:_e.c});var He={key:0};function Je(e,t,i,o,r,l){var s=(0,a.E1)("q-tooltip"),c=(0,a.E1)("q-chip");return e.data?((0,a.Wz)(),(0,a.An)("div",He,[(0,a.K2)(c,{outline:"","text-color":"white",color:e.state.color,class:"q-py-none",size:"14px"},{default:(0,a.Ql)((function(){var t;return[(null===(t=e.state)||void 0===t?void 0:t.icon)?((0,a.Wz)(),(0,a.An)("i",{key:0,class:(0,n.WN)(e.state.icon)},null,2)):(0,a.g1)("",!0),(0,a.mY)("  "+(0,n.WA)(e.date)+" ",1),(0,a.K2)(s,null,{default:(0,a.Ql)((function(){return[(0,a.mY)((0,n.WA)(e.data),1)]})),_:1})]})),_:1},8,["color"])])):(0,a.g1)("",!0)}var Xe=i(49456),Ze=i.n(Xe),et="YYYY/MM/DD",tt={notExpired:{color:"gray",icon:""},expired:{color:"red",icon:"fa-regular fa-calendar-circle-exclamation"}};const it=(0,a._M)({props:{row:{default:{}},col:{default:{}},data:{default:{}}},computed:{state:function(){return Ze()().format(et)>Ze()(this.data).format(et)?tt.expired:tt.notExpired},date:function(){return Ze()(this.data).format("MMM D")}}});var at=i(84256),nt=i(90111);const ot=(0,B.c)(it,[["render",Je]]),rt=ot;function lt(e,t,i,o,r,l){var s=(0,a.E1)("q-avatar");return(0,a.Wz)(),(0,a.An)("div",null,[(0,a.K2)(s,{class:"q-py-none",size:"28px",color:"grey","text-color":"white"},{default:(0,a.Ql)((function(){return[(0,a.mY)((0,n.WA)(e.diff.days),1)]})),_:1})])}Z()(it,"components",{QChip:at.c,QTooltip:nt.c});var st="YYYY/MM/DD";const ct=(0,a._M)({props:{row:{default:{}},col:{default:{}}},computed:{diff:function(){Ze()(this.row.startDate,st),Ze()(this.row.endDate,st);return D.tV.getDiff(this.row.startDate,this.row.endDate)}}});var ut=i(11252);const dt=(0,B.c)(ct,[["render",lt]]),pt=dt;Z()(ct,"components",{QAvatar:ut.c});const mt="YYYY/MM/DD",ft={props:{},components:{dynamicList:Ie,statusComponent:Le,priorityComponent:Ge},watch:{},mounted(){this.$nextTick((function(){}))},data(){return{tabs:[{value:"table",label:"Table"},{value:"backlog",label:"Backlog"}],tabModel:"table",date:{from:Ze()().startOf("week").format(mt),to:Ze()().endOf("week").format(mt)},dateRangeFilter:{value:{type:"customRange",from:Ze()().startOf("week").format(mt),to:Ze()().endOf("week").format(mt)},type:"dateRange",props:{label:"Date",clearable:!1,removeTime:!0,autoClose:!0}},loading:!1,listData:{apiRoute:"apiRoutes.qtask.tasks",permission:"itask.tasks",search:!0,create:{title:"New Task"},read:{title:"Task Management",showAs:"custom",tableProps:{dense:!0},columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",style:""},{name:"title",label:this.$tr("isite.cms.form.title"),field:"title",align:"rigth",style:"max-width: 200px;width: 200px;",dynamicField:{value:"",type:"input",props:{label:`${this.$tr("isite.cms.form.title")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}},{name:"assignedTo",label:this.$tr("itask.cms.form.assigned"),field:"assignedTo",align:"left",format:e=>e&&(e.firstName||e.lastName)?`${e.firstName} ${e.lastName}`:"-",dynamicField:{value:[],type:"select",name:"assignedToId",props:{label:this.$tr("itask.cms.form.assigned"),useInput:!0,clearable:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.quser.users",select:{label:"email",id:e=>`${e.id}`}}}},{name:"startDate",label:this.$tr("isite.cms.form.startDate"),field:"startDate",align:"center",classes:"padding-none",headerClasess:"padding-none",component:rt,dynamicField:{value:"",type:"date",props:{label:this.$tr("isite.cms.form.startDate")}}},{name:"endDate",label:this.$tr("isite.cms.form.endDate"),field:"endDate",align:"center",classes:"padding-none",headerClasess:"padding-none",component:rt,dynamicField:{value:"",type:"date",props:{label:this.$tr("isite.cms.form.endDate")}}},{name:"days",label:"days",field:"days",align:"center",classes:"padding-none",headerClasess:"padding-none",component:pt},{name:"status",label:this.$tr("isite.cms.form.status"),field:"status",align:"center",classes:"padding-none",headerClasess:"padding-none",component:Le,dynamicField:{type:"select",name:"statusId",props:{label:this.$tr("isite.cms.form.status"),useInput:!0,clearable:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.statuses",select:{label:"title",id:e=>`${e.id}`}}}},{name:"priority",label:this.$tr("itask.cms.form.priority"),field:"priority",align:"center",classes:"padding-none",headerClasess:"padding-none",component:Ge,dynamicField:{value:[],type:"select",name:"priorityId",props:{label:this.$tr("itask.cms.form.priority"),useInput:!0,clearable:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.priorities",select:{label:"title",id:e=>`${e.id}`}}}},{name:"description",label:this.$tr("isite.cms.form.description"),field:"description",align:"left",style:"max-width: 300px;",dynamicField:{name:"description",value:"",type:"html",props:{label:`${this.$tr("isite.cms.form.description")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}},{name:"estimatedTime",label:this.$tr("itask.cms.form.estimatedTime"),field:"estimatedTime",align:"center"},{name:"category",label:this.$tr("isite.cms.form.category"),align:"left",field:"category",sortable:!0,format:e=>e&&e?.title?e.title:"-",dynamicField:{value:[],type:"select",name:"categoryId",props:{label:this.$tr("isite.cms.form.category"),useInput:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.categories",select:{label:"title",id:e=>`${e.id}`}}}},{name:"timeLogs",label:"Time Logs",field:"timeLogs",align:"left",format:e=>e?this.$trd(e):"-"},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"center"}],requestParams:{include:"category,status,priority,timelogs,assignedTo",filter:{rangeDate:{from:Ze()().startOf("week").format(mt),to:Ze()().endOf("week").format(mt)}}},filters:{assignedToId:{value:[],type:"select",props:{label:this.$tr("itask.cms.form.assigned"),useInput:!0,clearable:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.quser.users",select:{label:"email",id:e=>`${e.id}`}}},priorityId:{value:[],type:"select",props:{label:this.$tr("itask.cms.form.priority"),useInput:!0,clearable:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.priorities",select:{label:"title",id:e=>`${e.id}`}}},categoryId:{value:[],type:"select",props:{label:this.$tr("isite.cms.form.category"),useInput:!0,clearable:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.categories",select:{label:"title",id:e=>`${e.id}`}}},statusId:{value:[],type:"select",props:{label:this.$tr("isite.cms.form.status"),useInput:!0,clearable:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.statuses",select:{label:"title",id:e=>`${e.id}`}}}},help:{title:this.$tr("Dynamic table"),description:this.$tr("this is the dynamic table description")}},update:{title:"Update task"},formLeft:{id:{value:""},userId:{value:this.$store.state.quserAuth.userId},title:{value:"",type:"input",props:{label:`${this.$tr("isite.cms.form.title")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}},description:{name:"description",value:"",type:"html",props:{label:`${this.$tr("isite.cms.form.description")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}},formRight:{assignedToId:{value:[],type:"select",props:{label:this.$tr("itask.cms.form.assigned"),useInput:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.quser.users",select:{label:"email",id:e=>`${e.id}`}}},startDate:{value:"",type:"date",props:{label:this.$tr("isite.cms.form.startDate")}},endDate:{value:"",type:"date",props:{label:this.$tr("isite.cms.form.endDate")}},estimatedTime:{value:"",type:"input",props:{label:this.$tr("itask.cms.form.estimatedTime")}},priorityId:{value:[],type:"select",props:{label:this.$tr("itask.cms.form.priority"),useInput:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.priorities",select:{label:"title",id:e=>`${e.id}`}}},categoryId:{value:[],type:"select",props:{label:this.$tr("isite.cms.form.category"),useInput:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.categories",select:{label:"title",id:e=>`${e.id}`}}},statusId:{value:[],type:"select",props:{label:this.$tr("isite.cms.form.status"),useInput:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.qtask.statuses",select:{label:"title",id:e=>`${e.id}`}}}},beforeUpdate:e=>new Promise(((t,i)=>{""==e.description&&i(e),Ze()(e.startDate).format(mt)>Ze()(e.endDate).format(mt)?(this.$alert.error({message:"start date is bigger than end date"}),i(e)):t(e)})),actions:[{icon:"fa-light fa-pencil",name:"edit",sortOrder:99,color:"red",label:this.$tr("isite.cms.label.edit"),action:e=>{this.$refs.dynamicList.crud.update(e)}},{icon:"fa-light fa-trash-can",name:"delete",sortOrder:99,color:"red",label:this.$tr("isite.cms.label.delete"),action:e=>{this.$refs.dynamicList.crud.delete(e)}}]}}},computed:{dynamicListTitle(){const e=Ze()(this.date.from).format("MMM Do"),t=Ze()(this.date.to).format("MMM Do");return`Week:  ${e} - ${t}`}},methods:{setDate(e,t){this.date={from:e,to:t},this.dateRangeFilter.value={type:"customRange",from:e,to:t},this.listData.read.requestParams.filter["rangeDate"]=this.date,this.$refs.dynamicList.updateFilter("rangeDate",this.date),this.refreshDynamicList()},refreshDynamicList(){this.$refs.dynamicList.getData({pagination:{page:0}},!0)},goToPrevious(){const e=Ze()(this.date.from).subtract(1,"weeks").startOf("week").format(mt),t=Ze()(this.date.from).subtract(1,"weeks").endOf("week").format(mt);this.setDate(e,t)},goToNext(){const e=Ze()(this.date.from).add(1,"weeks").startOf("week").format(mt),t=Ze()(this.date.to).add(1,"weeks").endOf("week").format(mt);this.setDate(e,t)},setDateRange(e){if(null!=e&&e?.from&&e?.to){const t=Ze()(e.from).format(mt),i=Ze()(e.to).format(mt);t==this.date.from&&i==this.date.to||this.setDate(t,i)}}}};var vt=i(38788),gt=i(7628);const ht=(0,B.c)(ft,[["render",d]]),yt=ht;Z()(ft,"components",{QTabs:vt.c,QTab:gt.c,QBtn:J.c,QTooltip:nt.c})}}]);