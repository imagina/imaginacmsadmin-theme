(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[6249],{32240:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>n});var o=s(10372),a=e([o]);o=(a.then?(await a)():a)[0];const n={beforeRouteEnter(e,t,s){s((e=>e.fromVueRoute=t.name||!1))},components:{},data(){return{loading:!1,fromVueRoute:!1}},mounted(){this.loading=!0,this.$nextTick((async function(){await this.$store.dispatch("quserAuth/AUTH_LOGOUT"),this.loading=!1;const e=localStorage.getItem("userName");e&&await(0,o.c)().setUsername(e);const t=localStorage.getItem("socialType");t&&"microsoft"===t&&await(0,o.c)().signOut()}))},computed:{routeToLogin(){return this.fromVueRoute?{name:"auth.login",query:{fromVueRoute:this.fromVueRoute}}:{name:"auth.login"}}}};i()}catch(n){i(n)}}))},61764:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>r});var o=s(10372),a=s(26064),n=e([o]);o=(n.then?(await n)():n)[0];const r={components:{socialBtn:a.c},emits:["logged"],computed:{token(){return(0,o.c)().getToken()},socialData(){return(0,o.c)().getDataLogin()},microsoftClient(){return this.$getSetting("isite::microsoftClientId")||!1},loading(){return(0,o.c)().getLoading()},cancelLogin(){return(0,o.c)().getCancelLogin()}},methods:{async signIn(){this.loading||(await(0,o.c)().signIn(),this.cancelLogin||await this.$store.dispatch("quserAuth/AUTH_SOCIAL_NETWORK",{type:"microsoft",token:this.token,socialData:this.socialData}).then((e=>{this.$emit("logged"),localStorage.setItem("socialType","microsoft")})).catch((e=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest"))})))}}};i()}catch(r){i(r)}}))},31024:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>$});s(23816);var o=s(99088),a=s(40904),n=s(9172),r=s(17120),l=s(87952),c=s(6996),u=s(74392),d=s(18004),m=s(67692),h=s(15356),g=s(24045),p=s(16728),f=s(49456),w=s.n(f),y=(s(47507),s(18528)["c"]),b=e([c,g]);[c,g]=b.then?(await b)():b;const $={props:{},components:{loginForm:o.c,registerForm:a.c,resetPassword:n.c,forceChangePassword:l.c,logout:c.c,facebookAuth:m.c,googleAuth:h.c,resetPasswordComplete:r.c,microsoftAuth:g.c,masterModal:u.c,emailAuth:d.c},beforeRouteEnter(e,t,s){s((e=>e.fromVueRoute=t.name||!1))},mounted(){this.$nextTick((function(){sessionStorage.removeItem("msal.interaction.status"),sessionStorage.removeItem("socialType"),this.init()}))},data(){return{fromVueRoute:!1,appConfig:y("app")}},computed:{authType(){return this.$route.meta.authType},settings(){let e=this.$getMediaSetting("iprofile::authBanner"),t={logo:this.$store.state.qsiteApp.logo,authTitle:this.$getSetting("iprofile::authTitle"),hideLogo:parseInt(this.$getSetting("iprofile::hideLogo")),authBanner:!(!e.path||e.path.includes("defaultLogo.jpg"))&&e};return t},withAuthSocial(){let e=parseInt(this.$getSetting("iprofile::registerUsersWithSocialNetworks"));return e&&"logout"!=this.authType},microsoftClient(){return this.$getSetting("isite::microsoftClientId")},allowLocalLogin(){return Boolean(Number(this.$getSetting("iprofile::allowLocalLogin")))},modeAuthType(){return this.$store.getters["qsiteApp/getConfigApp"]("iprofile.authType")||"withPassword"}},methods:{init(){},checkAfterLogin(){this.checkTimeZone(),this.redirectAfterLogin()},checkTimeZone(){p.c.defaults.params.setting.timezone=w().tz.guess()},redirectAfterLogin(){let e=this.$route.query.redirectTo||!1,t=this.$store.state.quserAuth.settings,s=t?.workSpace||"iadmin";const i=window.location.href.replace(this.appConfig.mode,s);e||s==y("app.mode")?this.$router.push({name:"app.home"}):this.$helper.openExternalURL(i,!1)}}};i()}catch($){i($)}}))},10372:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>f});var o=s(75836),a=s(20584),n=s(48651),r=s(80884),l=s(93108),c=s(8932);const d={auth:{clientId:c.is.getSetting("isite::microsoftClientId"),authority:c.is.getSetting("iprofile::microsoftAuthUrl"),redirectUri:window.location.origin,postLogoutRedirectUri:window.location.origin},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,s)=>{if(!s)switch(e){case n.G.Error:return;case n.G.Info:return;case n.G.Verbose:return;case n.G.Warning:return}}},allowRedirectInIframe:!0}},m={scopes:c.is.getSetting("iprofile::microsoftScopeLogin")},h={scopes:["User.Read","Mail.Read"],forceRefresh:!1},g=(0,o.cB)({msalConfig:d,loginRequest:m,tokenRequest:h,username:null,token:null,loading:!1,cancelLogin:!0,cancelLogout:!1,dataLogin:{}}),p=new r.u(d);function f(){function e(){return g.msalConfig}function t(){return g.loginRequest}function s(){return g.tokenRequest}function i(){return g.cancelLogin}function o(e){g.cancelLogin=e}async function n(){try{o(!1),I();const e=await p.loginPopup(m);r(e),w(e.accessToken);const t=`${e.account.homeAccountId}-login.windows.net-refreshtoken-${d.auth.clientId}----`,s=JSON.parse(localStorage.getItem(t));e.refresh_token=s.secret||null,D(e),M()}catch(e){console.log(e),w(null),M(),o(!0),D({})}}function r(e){e?c(e.account.username):f()}function c(e){g.username=e,localStorage.setItem("userName",e)}async function u(){try{if(!g.username)return;await h();const e=p.getAccountByUsername(g.username);if(!e)return;const t={account:e,postLogoutRedirectUri:`${window.location.origin}#/auth/logout/`};await p.logoutRedirect(t)}catch(e){console.log(e)}}async function h(){try{return await p.ssoSilent(m)||null}catch(e){"InteractionRequiredAuthError"===e.name&&(localStorage.removeItem("socialType"),localStorage.removeItem("userName"))}}function f(){const e=p.getAllAccounts();0!==e.length&&(e.length>1?console.warn("Multiple accounts detected."):1===e.length&&(g.username=e[0].username))}function w(e){g.token=e}function y(){return g.token}function b(){a.c.index("apiRoutes.quser.authProviders",{refresh:!0}).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}function $(e){return e.account=p.getAccountByUsername(username),p.acquireTokenSilent(e).catch((t=>{if(console.warn("silent token acquisition fails. acquiring token using popup"),t instanceof l.uw)return p.acquireTokenPopup(e).then((e=>(console.log(e),e))).catch((e=>{console.error(e)}));console.warn(t)}))}function M(){g.loading=!1}function I(){g.loading=!0}function L(){return g.loading}function v(){return p.getAccountByUsername(g.username)}function D(e,t){g.dataLogin=e}function k(){return g.dataLogin}return{getMsalConfig:e,getLoginRequest:t,getTokenRequest:s,signIn:n,signOut:u,selectAccount:f,getToken:y,setToken:w,handleResponse:r,getAuthProvider:b,getTokenPopup:$,hideLoading:M,showLoading:I,getLoading:L,getCancelLogin:i,getAllAccounts:v,setDataLogin:D,getDataLogin:k,setUsername:c}}await p.initialize(),i()}catch(u){i(u)}}),1)},18004:(e,t,s)=>{"use strict";s.d(t,{c:()=>D});var i=s(92444),o=s(74044);const a={id:"formLoginEmailComponent"},n={key:0},r={class:"text-h6 text-center box-title"},l=["innerHTML"],c={class:"q-mt-xl text-center"},u={class:"text-body2"},d={class:"text-weight-bold"},m={class:"text-body2"},h={key:1},g={class:"text-justiy q-mb-md"},p={id:"formActions",class:"row full-width q-mb-md"};function f(e,t,s,f,w,y){const b=(0,i.E1)("q-btn"),$=(0,i.E1)("dynamic-field"),M=(0,i.E1)("q-spinner-oval"),I=(0,i.E1)("q-form");return(0,i.Wz)(),(0,i.An)("div",a,[w.sent?((0,i.Wz)(),(0,i.An)("div",n,[(0,i.QD)("div",null,[(0,i.QD)("div",r,(0,o.WA)(e.$tr("iprofile.cms.form.checkYourEmail")),1),(0,i.QD)("div",{class:"text-body2 text-justify q-mt-md",innerHTML:w.sentEmailLabel},null,8,l)]),(0,i.QD)("div",c,[(0,i.QD)("div",u,[(0,i.QD)("span",d,(0,o.WA)(e.$tr("iprofile.cms.form.notReceivedEmail")),1)]),(0,i.QD)("div",m,(0,o.WA)(e.$tr("iprofile.cms.form.checkYourSpamFolder")),1),(0,i.K2)(b,{class:"q-mt-lg",onClick:t[0]||(t[0]=e=>y.init()),label:e.$tr("iprofile.cms.form.resendEmail"),color:"primary",rounded:"",unelevated:"","no-caps":""},null,8,["label"])])])):((0,i.Wz)(),(0,i.An)("div",h,[(0,i.K2)(I,{onSubmit:t[2]||(t[2]=e=>y.authenticate()),class:"row q-col-gutter-x-sm q-pt-sm",autocorrect:"off",autocomplete:"off",onValidationError:t[3]||(t[3]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,i.Ql)((()=>[(0,i.QD)("div",g,(0,o.WA)(e.$tr("iprofile.cms.form.introMessage")),1),(0,i.K2)($,{class:"col-12",modelValue:w.email,"onUpdate:modelValue":t[1]||(t[1]=e=>w.email=e),field:y.emailConfig},null,8,["modelValue","field"]),(0,i.QD)("div",p,[(0,i.K2)(b,{loading:w.loading,type:"submit",color:"primary",class:"full-width",rounded:"",unelevated:"","no-caps":""},{loading:(0,i.Ql)((()=>[(0,i.K2)(M)])),default:(0,i.Ql)((()=>[(0,i.mY)((0,o.WA)(e.$tr("iprofile.cms.form.emailLogin"))+" ",1)])),_:1},8,["loading"])])])),_:1})]))])}const w={props:{},components:{},watch:{},mounted(){this.$nextTick((function(){}))},data(){return{loading:!1,email:"",sentEmailLabel:"",sent:!1}},computed:{emailConfig(){return{value:null,type:"input",props:{label:this.$tr("isite.cms.form.email"),rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.$helper.validateEmail(e)||this.$tr("isite.cms.message.fieldEmail")]}}}},methods:{init(){this.loading=!1,this.email="",this.sentEmailLabel=!1,this.sent=!1},authenticate(){this.loading=!0;const e={attributes:{email:this.email,redirectTo:window.location.href}};this.$crud.post("apiRoutes.quser.validateEmail",e).then((e=>{this.sentEmailLabel=this.$tr("iprofile.cms.form.sendEmailToVerify",{email:this.email}),this.sent=!0,this.loading=!1})).catch((e=>this.$alert.error({message:e})))}}};var y=s(68716),b=s(99140),$=s(14288),M=s(46380),I=s(95252),L=s.n(I);const v=(0,y.c)(w,[["render",f]]),D=v;L()(w,"components",{QBtn:b.c,QForm:$.c,QSpinnerOval:M.c})},87952:(e,t,s)=>{"use strict";s.d(t,{c:()=>f});var i=s(92444),o=s(74044);const a={id:"authResetPassword",class:"flex flex-center content-start"},n={class:"row justify-between full-width"};function r(e,t,s,r,l,c){const u=(0,i.E1)("dynamic-form"),d=(0,i.E1)("q-btn"),m=(0,i.E1)("q-spinner-oval");return(0,i.Wz)(),(0,i.An)("div",a,[(0,i.K2)(u,{modelValue:l.form,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form=e),blocks:c.dynamicForm.blocks,onSubmit:t[1]||(t[1]=e=>c.changePassword()),"no-actions":"",title:e.$tr("iprofile.cms.label.changePassword").toUpperCase(),class:"q-mb-md","default-col-class":"col-12",ref:"changePasswordForm"},null,8,["modelValue","blocks","title"]),(0,i.QD)("div",n,[(0,i.K2)(d,{label:e.$tr("iprofile.cms.label.login"),unelevated:"","no-caps":"",rounded:"","text-color":"blue-grey",to:{name:"auth.login",query:this.$route.query},color:"blue-grey-1"},null,8,["label","to"]),(0,i.K2)(d,{loading:l.loading,type:"submit",color:"primary",rounded:"",unelevated:"","no-caps":"",onClick:t[2]||(t[2]=t=>e.$refs.changePasswordForm.changeStep("next",!0))},{loading:(0,i.Ql)((()=>[(0,i.K2)(m)])),default:(0,i.Ql)((()=>[(0,i.mY)((0,o.WA)(e.$tr("iprofile.cms.label.reset"))+" ",1)])),_:1},8,["loading"])])])}s(23816),s(20584);const l={data(){return{form:{},loading:!1}},computed:{dynamicForm(){return{actions:{submit:{label:this.$tr("iprofile.cms.label.reset"),color:"primary",icon:null}},blocks:[{name:"main",fields:{textInfo:{type:"banner",vIf:this.$store.state.quserAuth.shouldChangePassword.shouldChangePassword,props:{textColor:"white",color:"amber",icon:"fas fa-exclamation-triangle",message:this.$store.state.quserAuth.shouldChangePassword?.description||""}},password:{value:null,type:"input",props:{label:`${this.$trp("isite.cms.form.password")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},newPassword:{value:null,type:"input",props:{label:`${this.$tr("iprofile.cms.label.newpassword")}*`,type:"password",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},newPasswordConfirmation:{value:null,type:"input",props:{label:`${this.$trp("isite.cms.form.checkPassword")}*`,type:"password",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.form.newPassword==e||this.$tr("isite.cms.message.fieldCheckPassword")]}}}}]}}},methods:{async changePassword(){this.loading=!0;let e={attributes:{...this.form,email:this.$store.state.quserAuth.userData.email}};this.$crud.post("apiRoutes.quser.changePassword",e).then((e=>{this.$alert.success({mode:"modal",title:this.$tr("iprofile.cms.label.changePassword"),message:this.$tr("iprofile.cms.message.changend"),actions:[{label:this.$tr("iprofile.cms.label.login"),handler:async()=>{await this.$store.dispatch("quserAuth/AUTH_LOGOUT"),this.$router.push({name:"auth.login",query:this.$route.query}),this.loading=!1}}]})})).catch((e=>{this.loading=!1}))}}};var c=s(68716),u=s(99140),d=s(46380),m=s(48488),h=s(95252),g=s.n(h);const p=(0,c.c)(l,[["render",r]]),f=p;g()(l,"components",{QBtn:u.c,QSpinnerOval:d.c,QLinearProgress:m.c})},99088:(e,t,s)=>{"use strict";s.d(t,{c:()=>b});var i=s(92444),o=s(74044);const a={class:"box-title text-uppercase q-mb-sm text-center"},n={key:0,class:"text-center text-caption text-grey-8 q-mb-md"},r={class:"text-center full-width"};function l(e,t,s,l,c,u){const d=(0,i.E1)("q-input"),m=(0,i.E1)("q-icon"),h=(0,i.E1)("q-btn"),g=(0,i.E1)("q-spinner-oval"),p=(0,i.E1)("q-form");return(0,i.Wz)(),(0,i.An)("div",{id:"formLoginComponent",style:(0,o.MN)("max-width: "+(c.props.horizontal?"700px":"400px"))},[(0,i.QD)("div",a,(0,o.WA)(e.$tr("iprofile.cms.label.login")),1),u.settings.authLoginCaption&&"null"!=u.settings.authLoginCaption?((0,i.Wz)(),(0,i.An)("div",n,(0,o.WA)(u.settings.authLoginCaption),1)):(0,i.g1)("",!0),(0,i.K2)(p,{onSubmit:t[3]||(t[3]=e=>u.authenticate()),class:"row q-col-gutter-x-sm q-pt-sm",autocorrect:"off",autocomplete:"off",onValidationError:t[4]||(t[4]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,i.Ql)((()=>[(0,i.QD)("div",{class:(0,o.WN)(u.columnsFieldsClass)},[(0,i.K2)(d,{name:"username",autofocus:"",ref:"username",dense:"","data-test-id":"loginUserNameField",modelValue:c.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>c.form.username=e),type:"text",color:"primary",outlined:"",rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:`${e.$tr("isite.cms.form.email")} / ${e.$tr("isite.cms.form.userName")}`},null,8,["modelValue","rules","label"])],2),(0,i.QD)("div",{class:(0,o.WN)(u.columnsFieldsClass)},[(0,i.K2)(d,{name:"password",ref:"password",dense:"",modelValue:c.form.password,"onUpdate:modelValue":t[2]||(t[2]=e=>c.form.password=e),type:c.isPwd?"password":"text",color:"primary",outlined:"",rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired")],label:e.$tr("isite.cms.form.password"),"data-test-id":"loginPasswordField"},{append:(0,i.Ql)((()=>[(0,i.K2)(m,{name:c.isPwd?"fa-light fa-eye-slash":"fa-light fa-eye",class:"cursor-pointer",onClick:t[1]||(t[1]=e=>c.isPwd=!c.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules","label"])],2),(0,i.QD)("div",{id:"formActions",class:(0,o.WN)("row full-width q-mb-md "+(u.withRegister?"justify-between":"justify-end"))},[u.withRegister?((0,i.Wz)(),(0,i.Az)(h,{key:0,label:e.$tr("iprofile.cms.label.createAccount"),unelevated:"","no-caps":"",to:{name:"auth.register",query:this.$route.query},color:"blue-grey-1","text-color":"blue-grey",rounded:""},null,8,["label","to"])):(0,i.g1)("",!0),(0,i.K2)(h,{loading:c.loading,type:"submit",color:"primary",rounded:"",unelevated:"","no-caps":""},{loading:(0,i.Ql)((()=>[(0,i.K2)(g)])),default:(0,i.Ql)((()=>[(0,i.mY)((0,o.WA)(e.$tr("iprofile.cms.label.login"))+" ",1)])),_:1},8,["loading"])],2),(0,i.QD)("div",r,[u.settings.allowResetPassword?((0,i.Wz)(),(0,i.Az)(h,{key:0,label:e.$tr("iprofile.cms.label.resetPassword"),unelevated:"","no-caps":"",to:{name:"auth.reset.password",query:this.$route.query},color:"blue-grey",rounded:"",flat:""},null,8,["label","to"])):(0,i.g1)("",!0)])])),_:1})],4)}const c={props:{email:{default:null},horizontal:{type:Boolean,default:!1}},emits:["logged"],watch:{email(){this.setEmail()}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{props:{},form:{username:"",password:""},rememberData:!0,loading:!1,inRequest:!1,fromRoute:!1,isPwd:!0}},computed:{settings(){let e={authLoginCaption:this.$getSetting("iprofile::authLoginCaption"),allowResetPassword:this.$getSetting("iprofile::allowResetPassword")};return e},columnsFieldsClass(){return this.horizontal?"col-12 col-md-6":"col-12"},withRegister(){let e=this.$getSetting("iprofile::registerUsers");return!(!e||!parseInt(e))}},methods:{init(){this.props=this.$clone(this.$props),this.setAuthData()},async authenticate(){if(!this.inRequest){this.inRequest=!0,this.loading=!0;const{username:e,password:t}=this.form;this.$store.dispatch("quserAuth/AUTH_REQUEST",{username:e,password:t}).then((e=>{this.loading=!1,this.inRequest=!1,this.$emit("logged")})).catch((e=>{this.$alert.error(this.$tr("iprofile.cms.message.userOrPasswordInvalid")),this.loading=!1,this.inRequest=!1}))}},setAuthData(){let e=this.$route.query.email,t=this.email?this.$clone(this.email):e,s=this.$route.query.password;setTimeout((()=>{t&&(this.form.username=t),t?(this.form.username=t,this.$refs.password.focus(),s&&(this.form.password=s,this.authenticate())):this.$refs.username.focus()}),200)}}};var u=s(68716),d=s(14288),m=s(20540),h=s(58120),g=s(99140),p=s(46380),f=s(95252),w=s.n(f);const y=(0,u.c)(c,[["render",l]]),b=y;w()(c,"components",{QForm:d.c,QInput:m.c,QIcon:h.c,QBtn:g.c,QSpinnerOval:p.c})},6996:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>h});var o=s(63756),a=s(74704),n=s(68716),r=s(58120),l=s(99140),c=s(95252),u=s.n(c),d=e([a]);a=(d.then?(await d)():d)[0];const m=(0,n.c)(a.c,[["render",o.a]]),h=m;u()(a.c,"components",{QIcon:r.c,QBtn:l.c}),i()}catch(m){i(m)}}))},40904:(e,t,s)=>{"use strict";s.d(t,{c:()=>b});var i=s(92444),o=s(74044);const a={id:"formLoginComponent",class:"relative-position"},n={key:0,class:"text-center text-caption text-grey-8 q-mb-md"},r={id:"formContent"},l={class:"text-center full-width"};function c(e,t,s,c,u,d){const m=(0,i.E1)("dynamic-form"),h=(0,i.E1)("q-btn");return(0,i.Wz)(),(0,i.An)("div",a,[d.settings.authRegisterCaption&&"null"!=d.settings.authRegisterCaption?((0,i.Wz)(),(0,i.An)("div",n,(0,o.WA)(d.settings.authRegisterCaption),1)):(0,i.g1)("",!0),(0,i.QD)("div",r,[(0,i.K2)(m,{modelValue:u.form,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form=e),blocks:d.dynamicForm.blocks,onSubmit:t[1]||(t[1]=e=>d.register()),actions:d.dynamicForm.actions,title:e.$tr("iprofile.cms.label.createAccount").toUpperCase(),class:"q-mb-md",loading:u.loading,"default-col-class":"col-12","use-captcha":!!d.settings.activateCaptcha},null,8,["modelValue","blocks","actions","title","loading","use-captcha"])]),(0,i.QD)("div",l,[(0,i.K2)(h,{label:e.$tr("iprofile.cms.label.login"),unelevated:"","no-caps":"",to:{name:"auth.login",query:this.$route.query},color:"blue-grey",rounded:"",flat:""},null,8,["label","to"])])])}var u=s(18528)["c"];const d={components:{},emits:["logged"],watch:{async watchRoleId(e,t){e&&e!=this.selectedRoleId&&(this.selectedRoleId=this.$clone(e),await this.getRoleForm()),!e&&this.selectedRoleId&&(this.form["role-roleId"]=this.$clone(this.selectedRoleId))}},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,form:{},authRoles:[],extraBlocks:[],selectedRoleId:null,mainFields:["roleId","email","password","passwordConfirmation","firstName","lastName","captcha"]}},props:{rolesToRegister:{type:String,default:"iprofile::rolesToRegister"}},computed:{dynamicForm(){let e={actions:{submit:{label:this.$tr("iprofile.cms.label.createAccount"),color:"primary",icon:null}},blocks:[{name:"main",fields:{email:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$tr("isite.cms.form.email")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.$helper.validateEmail(e)||this.$tr("isite.cms.message.fieldEmail")]}},password:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$tr("isite.cms.form.password")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},passwordConfirmation:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$tr("isite.cms.form.checkPassword")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.form["main-password"]==e||this.$tr("isite.cms.message.fieldCheckPassword")]}},...this.termsAndConditions?{terms:this.termsAndConditions}:{}}},...this.$clone(this.extraBlocks)]};return this.authRoles&&this.authRoles.length>=2&&e.blocks.unshift({name:"role",fields:{roleId:{value:null,type:"optionGroup",colClass:"col-12",props:{options:this.authRoles.map((e=>({label:`${this.$tr("iprofile.cms.label.registerAs")} ${e.name}`,value:e.id}))),color:"secondary",rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}}}),e.blocks.forEach(((t,s)=>{let i={};Object.keys(t.fields).forEach((e=>i[`${t.name}-${e}`]={...t.fields[e],name:`${t.name}-${e}`})),e.blocks[s].fields=i})),e},settings(){return{politics:this.$getSetting("iprofile::registerUserWithPoliticsOfPrivacy"),terms:this.$getSetting("iprofile::registerUserWithTermsAndConditions"),rolesToRegister:this.$getSetting(this.rolesToRegister)||this.$getSetting("iprofile::rolesToRegister"),authRegisterCaption:this.$getSetting("iprofile::authRegisterCaption"),activateCaptcha:parseInt(this.$getSetting("isite::activateCaptcha"))}},termsAndConditions(){if("ipanel"!=u("app.mode"))return!1;let e=this.settings;if(!e.politics&&!e.terms)return!1;let t="";e.politics&&(t+=`<a href="${e.politics}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.privacyPolicy")}</b></a>,`),e.terms&&(t+=`<a href="${e.terms}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.termsAndConditions")}</b></a>,`);let s={name:"terms",value:!1,type:"checkbox",props:{rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],label:this.$tr("iprofile.cms.message.privacyData",{concatData:t,siteName:this.$getSetting("core::site-name")})}};return s},watchRoleId(){return this.form["role-roleId"]}},methods:{async init(){this.getAuthRoles()},getAuthRoles(){return new Promise(((e,t)=>{if(!this.settings.rolesToRegister)return t(!1);this.loading=!0;let s={refresh:!0,params:{include:"forms.fields",filter:{id:this.settings.rolesToRegister}}};this.$crud.index("apiRoutes.quser.roles",s).then((t=>{this.authRoles=t.data,this.loading=!1,1==t.data.length&&this.getRoleForm(),e(t.data)})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading=!1,t(e)}))}))}))},getRoleForm(){return new Promise(((e,t)=>{this.extraBlocks=[];let s=this.form["role-roleId"]?this.authRoles.find((e=>e.id==this.form["role-roleId"])):this.authRoles[0];if(!s||!s.formId)return e(!1);this.loading=!0;let i={refresh:!0,params:{include:"blocks.fields"}};this.$crud.show("apiRoutes.qform.forms",s.formId,i).then((t=>{let s=t.data.blocks.map((e=>({...e,fields:e.fields.map((e=>e.dynamicField))})));s.forEach(((e,t)=>{let i={};e.fields.forEach(((e,t)=>i[`${e.name}`]=e)),s[t].fields=i})),this.extraBlocks=this.$clone(s),e(t.data),this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{t(e),this.loading=!1}))}))}))},getFormData(){let e=this.$clone(this.form),t=new Date,s={timezone:t.getTimezoneOffset()/60,language:navigator.language||navigator.userLanguage};return this.dynamicForm.blocks.forEach((t=>{Object.keys(e).forEach((i=>{let o=i.replace(`${t.name}-`,"");["fields","main","role"].includes(t.name)&&this.mainFields.includes(o)?s[o]=e[i]:Object.keys(t.fields).includes(i)&&(s[t.name]||(s[t.name]={}),s[t.name][o]=e[i])}))})),{attributes:this.$helper.toSnakeCase(s)}},async register(){this.loading=!0;let e=this.$clone(this.getFormData());this.$crud.post("apiRoutes.quser.register",e).then((t=>{let s={username:e.attributes.email,password:e.attributes.password};this.$store.dispatch("quserAuth/AUTH_REQUEST",s).then((e=>this.$emit("logged"))),this.loading=!1})).catch((e=>{this.loading=!1}))}}};var m=s(68716),h=s(99140),g=s(29632),p=s(48736),f=s(95252),w=s.n(f);const y=(0,m.c)(d,[["render",c]]),b=y;w()(d,"components",{QBtn:h.c,QOptionGroup:g.c,QRadio:p.c})},9172:(e,t,s)=>{"use strict";s.d(t,{c:()=>D});var i=s(92444),o=s(74044);const a={id:"authResetPassword"},n={id:"formResetPasswordContent"},r={class:"box-title text-uppercase q-mb-sm text-center"},l={class:"row justify-between"},c={slot:"loading"},u={class:"text-subtitle1 text-justify"},d={class:"text-center q-mt-sm"};function m(e,t,s,m,h,g){const p=(0,i.E1)("q-input"),f=(0,i.E1)("dynamic-field"),w=(0,i.E1)("q-btn"),y=(0,i.E1)("q-spinner-oval"),b=(0,i.E1)("q-form"),$=(0,i.E1)("q-card-section"),M=(0,i.E1)("q-card"),I=(0,i.E1)("q-dialog");return(0,i.Wz)(),(0,i.An)("div",a,[(0,i.QD)("div",n,[(0,i.QD)("div",r,(0,o.WA)(e.$tr("iprofile.cms.label.resetPassword")),1),(0,i.K2)(b,{onSubmit:t[2]||(t[2]=e=>g.resetPassword()),autocomplete:"off",onValidationError:t[3]||(t[3]=t=>e.$alert.error(e.$tr("isite.cms.message.formInvalid")))},{default:(0,i.Ql)((()=>[(0,i.K2)(p,{name:"username",autofocus:"",ref:"username",autocomplete:"off",outlined:"",dense:"",label:`${e.$tr("isite.cms.form.email")} *`,modelValue:h.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>h.form.username=e),type:"text",color:"blue-grey",class:"q-mb-sm",rules:[t=>!!t||e.$tr("isite.cms.message.fieldRequired"),t=>e.$helper.validateEmail(t)||e.$tr("isite.cms.message.fieldEmail")]},null,8,["label","modelValue","rules"]),(0,i.K2)(f,{field:{type:"captcha"},modelValue:h.form.captcha,"onUpdate:modelValue":t[1]||(t[1]=e=>h.form.captcha=e)},null,8,["modelValue"]),(0,i.QD)("div",l,[(0,i.K2)(w,{label:e.$tr("iprofile.cms.label.login"),"no-caps":"",rounded:"",unelevated:"",to:{name:"auth.login",query:this.$route.query},color:"blue-grey-1","text-color":"blue-grey"},null,8,["label","to"]),(0,i.K2)(w,{loading:h.loading,color:"primary",type:"submit",label:e.$tr("isite.cms.label.reset"),unelevated:"",rounded:"","no-caps":""},{default:(0,i.Ql)((()=>[(0,i.QD)("div",c,[(0,i.K2)(y,{class:"on-left"}),(0,i.mY)(" "+(0,o.WA)(`${e.$tr("isite.cms.label.validating")}...`),1)])])),_:1},8,["loading","label"])])])),_:1})]),(0,i.K2)(I,{persistent:"",modelValue:h.modal.show,"onUpdate:modelValue":t[4]||(t[4]=e=>h.modal.show=e)},{default:(0,i.Ql)((()=>[(0,i.K2)(M,null,{default:(0,i.Ql)((()=>[(0,i.K2)($,null,{default:(0,i.Ql)((()=>[(0,i.QD)("p",u,(0,o.WA)(h.modal.message),1),(0,i.QD)("div",d,[(0,i.K2)(w,{unelevated:"",rounded:"",label:"Iniciar sesion",to:{name:"auth.login"},color:"primary"},null,8,["to"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const h={props:{email:{default:null}},watch:{email(){this.setEmail()}},mounted(){this.$nextTick((function(){this.setEmail()}))},data(){return{loading:!1,form:{username:"",captcha:!1},modal:{show:!1,message:null}}},methods:{async resetPassword(){this.loading=!0;const{username:e,captcha:t}=this.form;this.$store.dispatch("quserAuth/RESET_PASSWORD_REQUEST",{username:e,captcha:t}).then((e=>{this.loading=!1,this.modal={show:!0,message:e.data?.message||this.$tr("iprofile.cms.message.reset")}})).catch((({response:e})=>{this.$alert.error(e.data.errors),this.loading=!1}))},setEmail(){this.email?this.form.username=this.$clone(this.email):this.$refs.username.focus()}}};var g=s(68716),p=s(14288),f=s(20540),w=s(99140),y=s(46380),b=s(30852),$=s(70608),M=s(71008),I=s(95252),L=s.n(I);const v=(0,g.c)(h,[["render",m]]),D=v;L()(h,"components",{QForm:p.c,QInput:f.c,QBtn:w.c,QSpinnerOval:y.c,QDialog:b.c,QCard:$.c,QCardSection:M.c})},17120:(e,t,s)=>{"use strict";s.d(t,{c:()=>L});var i=s(92444),o=s(74044);const a={id:"authResetPassword",class:"flex flex-center content-start"},n={class:"format-cotainer"},r={id:"btnGoLogin",class:"text-center q-mt-sm"},l={class:"text-green text-center text-h6"},c={class:"text-subtitle1 text-justify"},u={class:"text-center q-mt-sm"};function d(e,t,s,d,m,h){const g=(0,i.E1)("dynamic-form"),p=(0,i.E1)("q-btn"),f=(0,i.E1)("q-icon"),w=(0,i.E1)("q-card-section"),y=(0,i.E1)("q-card"),b=(0,i.E1)("q-dialog");return(0,i.Wz)(),(0,i.An)("div",a,[(0,i.QD)("div",n,[(0,i.K2)(g,{modelValue:m.form,"onUpdate:modelValue":t[0]||(t[0]=e=>m.form=e),blocks:h.dynamicForm.blocks,onSubmit:t[1]||(t[1]=e=>h.changePassword()),actions:h.dynamicForm.actions,title:e.$tr("iprofile.cms.label.reset").toUpperCase(),class:"q-mb-md","default-col-class":"col-12"},null,8,["modelValue","blocks","actions","title"]),(0,i.QD)("div",r,[(0,i.K2)(p,{class:"text-capitalize",flat:"",label:e.$tr("iprofile.cms.label.login"),to:{name:"auth.login"},color:"grey-8"},null,8,["label","to"])])]),(0,i.K2)(b,{persistent:"",modelValue:m.showMessage,"onUpdate:modelValue":t[2]||(t[2]=e=>m.showMessage=e)},{default:(0,i.Ql)((()=>[(0,i.K2)(y,null,{default:(0,i.Ql)((()=>[(0,i.K2)(w,null,{default:(0,i.Ql)((()=>[(0,i.QD)("div",l,[(0,i.K2)(f,{name:"fas fa-check",size:"20px"}),(0,i.mY)(" "+(0,o.WA)(e.$tr("isite.cms.label.ready")),1)]),(0,i.QD)("p",c,(0,o.WA)(e.$tr("iprofile.cms.message.changend")),1),(0,i.QD)("div",u,[(0,i.K2)(p,{label:e.$tr("iprofile.cms.label.login"),to:{name:"auth.login",query:{email:m.email}},color:"primary"},null,8,["label","to"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const m={data(){return{form:{},email:"",showMessage:!1,loading:!1,mainFields:["password","passwordConfirmation"]}},computed:{dynamicForm(){let e={actions:{submit:{label:this.$tr("iprofile.cms.label.reset"),color:"primary",icon:null}},blocks:[{name:"main",fields:{password:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$trp("isite.cms.form.password")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>e.length>=6||this.$tr("isite.cms.message.fieldMinLeng",{num:6})]}},passwordConfirmation:{value:null,type:"input",colClass:"col-12",props:{label:`${this.$trp("isite.cms.form.checkPassword")}*`,type:"password",vIf:this.form.changePassword,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired"),e=>this.form["main-password"]==e||this.$tr("isite.cms.message.fieldCheckPassword")]}}}}]};return e.blocks.forEach(((t,s)=>{let i={};Object.keys(t.fields).forEach((e=>i[`${t.name}-${e}`]={...t.fields[e],name:`${t.name}-${e}`})),e.blocks[s].fields=i})),e}},methods:{getFormData(){const e=this.$clone(this.form),t={password:null,passwordConfirmation:null,userId:this.$route.params.userId,token:this.$route.params.token};return this.dynamicForm.blocks.forEach((s=>{Object.keys(e).forEach((i=>{let o=i.replace(`${s.name}-`,"");["main"].includes(s.name)&&this.mainFields.includes(o)&&(t[o]=e[i])}))})),t},async changePassword(){this.loading=!0;let e=this.$clone(this.getFormData());this.$store.dispatch("quserAuth/CHANGED_PASSWORD_REQUEST",e).then((e=>{this.loading=!1,e.data&&e.data.email&&(this.email=e.data.email),this.showMessage=!0})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest")),this.loading=!1}))}))}}};var h=s(68716),g=s(99140),p=s(30852),f=s(70608),w=s(71008),y=s(58120),b=s(48488),$=s(95252),M=s.n($);const I=(0,h.c)(m,[["render",d]]),L=I;M()(m,"components",{QBtn:g.c,QDialog:p.c,QCard:f.c,QCardSection:w.c,QIcon:y.c,QLinearProgress:b.c})},67692:(e,t,s)=>{"use strict";s.d(t,{c:()=>c});var i=s(92444);function o(e,t,o,a,n,r){const l=(0,i.E1)("socialBtn");return r.appIdFacebook?((0,i.Wz)(),(0,i.Az)(l,{key:0,onClick:t[0]||(t[0]=e=>r.signIn()),loading:n.loading,title:`${e.$tr("isite.cms.label.continueWith")} ${e.$tr("isite.cms.label.facebook")}`,icon:s(57732)},null,8,["loading","title","icon"])):(0,i.g1)("",!0)}var a=s(26064);const n={props:{buttonProps:{default:()=>({})}},emits:["logged"],components:{socialBtn:a.c},watch:{},mounted(){this.$nextTick((function(){this.addCDN()}))},data(){return{success:!0,loading:!1}},computed:{appIdFacebook(){return this.$getSetting("isite::facebookClientId")},propsButton(){return{color:"blue",icon:"fab fa-facebook",loading:this.loading,vIf:this.success,...this.buttonProps}}},methods:{addCDN(){let e=this.appIdFacebook;window.fbAsyncInit=function(){FB.init({appId:e,autoLogAppEvents:!0,xfbml:!0,version:"v4.0"})},function(e,t,s){var i,o=e.getElementsByTagName(t)[0];e.getElementById(s)||(i=e.createElement(t),i.id=s,i.src="https://connect.facebook.net/en_US/sdk.js",o?.parentNode?.insertBefore(i,o))}(document,"script","facebook-jssdk")},signIn(){let e=this;this.loading=!0,FB.getLoginStatus((function(t){if("connected"==t.status)return e.login(t);FB.login((t=>{e.login(t)}),{auth_type:"reauthorize",scope:"public_profile,email"})}))},login(e){if("connected"!=e.status)return this.loading=!1;let t=e.authResponse.accessToken;this.$store.dispatch("quserAuth/AUTH_SOCIAL_NETWORK",{type:"facebook",token:t}).then((e=>{this.$emit("logged"),this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest")),this.loading=!1}))}))}}};var r=s(68716);const l=(0,r.c)(n,[["render",o]]),c=l},15356:(e,t,s)=>{"use strict";s.d(t,{c:()=>c});var i=s(92444);function o(e,t,o,a,n,r){const l=(0,i.E1)("socialBtn");return r.clientIdGoogle?((0,i.Wz)(),(0,i.Az)(l,{key:0,loading:n.loading,onClick:t[0]||(t[0]=e=>r.signIn()),title:`${e.$tr("isite.cms.label.continueWith")} ${e.$tr("isite.cms.label.google")}`,icon:s(13324)},null,8,["loading","title","icon"])):(0,i.g1)("",!0)}var a=s(26064);const n={props:{buttonProps:{default:()=>({})}},emits:["logged"],components:{socialBtn:a.c},watch:{},mounted(){this.$nextTick((function(){this.addCDN()}))},data(){return{success:!0,loading:!1}},computed:{clientIdGoogle(){return this.$getSetting("isite::googleClientId")},propsButton(){return{color:"red",icon:"fab fa-google",loading:this.loading,vIf:this.success,...this.buttonProps}}},methods:{addCDN(){let e=document.createElement("script");e.setAttribute("src","https://accounts.google.com/gsi/client"),e.onload=this.loadClientId(),document.head.appendChild(e)},loadClientId(){setTimeout((()=>{let e=this.clientIdGoogle||null;e&&google.accounts.id.initialize({client_id:e,callback:this.login,scope:"profile email openid",cancel_on_tap_outside:!1,context:"use"})}),500)},signIn(e){google.accounts.id.prompt()},login(e){let t=e.credential;if(!t)return this.loading=!1,this.$alert.error(this.$tr("isite.cms.message.errorRequest"));this.$store.dispatch("quserAuth/AUTH_SOCIAL_NETWORK",{type:"google",token:t}).then((e=>{this.$emit("logged"),this.loading=!1})).catch((e=>{this.$alert.error(this.$tr("isite.cms.message.errorRequest")),this.loading=!1}))}}};var r=s(68716);const l=(0,r.c)(n,[["render",o]]),c=l},24045:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>c});var o=s(41060),a=s(36252),n=s(68716),r=e([a]);a=(r.then?(await r)():r)[0];const l=(0,n.c)(a.c,[["render",o.a]]),c=l;i()}catch(l){i(l)}}))},26064:(e,t,s)=>{"use strict";s.d(t,{c:()=>w});var i=s(92444),o=s(74044);const a={class:"tw-shadow-lg tw-border tw-bg-white tw-text-sm tw-py-3 tw-px-4 tw-rounded tw-w-full tw-cursor-pointer hover:tw-bg-gray-100 tw-my-2"},n={class:"tw-flex"},r={class:"tw-w-6"},l=["src"],c={class:"tw-w-11/12 tw-text-center tw-font-bold"};function u(e,t,s,u,d,m){const h=(0,i.E1)("q-spinner");return(0,i.Wz)(),(0,i.An)("div",a,[(0,i.QD)("div",n,[(0,i.QD)("div",r,[(0,i.QD)("img",{class:"tw-w-6 tw-h-6",src:s.icon,alt:""},null,8,l)]),(0,i.QD)("div",c,(0,o.WA)(s.title),1),s.loading?((0,i.Wz)(),(0,i.Az)(h,{key:0,color:"primary",size:"23px",thickness:2})):(0,i.g1)("",!0)])])}const d={props:{title:{type:String,default:()=>null},icon:{type:String,default:()=>null},loading:{type:Boolean,default:!1}}};var m=s(68716),h=s(21028),g=s(95252),p=s.n(g);const f=(0,m.c)(d,[["render",u]]),w=f;p()(d,"components",{QSpinner:h.c})},36249:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.r(t),s.d(t,{default:()=>h});var o=s(18792),a=s(34884),n=s(68716),r=s(70880),l=s(99140),c=s(95252),u=s.n(c),d=e([a]);a=(d.then?(await d)():d)[0];const m=(0,n.c)(a.c,[["render",o.a]]),h=m;u()(a.c,"components",{QSeparator:r.c,QBtn:l.c}),i()}catch(m){i(m)}}))},57732:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgNDggNDgiIHdpZHRoPSI0OHB4IiBoZWlnaHQ9IjQ4cHgiPjxsaW5lYXJHcmFkaWVudCBpZD0iTGQ2c3FydGN4TXlja0VsNnhlRGRNYSIgeDE9IjkuOTkzIiB4Mj0iNDAuNjE1IiB5MT0iOS45OTMiIHkyPSI0MC42MTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMyYWE0ZjQiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDdhZDkiLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGZpbGw9InVybCgjTGQ2c3FydGN4TXlja0VsNnhlRGRNYSkiIGQ9Ik0yNCw0QzEyLjk1NCw0LDQsMTIuOTU0LDQsMjRzOC45NTQsMjAsMjAsMjBzMjAtOC45NTQsMjAtMjBTMzUuMDQ2LDQsMjQsNHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjYuNzA3LDI5LjMwMWg1LjE3NmwwLjgxMy01LjI1OGgtNS45ODl2LTIuODc0YzAtMi4xODQsMC43MTQtNC4xMjEsMi43NTctNC4xMjFoMy4yODNWMTIuNDYgYy0wLjU3Ny0wLjA3OC0xLjc5Ny0wLjI0OC00LjEwMi0wLjI0OGMtNC44MTQsMC03LjYzNiwyLjU0Mi03LjYzNiw4LjMzNHYzLjQ5OEgxNi4wNnY1LjI1OGg0Ljk0OHYxNC40NTIgQzIxLjk4OCw0My45LDIyLjk4MSw0NCwyNCw0NGMwLjkyMSwwLDEuODItMC4wODQsMi43MDctMC4yMDRWMjkuMzAxeiIvPjwvc3ZnPg=="},13324:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgNDggNDgiIHdpZHRoPSI0OHB4IiBoZWlnaHQ9IjQ4cHgiPjxwYXRoIGZpbGw9IiNmYmMwMmQiIGQ9Ik00My42MTEsMjAuMDgzSDQyVjIwSDI0djhoMTEuMzAzYy0xLjY0OSw0LjY1Ny02LjA4LDgtMTEuMzAzLDhjLTYuNjI3LDAtMTItNS4zNzMtMTItMTIJczUuMzczLTEyLDEyLTEyYzMuMDU5LDAsNS44NDIsMS4xNTQsNy45NjEsMy4wMzlsNS42NTctNS42NTdDMzQuMDQ2LDYuMDUzLDI5LjI2OCw0LDI0LDRDMTIuOTU1LDQsNCwxMi45NTUsNCwyNHM4Ljk1NSwyMCwyMCwyMAlzMjAtOC45NTUsMjAtMjBDNDQsMjIuNjU5LDQzLjg2MiwyMS4zNSw0My42MTEsMjAuMDgzeiIvPjxwYXRoIGZpbGw9IiNlNTM5MzUiIGQ9Ik02LjMwNiwxNC42OTFsNi41NzEsNC44MTlDMTQuNjU1LDE1LjEwOCwxOC45NjEsMTIsMjQsMTJjMy4wNTksMCw1Ljg0MiwxLjE1NCw3Ljk2MSwzLjAzOQlsNS42NTctNS42NTdDMzQuMDQ2LDYuMDUzLDI5LjI2OCw0LDI0LDRDMTYuMzE4LDQsOS42NTYsOC4zMzcsNi4zMDYsMTQuNjkxeiIvPjxwYXRoIGZpbGw9IiM0Y2FmNTAiIGQ9Ik0yNCw0NGM1LjE2NiwwLDkuODYtMS45NzcsMTMuNDA5LTUuMTkybC02LjE5LTUuMjM4QzI5LjIxMSwzNS4wOTEsMjYuNzE1LDM2LDI0LDM2CWMtNS4yMDIsMC05LjYxOS0zLjMxNy0xMS4yODMtNy45NDZsLTYuNTIyLDUuMDI1QzkuNTA1LDM5LjU1NiwxNi4yMjcsNDQsMjQsNDR6Ii8+PHBhdGggZmlsbD0iIzE1NjVjMCIgZD0iTTQzLjYxMSwyMC4wODNMNDMuNTk1LDIwTDQyLDIwSDI0djhoMTEuMzAzYy0wLjc5MiwyLjIzNy0yLjIzMSw0LjE2Ni00LjA4Nyw1LjU3MQljMC4wMDEtMC4wMDEsMC4wMDItMC4wMDEsMC4wMDMtMC4wMDJsNi4xOSw1LjIzOEMzNi45NzEsMzkuMjA1LDQ0LDM0LDQ0LDI0QzQ0LDIyLjY1OSw0My44NjIsMjEuMzUsNDMuNjExLDIwLjA4M3oiLz48L3N2Zz4="},96092:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNDk5LjYgMjUwMCIgdmlld0JveD0iMCAwIDI0OTkuNiAyNTAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0xMTg3LjkgMTE4Ny45aC0xMTg3Ljl2LTExODcuOWgxMTg3Ljl6IiBmaWxsPSIjZjE1MTFiIi8+PHBhdGggZD0ibTI0OTkuNiAxMTg3LjloLTExODh2LTExODcuOWgxMTg3Ljl2MTE4Ny45eiIgZmlsbD0iIzgwY2MyOCIvPjxwYXRoIGQ9Im0xMTg3LjkgMjUwMGgtMTE4Ny45di0xMTg3LjloMTE4Ny45eiIgZmlsbD0iIzAwYWRlZiIvPjxwYXRoIGQ9Im0yNDk5LjYgMjUwMGgtMTE4OHYtMTE4Ny45aDExODcuOXYxMTg3Ljl6IiBmaWxsPSIjZmJiYzA5Ii8+PC9zdmc+"},74704:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>o.c});var o=s(32240),a=e([o]);o=(a.then?(await a)():a)[0],i()}catch(n){i(n)}}))},36252:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>o.c});var o=s(61764),a=e([o]);o=(a.then?(await a)():a)[0],i()}catch(n){i(n)}}))},34884:(e,t,s)=>{"use strict";s.a(e,(async(e,i)=>{try{s.d(t,{c:()=>o.c});var o=s(31024),a=e([o]);o=(a.then?(await a)():a)[0],i()}catch(n){i(n)}}))},63756:(e,t,s)=>{"use strict";s.d(t,{a:()=>r});var i=s(92444),o=s(74044);const a={id:"pageLogout",class:"text-center"},n={class:"text-grey-8 q-headline q-mt-md"};function r(e,t,s,r,l,c){const u=(0,i.E1)("q-icon"),d=(0,i.E1)("q-btn");return(0,i.Wz)(),(0,i.An)("div",a,[(0,i.K2)(u,{name:"fas fa-user-lock",color:"primary",size:"60px"}),(0,i.QD)("div",n,(0,o.WA)(e.$tr("iprofile.cms.message.logout")),1),(0,i.K2)(d,{label:e.$tr("iprofile.cms.label.login"),color:"primary",loading:l.loading,rounded:"",unelevated:"",class:"q-mt-md",to:c.routeToLogin},null,8,["label","loading","to"])])}},41060:(e,t,s)=>{"use strict";s.d(t,{a:()=>o});var i=s(92444);function o(e,t,o,a,n,r){const l=(0,i.E1)("socialBtn");return r.microsoftClient?((0,i.Wz)(),(0,i.Az)(l,{key:0,title:`${e.$tr("isite.cms.label.continueWith")} ${e.$tr("isite.cms.label.microsoft")}`,icon:s(96092),onClick:r.signIn},null,8,["title","icon","onClick"])):(0,i.g1)("",!0)}},18792:(e,t,s)=>{"use strict";s.d(t,{a:()=>y});s(23816);var i=s(92444),o=s(74044);const a={id:"authWrapperPage"},n={class:"row"},r={class:"wrapp__content flex flex-center justify-center"},l={class:"wrapp__content_sub q-pa-md"},c={key:0,class:"wrapp__title q-mb-md"},u={key:1,class:"wrapp__logo logo-bg-primary q-mb-xl"},d=["src"],m={class:"q-mb-md"},h={key:0},g={key:0},p={key:2,style:{"min-height":"auto"}},f={class:"row justify-center q-gutter-sm"},w={class:"tw-flex tw-justify-end tw--mt-10 tw-mr-2 tw-mb-2"};function y(e,t,s,y,b,$){const M=(0,i.E1)("login-form"),I=(0,i.E1)("register-form"),L=(0,i.E1)("reset-password"),v=(0,i.E1)("reset-password-complete"),D=(0,i.E1)("force-change-password"),k=(0,i.E1)("email-auth"),A=(0,i.E1)("logout"),T=(0,i.E1)("q-separator"),C=(0,i.E1)("google-auth"),E=(0,i.E1)("facebook-auth"),N=(0,i.E1)("microsoftAuth"),j=(0,i.E1)("q-btn");return(0,i.Wz)(),(0,i.An)("div",a,[(0,i.QD)("div",n,[$.settings.authBanner?((0,i.Wz)(),(0,i.An)("div",{key:0,class:"wrapp__banner col-12 col-md-4",style:(0,o.MN)(`background-image: url('${$.settings.authBanner.path}')`)},null,4)):(0,i.g1)("",!0),(0,i.QD)("div",{class:(0,o.WN)("col-12 "+($.settings.authBanner?"col-md-8":""))},[(0,i.QD)("div",r,[(0,i.QD)("div",l,[$.settings.authTitle&&"null"!=$.settings.authTitle?((0,i.Wz)(),(0,i.An)("div",c,(0,o.WA)($.settings.authTitle),1)):(0,i.g1)("",!0),$.settings.hideLogo?(0,i.g1)("",!0):((0,i.Wz)(),(0,i.An)("div",u,[(0,i.QD)("img",{src:$.settings.logo},null,8,d)])),(0,i.QD)("div",m,[$.allowLocalLogin?((0,i.Wz)(),(0,i.An)("div",h,["withPassword"===$.modeAuthType?((0,i.Wz)(),(0,i.An)("div",g,["login"==$.authType?((0,i.Wz)(),(0,i.Az)(M,{key:0,onLogged:t[0]||(t[0]=e=>$.checkAfterLogin()),class:"full-width"})):(0,i.g1)("",!0),"register"==$.authType?((0,i.Wz)(),(0,i.Az)(I,{key:1,onLogged:t[1]||(t[1]=e=>$.checkAfterLogin()),class:"full-width"})):(0,i.g1)("",!0),"resetPassword"==$.authType?((0,i.Wz)(),(0,i.Az)(L,{key:2,class:"full-width"})):(0,i.g1)("",!0),"resetPasswordComplete"==$.authType?((0,i.Wz)(),(0,i.Az)(v,{key:3,class:"full-width"})):(0,i.g1)("",!0),"forceChangePassword"==$.authType?((0,i.Wz)(),(0,i.Az)(D,{key:4,class:"full-width"})):(0,i.g1)("",!0)])):(0,i.g1)("",!0),["login","register"].includes($.authType)&&"withEmail"===$.modeAuthType?((0,i.Wz)(),(0,i.Az)(k,{key:1,class:"full-width"})):(0,i.g1)("",!0)])):(0,i.g1)("",!0),"logout"==$.authType?((0,i.Wz)(),(0,i.Az)(A,{key:1,class:"full-width"})):(0,i.g1)("",!0)]),$.withAuthSocial?((0,i.Wz)(),(0,i.An)("div",p,[(0,i.K2)(T,{class:"q-mb-md"}),(0,i.QD)("div",f,[(0,i.K2)(C,{onLogged:$.checkAfterLogin},null,8,["onLogged"]),(0,i.K2)(E,{onLogged:$.checkAfterLogin},null,8,["onLogged"]),(0,i.K2)(N,{onLogged:$.checkAfterLogin},null,8,["onLogged"])])])):(0,i.g1)("",!0)])]),(0,i.QD)("div",w,[(0,i.K2)(j,{class:"tw-text-xs tw-rounded-2xl",color:"primary","icon-right":"fa-solid fa-broom-wide",label:e.$t("isite.cms.configList.clearCache",{capitalize:!0}),flat:"",rouded:"","no-caps":"",onClick:t[2]||(t[2]=t=>e.$router.push({name:"app.update.app"}))},null,8,["label"])])],2)])])}}}]);