"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[4215],{54215:(e,t,s)=>{function a(e,t,s,a,r,i){return null}s.r(t),s.d(t,{default:()=>n});var r=s(15409),i=s(99526)["A"];const l={components:{fileList:r.A},data(){return{crudId:this.$uid(),listOfCategories:[]}},async mounted(){await this.getCategories()},computed:{isMobile(){return window.innerWidth<=768},crudData(){return{crudId:this.crudId,entityName:i("main.qrequestable.entityNames.requestable"),apiRoute:"apiRoutes.qrequestable.requestables",permission:"requestable.requestables",extraFormFields:"requestable.crud-fields.requestable",create:{title:this.$tr("requestable.cms.newRequest"),to:{name:"qrequestable.main.requestables.create"}},read:{showAs:this.isMobile?"table":"kanban",columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",sortable:!0,align:"left"},{name:"category",label:this.$tr("isite.cms.form.category"),align:"left",field:"category",sortable:!0,format:e=>e&&e.title?e.title:"-"},{name:"statusTitle",label:this.$tr("isite.cms.form.status"),align:"left",field:"status",sortable:!0,format:e=>e&&e.title?e.title:"-"},{name:"type",label:this.$tr("isite.cms.form.type"),field:"type",align:"left"},{name:"requestedBy",label:this.$tr("isite.cms.form.requestedBy"),field:"requestedBy",format:e=>e?`${e.firstName} ${e.lastName}`:"-",align:"left"},{name:"responsible",label:this.$tr("isite.cms.form.responsible"),field:"responsible",format:e=>e?`${e.firstName} ${e.lastName}`:"-",align:"left"},{name:"createdAt",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",format:e=>e?this.$trd(e):"-",align:"left",sortable:!0},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"center"}],requestParams:{include:"category,status,fields,files,comments,responsible,requestedBy",filter:{}},kanban:{column:{filter:{name:"categoryId"},apiRoute:"apiRoutes.qrequestable.statuses",include:"category"},card:{filter:{name:"statusId"},apiRoute:"apiRoutes.qrequestable.requestables",include:"fields,responsible,status,requestedBy,category.forms.fields,conversation"},orderStatus:{filter:{name:"category"},apiRoute:"apiRoutes.qrequestable.orderStatus"},automation:{filter:{name:"statusId"},apiRoute:"apiRoutes.qrequestable.automationRule"}},filters:{sourceId:{value:null,type:"crud",permission:"requestable.requestables.filter-source",props:{crudType:"select",crudData:s.e(2514).then(s.bind(s,12514)),crudProps:{label:this.$tr("isite.cms.label.source"),rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")],readonly:!this.$hasAccess("requestable.sources.index")},config:{filterByQuery:!0,options:{label:"title",value:"id"}}}},requestedById:{value:null,type:"crud",permission:"requestable.requestables.filter-requested-by",props:{crudType:"select",crudData:s.e(9953).then(s.bind(s,59953)),crudProps:{label:this.$tr("isite.cms.form.requestedBy")},clearable:!0,config:{filterByQuery:!0,options:{label:"fullName",value:"id"}}}},responsibleId:{value:null,type:"crud",permission:"requestable.requestables.filter-responsible",props:{crudType:"select",crudData:s.e(9953).then(s.bind(s,59953)),crudProps:{label:this.$tr("requestable.cms.label.responsible"),rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]},config:{filterByQuery:!0,options:{label:"fullName",value:"id",img:"mainImage"}}}},categoryId:{value:null,type:"select",quickFilter:!this.isMobile,label:this.$tr("requestable.cms.sidebar.categories"),props:{selectByDefault:!0,label:`${this.$tr("requestable.cms.sidebar.categories")}`,clearable:!0},loadOptions:{apiRoute:"apiRoutes.qrequestable.categories",requestParams:{filter:{internal:!1}}}},statusId:{value:null,type:"select",permission:"requestable.requestables.filter-status",props:{label:`${this.$tr("isite.cms.form.status")}`,clearable:!0},loadOptions:{apiRoute:"apiRoutes.qrequestable.statuses",requestParams:{filter:{categoryId:this.crudInfo.categoryId}}}}},actions:[{name:"viewEntity",icon:"fas fa-eye",label:this.$tr("isite.cms.label.show"),format:e=>e.requestableUrl?{}:{vIf:!1},action:e=>{e.requestableUrl&&this.$helper.openExternalURL(e.requestableUrl)}},{name:"viewLead",icon:"fas fa-info-circle",color:"info",tooltip:this.$tr("isite.cms.label.information"),format:e=>e.category&&e.category.form?{}:{vIf:!1},action:e=>{this.showRequestData(e)}}]},update:!1,delete:!1,formLeft:{id:{value:""},categoryId:{value:null,type:"select",props:{label:`${this.$tr("isite.cms.form.category")}`,readonly:!0},loadOptions:{apiRoute:"apiRoutes.qrequestable.categories"}},statusId:{value:null,type:"select",props:{label:`${this.$tr("isite.cms.form.status")}`},loadOptions:{apiRoute:"apiRoutes.qrequestable.statuses",requestParams:{filter:{categoryId:this.crudInfo.categoryId}}}},createdBy:{value:null,type:"crud",permission:"requestable.requestables.edit-created-by",props:{crudType:"select",crudData:s.e(9953).then(s.bind(s,59953)),crudProps:{label:this.$tr("isite.cms.form.createdBy"),rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]},config:{filterByQuery:!0,options:{label:"fullName",value:"id"}}}},requestedBy:{value:null,type:"crud",permission:"requestable.requestables.edit-requested-by",props:{crudType:"select",crudData:s.e(9953).then(s.bind(s,59953)),crudProps:{label:this.$tr("isite.cms.form.requestedBy"),rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]},config:{filterByQuery:!0,options:{label:"fullName",value:"id"}}}}}}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}},methods:{async getCategories(){try{const e=await this.$crud.index("apiRoutes.qrequestable.categories");this.listOfCategories=e.data}catch(e){this.$apiResponse.handleError(e,(()=>{this.listOfCategories=[],console.log(e)}))}}}};var u=s(12807);const o=(0,u.A)(l,[["render",a]]),n=o}}]);