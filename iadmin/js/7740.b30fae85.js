"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[7740],{60348:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});a(23816);var i=a(92444);const r={id:"reservationsPage"},s={key:0,class:"relative-position"},n={key:1,class:"box row items-center justify-center"};function l(e,t,l,o,c,d){const u=(0,i.E1)("page-actions"),v=(0,i.E1)("calendar"),h=(0,i.E1)("not-result"),m=(0,i.E1)("inner-loading"),p=(0,i.E1)("crud");return(0,i.Wz)(),(0,i.An)("div",r,["calendar"==c.view?((0,i.Wz)(),(0,i.An)("div",s,[(0,i.K2)(u,{title:e.$tr(e.$route.meta.title),"extra-actions":d.extraPageActions,onRefresh:t[0]||(t[0]=e=>d.getData(!0)),onNew:t[1]||(t[1]=t=>e.$router.push({name:"qbooking.panel.reservations.create"})),class:"q-mb-md"},null,8,["title","extra-actions"]),d.reservationsCalendar.length?((0,i.Wz)(),(0,i.Az)(v,{key:0,"events-data":d.reservationsCalendar},null,8,["events-data"])):((0,i.Wz)(),(0,i.An)("div",n,[(0,i.K2)(h)])),(0,i.K2)(m,{visible:c.loading},null,8,["visible"])])):((0,i.Wz)(),(0,i.Az)(p,{key:1,"crud-data":a.e(956).then(a.bind(a,48576)),title:e.$tr(e.$route.meta.title)},null,8,["crud-data","title"]))])}var o=a(11278),c=a(18528)["c"];const d={props:{},components:{calendar:o.c},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,view:"ipanel"==c("app.mode")?"calendar":"crud",reservations:[]}},computed:{extraPageActions(){return["search","new",{label:this.$tr("isite.cms.label.view"),vIf:!1,props:{icon:"calendar"==this.view?"fas fa-list-ul":"fas fa-calendar-alt"},action:()=>{this.view="calendar"==this.view?"crud":"calendar"}}]},reservationsCalendar(){let e=this.reservations.reverse().map((e=>({icon:"fas fa-calendar",color:"primary",date:e.startDate,title:e.serviceTitle,mainDetails:[{value:`${this.$tr("isite.cms.form.status")}: ${e.statusName}`},{icon:"fas fa-play-circle",value:`${e.reservation.customer?.firstName||""} ${e.reservation.customer?.lastName||""}`},{icon:"fas fa-play-circle",value:e.categoryTitle},{icon:"fas fa-play-circle",value:e.resourceTitle}],card:{title:this.$tr("isite.cms.label.meet"),component:()=>a.e(6116).then(a.bind(a,26116)),row:e}})));return e}},methods:{init(){this.getData()},getData(e=!1){return new Promise(((t,a)=>{this.loading=!0;let i={refresh:e,params:{include:"reservation.customer,meetings",filter:"iadmin"==c("app.mode")?{}:{userId:this.$store.state.quserAuth.userId}}};this.$crud.index("apiRoutes.qbooking.reservationItems",i).then((e=>{this.reservations=e.data,this.loading=!1})).catch((e=>{this.$apiResponse.handleError(e,(()=>{this.loading=!1}))}))}))}}};var u=a(68716);const v=(0,u.c)(d,[["render",l]]),h=v}}]);