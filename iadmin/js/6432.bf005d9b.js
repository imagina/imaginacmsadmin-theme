"use strict";(globalThis["webpackChunkimagina_cms"]=globalThis["webpackChunkimagina_cms"]||[]).push([[6432],{26432:(e,t,i)=>{function r(e,t,i,r,s,c){return null}i.r(t),i.d(t,{default:()=>l});var s=i(18528)["c"];const c={data(){return{crudId:this.$uid(),loadOptionsPriceList:[],selectedProduct:null,priceProductList:0}},computed:{crudData(){return{crudId:this.crudId,entityName:s("main.qcommerce.entityNames.productList"),apiRoute:"apiRoutes.qcommerce.productLists",permission:"icommercepricelist.pricelists",create:{title:this.$tr("icommercepricelist.cms.form.newProductList")},read:{columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",align:"left"},{name:"name",label:this.$tr("isite.cms.form.name"),field:"priceList",align:"left",format:e=>e.name},{name:"criteria",label:this.$tr("isite.cms.form.type"),field:"priceList",align:"left",format:e=>this.$tr("icommerce.cms.options."+e.criteria)},{name:"operationPrefix",label:this.$tr("icommerce.cms.form.operationPrefix"),field:"priceList",align:"left",format:e=>"+"===e.operationPrefix?this.$tr("icommerce.cms.options.add"):this.$tr("icommerce.cms.options.subtract")},{name:"price",label:this.$tr("icommerce.cms.form.value"),field:"price",align:"left",format:e=>parseFloat(e)?this.$trn(parseFloat(e)):"-"},{name:"createdAt",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",align:"left",format:e=>e?this.$trd(e):"-"},{name:"updatedAt",label:this.$tr("isite.cms.form.updatedAt"),field:"updatedAt",align:"left",format:e=>e?this.$trd(e):"-"},{name:"actions",label:this.$tr("isite.cms.form.actions"),align:"right"}],requestParams:{include:"product,priceList"}},update:{title:this.$tr("icommercepricelist.cms.form.updateProductList"),requestParams:{include:"product,priceList"}},delete:!0,formLeft:{id:{value:""},productId:{value:null,type:"crud",props:{crudType:"select",crudData:i.e(4848).then(i.bind(i,54848)),customData:{read:{requestParams:{refresh:!0}}},crudProps:{label:`${this.$tr("isite.cms.form.product")}*`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]},config:{filterByQuery:!0,options:{label:"name",value:"id"}}}},priceListId:{type:"select",required:!0,loadOptions:{apiRoute:"apiRoutes.qcommerce.priceLists",select:{label:"name",id:"id"},loadedOptions:e=>this.loadOptionsPriceList=e},props:{label:this.$tr("isite.cms.form.name")}},criteria:{type:"select",fakeFieldName:"priceList",props:{label:this.$tr("isite.cms.form.type"),options:[{label:this.$tr("icommerce.cms.options.fixed"),value:"fixed"},{label:this.$tr("icommerce.cms.options.percentage"),value:"percentage"}],readonly:!0}},operationPrefix:{type:"select",fakeFieldName:"priceList",props:{label:this.$tr("icommerce.cms.form.operationPrefix"),options:[{label:this.$tr("icommerce.cms.options.subtract"),value:"-"},{label:this.$tr("icommerce.cms.options.add"),value:"+"}],readonly:!0}},price:{value:"",type:"input",required:!0,props:{label:`${this.$tr("icommerce.cms.form.value")}*`,type:"number",readonly:"percentage"==this.crudInfo.priceList?.criteria,vIf:"percentage"!==this.crudInfo.priceList?.criteria}}},handleFormUpdates:(e,t,i)=>new Promise((i=>{if(1===t.length&&t.includes("priceListId")){const t=this.loadOptionsPriceList.find((t=>t.id==e.priceListId));t&&(e={...e,priceList:{...e.priceList,criteria:t.criteria,operationPrefix:t.operationPrefix},price:"percentage"===t.criteria?0:this.priceProductList})}else t.length>1&&t.includes("price")&&(this.priceProductList=e.price);i(e)}))}},crudInfo(){return this.$store.state.qcrudComponent.component[this.crudId]||{}}}};var a=i(68716);const o=(0,a.c)(c,[["render",r]]),l=o}}]);