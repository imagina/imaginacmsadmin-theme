"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[180],{388:(t,e,o)=>{o.r(e),o.d(e,{default:()=>V});var a=o(92444),s={id:"pocketPage"},n={class:"row q-col-gutter-lg"},l={class:"col-4"},i={class:"col-8"};function r(t,e,o,r,c,d){var u=(0,a.E1)("pockets"),p=(0,a.E1)("transactions");return(0,a.Wz)(),(0,a.An)("div",s,[(0,a.QD)("div",n,[(0,a.QD)("div",l,[(0,a.K2)(u)]),(0,a.QD)("div",i,[(0,a.K2)(p)])])])}var c=o(75836),d=o(20584);const u={getPockets:function(t){return void 0===t&&(t=!1),new Promise((function(e,o){var a={refresh:t,params:{include:"assignedTo"}};d.c.index("apiRoutes.qwallet.pockets",a).then((function(t){e(t)})).catch((function(t){return o(t)}))}))},getTransactions:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e={}),new Promise((function(o,a){var s={refresh:t,params:e};d.c.index("apiRoutes.qwallet.transactions",s).then((function(t){o(t)})).catch((function(t){return a(t)}))}))}};(0,c.cB)({});const p=(0,a.S6)((function(){return{}})).value;var m=function(){return m=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var s in e=arguments[o],e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},m.apply(this,arguments)};function f(t,e){(0,a._S)().appContext.config.globalProperties;var o={},s=(0,c.cB)({pockets:[],loadingPockets:!1}),n={},l={getPockets:function(){s.loadingPockets=!0,u.getPockets(!0).then((function(t){s.pockets=t.data,s.loadingPockets=!1})).catch((function(t){return s.loadingPockets=!1}))}};return(0,a.u2)((function(){l.getPockets()})),m(m(m(m(m({},o),(0,c.kx)(s)),n),l),{store:p})}var k=o(74044);const g={id:"pocketsView"},b={class:"row q-gutter-md relative-position"},v={class:"row justify-between items-center",style:{width:"100%"}},h={class:"text-primary text-bold",style:{"font-size":"20px"}},w={class:"row q-gutter-sm"},y={class:"pocket__top row justify-between q-mb-md"},P={class:"pocket__top-data"},$={class:"text-blue-grey"},Q={class:"text-h6"},x={class:"text-caption text-blue-grey"},q={class:"pocket__balance"},D={class:"stat-item row justify-between items-center"},C={class:"row q-gutter-xs"},_={key:0,class:"text-center full-width"};function A(t,e,s,n,l,i){const r=(0,a.E1)("q-icon"),c=(0,a.E1)("q-btn"),d=(0,a.E1)("q-separator"),u=(0,a.E1)("q-tooltip"),p=(0,a.E1)("not-result"),m=(0,a.E1)("inner-loading"),f=(0,a.E1)("crud");return(0,a.Wz)(),(0,a.An)("div",g,[(0,a.QD)("div",b,[(0,a.QD)("div",v,[(0,a.QD)("div",h,(0,k.WA)(t.$trp("iwallet.cms.pocket")),1),(0,a.QD)("div",w,[(0,a.K2)(c,(0,a.Gu)({onClick:e[0]||(e[0]=e=>t.$refs.crudPockets.create())},t.buttonProps,{padding:"5px 15px"}),{default:(0,a.Ql)((()=>[(0,a.K2)(r,{name:"fa-solid fa-plus",class:"q-mr-sm"}),(0,a.mY)(" "+(0,k.WA)(t.$tr("isite.cms.label.new")),1)])),_:1},16),(0,a.K2)(c,(0,a.Gu)({onClick:t.getPockets,icon:"fal fa-rotate-right"},t.buttonProps,{padding:"10px"}),null,16,["onClick"])])]),((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(t.pockets,(e=>((0,a.Wz)(),(0,a.An)("div",{key:e.id,class:"pocket box"},[(0,a.QD)("div",y,[(0,a.QD)("div",P,[(0,a.QD)("div",$,(0,k.WA)(e.title),1),(0,a.QD)("div",Q,"$"+(0,k.WA)(t.$trn(e.total)),1)]),(0,a.QD)("div",{class:"pocket__top-icon row items-center justify-center",style:(0,k.MN)(`background-color: ${e.options.color}`)},[(0,a.K2)(r,{name:"far fa-wallet"})],4)]),(0,a.QD)("div",x,(0,k.WA)(e.description),1),(0,a.K2)(d,{class:"q-mb-xs"}),(0,a.QD)("div",q,[(0,a.QD)("div",D,[(0,a.QD)("div",{style:(0,k.MN)(`color: ${e.type.color}`)},[(0,a.K2)(r,{name:e.type.icon},null,8,["name"]),(0,a.mY)(" "+(0,k.WA)(e.type.title),1)],4),(0,a.QD)("div",C,[(0,a.K2)(c,{icon:"fas fa-trash",flat:"",color:"blue-grey-3",size:"xs",round:"",onClick:o=>t.$refs.crudPockets.delete(e)},{default:(0,a.Ql)((()=>[(0,a.K2)(u,null,{default:(0,a.Ql)((()=>[(0,a.mY)("(pt) Eliminar")])),_:1})])),_:2},1032,["onClick"]),(0,a.K2)(c,{icon:"fas fa-pen",flat:"",color:"blue-grey-3",size:"xs",round:"",onClick:o=>t.$refs.crudPockets.update(e)},{default:(0,a.Ql)((()=>[(0,a.K2)(u,null,{default:(0,a.Ql)((()=>[(0,a.mY)("(pt) Editar")])),_:1})])),_:2},1032,["onClick"])])])])])))),128)),t.pockets.length||t.loadingPockets?(0,a.g1)("",!0):((0,a.Wz)(),(0,a.An)("div",_,[(0,a.K2)(p)])),(0,a.K2)(m,{visible:t.loadingPockets},null,8,["visible"])]),(0,a.K2)(f,{"crud-data":o.e(3680).then(o.bind(o,63680)),type:"onlyUpdate",ref:"crudPockets",onCreated:t.getPockets,onUpdated:t.getPockets,onDeleted:t.getPockets},null,8,["crud-data","onCreated","onUpdated","onDeleted"])])}const K=(0,a._M)({setup(t){return(0,a.uU)("controller")},computed:{},data(){return{buttonProps:{round:!1,rounded:!0,dense:!0,unelevated:!0,textColor:"primary",style:"border: 1px solid rgb(229 229 229)",noCaps:!0,class:"btn-small"}}},methods:{}});var E=o(68716),R=o(99140),W=o(58120),z=o(70880),U=o(90111),j=o(95252),O=o.n(j);const I=(0,E.c)(K,[["render",A]]),M=I;O()(K,"components",{QBtn:R.c,QIcon:W.c,QSeparator:z.c,QTooltip:U.c});const T={id:"transactionsView"};function F(t,e,s,n,l,i){const r=(0,a.E1)("dynamic-list"),c=(0,a.E1)("crud");return(0,a.Wz)(),(0,a.An)("div",T,[(0,a.K2)(r,{"list-config":t.listConfig,onNew:e[0]||(e[0]=e=>t.$refs.transactionCrud.create()),ref:"transactionList",onUpdatedRow:t.getPockets},null,8,["list-config","onUpdatedRow"]),(0,a.K2)(c,{"crud-data":o.e(9116).then(o.bind(o,49116)),type:"onlyform",ref:"transactionCrud",onCreated:e[1]||(e[1]=e=>(t.$refs.transactionList.getData({page:1}),t.getPockets()))},null,8,["crud-data"])])}var Y=o(86288);const B=(0,a._M)({components:{dynamicList:Y.c},setup(t){return(0,a.uU)("controller")},computed:{},data(){return{listConfig:{apiRoute:"apiRoutes.qwallet.transactions",permission:"iwallet.transactions",pageActions:{extraActions:["new"]},read:{title:this.$trp("iwallet.cms.transaction"),columns:[{name:"id",field:"id",label:"ID"},{name:"type",label:this.$tr("isite.cms.form.type"),field:"type",align:"left",format:t=>`<i class="${t.icon}" style="color: ${t.color}" /> <span class="q-ml-sm">${t.title}</span>`},{name:"amount",label:this.$tr("isite.cms.label.amount"),field:"amount",align:"left",format:t=>"$"+this.$trn(t)},{name:"origin",label:this.$tr("iwallet.cms.origin"),field:"fromPocket",align:"left",format:t=>t?.title??"-"},{name:"destination",label:this.$tr("iwallet.cms.destination"),field:"toPocket",align:"left",format:t=>t?.title??"-"},{name:"status",label:this.$tr("isite.cms.form.status"),field:"status",align:"left",isEditable:!1,format:t=>`<i class="${t.icon}" style="color: ${t.color}" /> <span>${t.title}</span>`,dynamicField:{name:"statusId",type:"select",props:{label:this.$tr("isite.cms.form.status")},loadOptions:{apiRoute:"apiRoutes.qwallet.statuses"}}},{name:"comment",label:this.$tr("isite.cms.label.comment"),field:"comment",align:"left",style:"max-width : 250px",format:t=>t??"..."},{name:"createdAt",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",align:"left",format:t=>this.$trd(t)}],requestParams:{include:"fromPocket,toPocket"},filters:{date:{value:null,type:"dateRange",quickFilter:!0,props:{label:this.$tr("isite.cms.label.date"),clearable:!0}},fromPocketId:{value:null,type:"select",quickFilter:!0,props:{label:this.$tr("iwallet.cms.origin"),clearable:!0},loadOptions:{apiRoute:"apiRoutes.qwallet.pockets"}},toPocketId:{value:null,type:"select",quickFilter:!0,props:{label:this.$tr("iwallet.cms.destination"),clearable:!0},loadOptions:{apiRoute:"apiRoutes.qwallet.pockets"}}}}}}},methods:{}}),L=(0,E.c)(B,[["render",F]]),N=L,S=(0,a._M)({props:{},components:{pockets:M,transactions:N},setup:function(t,e){var o=e.emit,s=f(t,o);return(0,a.Zl)("controller",s),s}}),G=(0,E.c)(S,[["render",r]]),V=G}}]);