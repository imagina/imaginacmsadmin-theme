"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[576],{70408:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var s=t(92444),l=t(74044);const n={id:"crudCardAppoinments"},i={key:0,class:"appt-card box"},o={class:"appt-card__title row items-center justify-between"},r={class:"box-title"},d={class:"appt-card__fields"},c={class:"appt-card__fields-title box-title"},m={class:"text-grey-7 q-mr-xs"},p={key:0,class:"appt-card__fields-field q-py-xs"},u={class:"text-grey-7 q-mr-xs"},f={key:0,class:"appt-card__related-users"},g={class:"row q-gutter-y-sm"},v=["src"],A={key:1,class:"appt-card__recommendation"},w={class:"box-title q-mb-sm"},b={key:2,class:"appt-card__conversation"},h={class:"box-title q-mb-sm"},D={key:3,class:"appt-card__fields"},y={class:"box-title"},Q={key:1,class:"text-caption"},_={key:4,class:"appt-card__actions text-center"},q={class:"appt-actions text-right"},W={class:"row justify-between q-gutter-sm"},x={style:{width:"600px"}};function I(e,a,t,I,k,z){const $=(0,s.E1)("btn-menu"),K=(0,s.E1)("q-separator"),C=(0,s.E1)("q-avatar"),F=(0,s.E1)("q-item-section"),E=(0,s.E1)("q-item-label"),T=(0,s.E1)("q-item"),N=(0,s.E1)("q-btn"),U=(0,s.E1)("dynamic-field"),V=(0,s.E1)("advance-chat"),j=(0,s.E1)("q-dialog");return(0,s.Wz)(),(0,s.An)("div",n,[z.rowData?((0,s.Wz)(),(0,s.An)("div",i,[(0,s.QD)("div",o,[(0,s.QD)("div",r,(0,l.WA)(z.rowData.title),1),(0,s.K2)($,{actions:t.fieldActions,"action-data":t.row},null,8,["actions","action-data"])]),(0,s.QD)("div",d,[(0,s.K2)(K,{class:"q-my-md"}),(0,s.QD)("div",c,(0,l.WA)(e.$tr("isite.cms.label.information")),1),((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(z.rowData.mainInformation,((a,t)=>((0,s.Wz)(),(0,s.An)("div",{class:"appt-card__fields-field q-py-xs",key:e.$uid()},[(0,s.QD)("label",m,(0,l.WA)(a.label)+":",1),(0,s.QD)("label",null,(0,l.WA)(a.value),1)])))),128)),((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(z.rowData.informationFields,((e,a)=>((0,s.Wz)(),(0,s.An)(s.ae,{key:a},[k.showAllInfo&&e?((0,s.Wz)(),(0,s.An)("div",p,[(0,s.QD)("label",u,(0,l.WA)(e.label)+": ",1),(0,s.QD)("label",null,(0,l.WA)(e.value),1)])):(0,s.g1)("",!0)],64)))),128))]),k.showAllInfo&&z.rowData.relatedUsers.length?((0,s.Wz)(),(0,s.An)("div",f,[(0,s.K2)(K,{class:"q-my-md"}),(0,s.QD)("div",g,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(z.rowData.relatedUsers,((e,a)=>((0,s.Wz)(),(0,s.An)("div",{key:a,class:"col-12"},[e?((0,s.Wz)(),(0,s.Az)(T,{key:0,dense:"",class:"q-px-none"},{default:(0,s.Ql)((()=>[(0,s.K2)(F,{side:"",class:"q-pr-sm"},{default:(0,s.Ql)((()=>[(0,s.K2)(C,{size:"40px"},{default:(0,s.Ql)((()=>[(0,s.QD)("img",{src:e.mediumImage},null,8,v)])),_:2},1024)])),_:2},1024),(0,s.K2)(F,null,{default:(0,s.Ql)((()=>[(0,s.K2)(E,{caption:""},{default:(0,s.Ql)((()=>[(0,s.mY)((0,l.WA)(e.rolName),1)])),_:2},1024),(0,s.K2)(E,{caption:"",class:"text-blue-grey"},{default:(0,s.Ql)((()=>[(0,s.QD)("b",null,(0,l.WA)(e.fullName),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.g1)("",!0)])))),128))])])):(0,s.g1)("",!0),k.showAllInfo&&z.rowData.recomendation?((0,s.Wz)(),(0,s.An)("div",A,[(0,s.K2)(K,{class:"q-my-sm"}),(0,s.QD)("div",w,(0,l.WA)(e.$trp("isite.cms.label.recommendation")),1),(0,s.K2)(N,{unelevated:"",color:"amber",rounded:"","no-caps":"",icon:"fas fa-info",onClick:a[0]||(a[0]=a=>e.$alert.warning({mode:"modal",message:z.rowData.recomendation,title:e.$trp("isite.cms.label.recommendation")})),label:e.$tr("iappointment.cms.message.readRecomendations")},null,8,["label"])])):(0,s.g1)("",!0),k.showAllInfo&&z.rowData.conversationId?((0,s.Wz)(),(0,s.An)("div",b,[(0,s.K2)(K,{class:"q-my-sm"}),(0,s.QD)("div",h,(0,l.WA)(e.$tr("isite.cms.label.chat")),1),(0,s.K2)(N,{unelevated:"",color:"info",rounded:"","no-caps":"",icon:"fa-light fa-message",onClick:a[1]||(a[1]=e=>k.showConversation=!0),label:e.$tr("iappointment.cms.message.readFullConversation")},null,8,["label"])])):(0,s.g1)("",!0),k.showAllInfo&&z.rowData.ratingFields?((0,s.Wz)(),(0,s.An)("div",D,[(0,s.K2)(K,{class:"q-my-sm"}),(0,s.QD)("div",y,(0,l.WA)(e.$tr("isite.cms.label.rating")),1),z.rowData.ratingFields.ratingField?((0,s.Wz)(),(0,s.Az)(U,{key:0,field:z.rowData.ratingFields.ratingField},null,8,["field"])):(0,s.g1)("",!0),z.rowData.ratingFields.rattingComments?((0,s.Wz)(),(0,s.An)("div",Q,(0,l.WA)(z.rowData.ratingFields.rattingComments),1)):(0,s.g1)("",!0)])):(0,s.g1)("",!0),"ipanel"==k.configApp.mode&&k.showAllInfo&&z.rowData.goToAppointment?((0,s.Wz)(),(0,s.An)("div",_,[(0,s.K2)(K,{class:"q-my-sm"}),(0,s.K2)(N,{unelevated:"",color:"green",rounded:"","no-caps":"",label:e.$tr("iappointment.cms.message.goToAppointment"),to:{name:"qappointment.panel.appointments.index",params:{id:z.rowData.id}}},null,8,["label","to"])])):(0,s.g1)("",!0),(0,s.QD)("div",q,[(0,s.K2)(K,{class:"q-mt-sm q-mb-md"}),(0,s.QD)("div",W,[(0,s.K2)(N,{color:"info",size:"sm",rounded:"",unelevated:"",padding:"xs md",onClick:a[2]||(a[2]=e=>k.showAllInfo=!k.showAllInfo),label:e.$tr("isite.cms.message."+(k.showAllInfo?"showLess":"showMore")),icon:"fas fa-angle-double-"+(k.showAllInfo?"up":"down")},null,8,["label","icon"])])])])):(0,s.g1)("",!0),(0,s.K2)(j,{modelValue:k.showConversation,"onUpdate:modelValue":a[3]||(a[3]=e=>k.showConversation=e)},{default:(0,s.Ql)((()=>[(0,s.QD)("div",x,[(0,s.K2)(V,{"room-id":z.rowData.conversationId,"advanced-props":{showFooter:!1}},null,8,["room-id"])])])),_:1},8,["modelValue"])])}var k=t(19058),z=t(18528)["c"];const $={beforeUnmount(){},props:{row:{default:!1},permitAction:{default:!1},fieldActions:{default:!1}},components:{advanceChat:k.c},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{configApp:z("app"),loading:!1,showAllInfo:!1,showConversation:!1}},computed:{rowData(){if(!this.row)return!1;let e=this.$clone(this.row),a=this.$store.state.quserAuth.userId,t=e.fields?e.fields.filter((e=>-1==e.name.indexOf("rating"))):[],s=!!e.fields&&e.fields.find((e=>"rating"==e.name)),l=!!e.fields&&e.fields.find((e=>"rating_comments"==e.name));return{id:e.id,title:this.$trd(e.createdAt),mainInformation:[{label:`${this.$tr("isite.cms.label.appointment")} NÂ°`,value:e.id},{label:this.$tr("isite.cms.form.status"),value:e.status.title}],informationFields:t.map((e=>({label:e.name,value:e.value}))),relatedUsers:[!(!e.assigned||e.assigned.id==a)&&{...e.assigned,rolName:this.$tr("isite.cms.form.assignedTo")},!(!e.customer||e.customer.id==a)&&{...e.customer,rolName:this.$tr("isite.cms.label.customer")}],recomendation:!(!e.options||!e.options.recommendation)&&e.options.recommendation,conversationId:!!e.conversation&&e.conversation.id,ratingFields:!(!s&&!l)&&{rattingComments:!!l&&l.value,ratingField:!!s&&{value:parseInt(s.value),type:"rating",props:{readonly:!0}}},goToAppointment:-1==[5,6].indexOf(parseInt(e.statusId))}}},methods:{init(){}}};var K=t(68716),C=t(70880),F=t(84884),E=t(11032),T=t(11252),N=t(2992),U=t(99140),V=t(30852),j=t(95252),L=t.n(j);const O=(0,K.c)($,[["render",I]]),S=O;L()($,"components",{QSeparator:C.c,QItem:F.c,QItemSection:E.c,QAvatar:T.c,QItemLabel:N.c,QBtn:U.c,QDialog:V.c})}}]);