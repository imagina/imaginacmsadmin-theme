"use strict";(globalThis["webpackChunkimagina_cms"]=globalThis["webpackChunkimagina_cms"]||[]).push([[7556],{95175:(a,t,l)=>{l.r(t),l.d(t,{default:()=>W});var e=l(92444),s=l(74044);const i={id:"postInternalPage"},o={id:"pageContent",class:"box relative-position"},n={class:"full-width row"},d={id:"usersContent",class:"q-py-lg row q-col-gutter-lg"},r={key:0},c={class:"post-card__title text-h6 ellipsis-2-lines q-mb-sm"},p={class:"post-card__subtitle text-subtitle2 ellipsis"},u=["innerHTML"],g={class:"row justify-end full-width"},m={id:"modalPostInfo",class:"full-width"},h={class:"post-card__title text-h6 ellipsis-2-lines q-mb-sm"},b={class:"post-card__subtitle text-subtitle2 ellipsis"},f=["innerHTML"];function Q(a,t,l,Q,_,v){const D=(0,e.E1)("dynamic-field"),w=(0,e.E1)("not-result"),y=(0,e.E1)("q-card-section"),k=(0,e.E1)("q-card"),q=(0,e.E1)("q-pagination"),K=(0,e.E1)("q-toolbar-title"),$=(0,e.E1)("q-btn"),P=(0,e.E1)("q-toolbar"),x=(0,e.E1)("q-dialog"),A=(0,e.E1)("inner-loading"),T=(0,e.iS)("close-popup");return(0,e.Wz)(),(0,e.An)("div",i,[(0,e.QD)("div",o,[(0,e.QD)("div",n,[(0,e.K2)(D,{modelValue:_.search,"onUpdate:modelValue":[t[0]||(t[0]=a=>_.search=a),t[1]||(t[1]=a=>v.getData())],field:v.searchField,class:"col-12 col-md-4 col-xl-3"},null,8,["modelValue","field"])]),(0,e.QD)("div",d,[_.loading||!_.posts||_.posts.length?(0,e.g1)("",!0):((0,e.Wz)(),(0,e.An)("div",r,[(0,e.K2)(w)])),((0,e.Wz)(!0),(0,e.An)(e.ae,null,(0,e.mi)(_.posts,((t,l)=>((0,e.Wz)(),(0,e.An)("div",{key:l,class:"col-12 col-md-4 col-xl-3"},[(0,e.K2)(k,{class:"post-card no-shadow cursor-pointer",bordered:"",onClick:a=>(_.modal.post=t,_.modal.show=!0)},{default:(0,e.Ql)((()=>[(0,e.QD)("div",{class:"post-card__image img-as-bg",style:(0,s.MN)(`background-image: url('${t?.mediaFiles?.mainimage.mediumThumb}')`)},null,4),(0,e.K2)(y,null,{default:(0,e.Ql)((()=>[(0,e.QD)("div",c,(0,s.WA)(t.title),1),(0,e.QD)("div",p,(0,s.WA)(a.$trd(t.createdAt)),1)])),_:2},1024),(0,e.K2)(y,{class:"post-card__description q-py-none q-mb-lg ellipsis-3-lines"},{default:(0,e.Ql)((()=>[(0,e.QD)("div",{innerHTML:t.summary},null,8,u)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))]),(0,e.QD)("div",g,[(0,e.K2)(q,{modelValue:_.pagination.page,"onUpdate:modelValue":[t[2]||(t[2]=a=>_.pagination.page=a),t[3]||(t[3]=a=>{_.pagination.page=a,v.getData()})],max:_.pagination.lastPage,input:"",color:"grey-9"},null,8,["modelValue","max"])]),(0,e.K2)(x,{id:"modalPost",modelValue:_.modal.show,"onUpdate:modelValue":t[4]||(t[4]=a=>_.modal.show=a)},{default:(0,e.Ql)((()=>[(0,e.K2)(k,{id:"cardModalPost",class:"bg-grey-1"},{default:(0,e.Ql)((()=>[(0,e.K2)(P,{class:"bg-primary text-white"},{default:(0,e.Ql)((()=>[(0,e.K2)(K,null,{default:(0,e.Ql)((()=>[(0,e.mY)((0,s.WA)(`${a.$tr("iblog.cms.post")}: ${_.modal.post.id}`),1)])),_:1}),(0,e.wt)((0,e.K2)($,{flat:"",icon:"fas fa-times"},null,512),[[T]])])),_:1}),(0,e.QD)("div",m,[_.modal.post?((0,e.Wz)(),(0,e.Az)(k,{key:0,class:"post-card no-shadow"},{default:(0,e.Ql)((()=>[(0,e.QD)("div",{class:"post-card__image img-as-bg",style:(0,s.MN)(`background-image: url('${_.modal.post?.mediaFiles?.mainimage.mediumThumb}')`)},null,4),(0,e.K2)(y,null,{default:(0,e.Ql)((()=>[(0,e.QD)("div",h,(0,s.WA)(_.modal.post.title),1),(0,e.QD)("div",b,(0,s.WA)(a.$trd(_.modal.post.createdAt)),1)])),_:1}),(0,e.K2)(y,{class:"post-card__description"},{default:(0,e.Ql)((()=>[(0,e.QD)("div",{innerHTML:_.modal.post.description},null,8,f)])),_:1})])),_:1})):(0,e.g1)("",!0)])])),_:1})])),_:1},8,["modelValue"]),(0,e.K2)(A,{visible:_.loading},null,8,["visible"])])])}var _=l(8932);const v={props:{},components:{},watch:{},mounted(){this.$nextTick((function(){this.init()}))},data(){return{loading:!1,search:null,pagination:{perPage:12,page:1,lastPage:1},posts:[],modal:{show:!1,post:!1}}},computed:{searchField(){return{value:null,type:"search"}}},methods:{init(){this.setFilters(),this.getData(),_.kN.on("page.data.refresh",(()=>this.getData(!0)))},setFilters(){this.$filter.setFilter({name:this.$route.name,fields:{categoryId:{value:null,type:"treeSelect",props:{label:this.$tr("isite.cms.label.category")},loadOptions:{apiRoute:"apiRoutes.qblog.categories"}}},callBack:()=>this.getData(!0)})},getData(a=!1){return new Promise(((t,l)=>{this.loading=!0;let e={refresh:a,params:{page:this.pagination.page,take:this.pagination.perPage,filter:{search:this.search,...this.$filter.values}}};this.$crud.index("apiRoutes.qblog.posts",e).then((a=>{this.posts=a.data,this.pagination.lastPage=a.meta.page.lastPage,this.loading=!1,t(a.data)})).catch((a=>{this.$apiResponse.handleError(a,(()=>{this.loading=!1,l(a)}))}))}))}}};var D=l(68716),w=l(70608),y=l(71008),k=l(15496),q=l(30852),K=l(6536),$=l(36524),P=l(99140),x=l(81020),A=l(95252),T=l.n(A);const E=(0,D.c)(v,[["render",Q]]),W=E;T()(v,"components",{QCard:w.c,QCardSection:y.c,QPagination:k.c,QDialog:q.c,QToolbar:K.c,QToolbarTitle:$.c,QBtn:P.c}),T()(v,"directives",{ClosePopup:x.c})}}]);