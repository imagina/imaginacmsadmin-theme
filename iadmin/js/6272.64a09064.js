"use strict";(globalThis["webpackChunkimagina_cms"]=globalThis["webpackChunkimagina_cms"]||[]).push([[6272],{69636:(t,e,s)=>{s.r(e),s.d(e,{default:()=>V});var a=s(92444),o={id:"pocketPage"},n={class:"row q-col-gutter-lg"},i={class:"col-12 col-md-4"},l={class:"col-12 col-md-8"};function c(t,e,s,c,r,d){var u=(0,a.E1)("pockets"),p=(0,a.E1)("transactions");return(0,a.Wz)(),(0,a.An)("div",o,[(0,a.QD)("div",n,[(0,a.QD)("div",i,[(0,a.K2)(u)]),(0,a.QD)("div",l,[(0,a.K2)(p)])])])}var r=s(75836),d=s(20584);const u={getPockets:function(t){return void 0===t&&(t=!1),new Promise((function(e,s){var a={refresh:t,params:{}};d.c.index("apiRoutes.qwallet.pockets",a).then((function(t){e(t)})).catch((function(t){return s(t)}))}))},getTransactions:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e={}),new Promise((function(s,a){var o={refresh:t,params:e};d.c.index("apiRoutes.qwallet.transactions",o).then((function(t){s(t)})).catch((function(t){return a(t)}))}))}};(0,r.cB)({});const p=(0,a.S6)((function(){return{}})).value;var m=function(){return m=Object.assign||function(t){for(var e,s=1,a=arguments.length;s<a;s++)for(var o in e=arguments[s],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},m.apply(this,arguments)};function f(t,e){(0,a._S)().appContext.config.globalProperties;var s={},o=(0,r.cB)({pockets:[],loadingPockets:!1}),n={},i={getPockets:function(){o.loadingPockets=!0,u.getPockets(!0).then((function(t){o.pockets=t.data,o.loadingPockets=!1})).catch((function(t){return o.loadingPockets=!1}))}};return(0,a.u2)((function(){i.getPockets()})),m(m(m(m(m({},s),(0,r.kx)(o)),n),i),{store:p})}var k=s(74044);const g={id:"pocketsView"},b={class:"row q-gutter-md relative-position"},h={class:"row justify-between items-center",style:{width:"100%"}},v={class:"text-primary text-bold",style:{"font-size":"20px"}},y={class:"row q-gutter-sm"},w={class:"pocket__top row justify-between q-mb-md"},$={class:"pocket__top-data"},P={class:"text-blue-grey"},Q={class:"text-h6"},x={class:"text-caption text-blue-grey"},A={class:"pocket__balance"},q={class:"stat-item row justify-between items-center"},D={class:"row q-gutter-xs"},C={key:0,class:"text-center full-width"};function _(t,e,o,n,i,l){const c=(0,a.E1)("q-icon"),r=(0,a.E1)("q-btn"),d=(0,a.E1)("q-separator"),u=(0,a.E1)("q-tooltip"),p=(0,a.E1)("not-result"),m=(0,a.E1)("inner-loading"),f=(0,a.E1)("crud");return(0,a.Wz)(),(0,a.An)("div",g,[(0,a.QD)("div",b,[(0,a.QD)("div",h,[(0,a.QD)("div",v,(0,k.WA)(t.$trp("iwallet.cms.pocket")),1),(0,a.QD)("div",y,[t.can.create?((0,a.Wz)(),(0,a.Az)(r,(0,a.Gu)({key:0,onClick:e[0]||(e[0]=e=>t.$refs.crudPockets.create())},t.buttonProps,{padding:"5px 15px"}),{default:(0,a.Ql)((()=>[(0,a.K2)(c,{name:"fa-solid fa-plus",class:"q-mr-sm"}),(0,a.mY)(" "+(0,k.WA)(t.$tr("isite.cms.label.new")),1)])),_:1},16)):(0,a.g1)("",!0),(0,a.K2)(r,(0,a.Gu)({onClick:t.getPockets,icon:"fal fa-rotate-right"},t.buttonProps,{padding:"10px"}),null,16,["onClick"])])]),((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(t.pockets,(e=>((0,a.Wz)(),(0,a.An)("div",{key:e.id,class:"pocket box"},[(0,a.QD)("div",w,[(0,a.QD)("div",$,[(0,a.QD)("div",P,(0,k.WA)(e.title),1),(0,a.QD)("div",Q,"$"+(0,k.WA)(t.$trn(e.total)),1)]),(0,a.QD)("div",{class:"pocket__top-icon row items-center justify-center",style:(0,k.MN)(`background-color: ${e.options?.color??"#0b5f91"}`)},[(0,a.K2)(c,{name:"far fa-wallet"})],4)]),(0,a.QD)("div",x,(0,k.WA)(e.description),1),(0,a.K2)(d,{class:"q-mb-xs"}),(0,a.QD)("div",A,[(0,a.QD)("div",q,[(0,a.QD)("div",{style:(0,k.MN)(`color: ${e.type.color}`)},[(0,a.K2)(c,{name:e.type.icon},null,8,["name"]),(0,a.mY)(" "+(0,k.WA)(e.type.title),1)],4),(0,a.QD)("div",D,[t.can.destroy?((0,a.Wz)(),(0,a.Az)(r,{key:0,icon:"fas fa-trash",flat:"",color:"blue-grey-3",size:"xs",round:"",onClick:s=>t.$refs.crudPockets.delete(e)},{default:(0,a.Ql)((()=>[(0,a.K2)(u,null,{default:(0,a.Ql)((()=>[(0,a.mY)("(pt) Eliminar")])),_:1})])),_:2},1032,["onClick"])):(0,a.g1)("",!0),t.can.edit?((0,a.Wz)(),(0,a.Az)(r,{key:1,icon:"fas fa-pen",flat:"",color:"blue-grey-3",size:"xs",round:"",onClick:s=>t.$refs.crudPockets.update(e)},{default:(0,a.Ql)((()=>[(0,a.K2)(u,null,{default:(0,a.Ql)((()=>[(0,a.mY)("(pt) Editar")])),_:1})])),_:2},1032,["onClick"])):(0,a.g1)("",!0)])])])])))),128)),t.pockets.length||t.loadingPockets?(0,a.g1)("",!0):((0,a.Wz)(),(0,a.An)("div",C,[(0,a.K2)(p)])),(0,a.K2)(m,{visible:t.loadingPockets},null,8,["visible"])]),(0,a.K2)(f,{"crud-data":s.e(9076).then(s.bind(s,69076)),type:"onlyUpdate",ref:"crudPockets",onCreated:t.getPockets,onUpdated:t.getPockets,onDeleted:t.getPockets},null,8,["crud-data","onCreated","onUpdated","onDeleted"])])}const z=(0,a._M)({setup(t){return(0,a.uU)("controller")},computed:{},data(){return{can:{create:this.$hasAccess("iwallet.pockets.create"),edit:this.$hasAccess("iwallet.pockets.edit"),destroy:this.$hasAccess("iwallet.pockets.destroy")},buttonProps:{round:!1,rounded:!0,dense:!0,unelevated:!0,textColor:"primary",style:"border: 1px solid rgb(229 229 229)",noCaps:!0,class:"btn-small"}}},methods:{}});var W=s(68716),E=s(99140),K=s(58120),R=s(70880),U=s(90111),j=s(95252),O=s.n(j);const I=(0,W.c)(z,[["render",_]]),M=I;O()(z,"components",{QBtn:E.c,QIcon:K.c,QSeparator:R.c,QTooltip:U.c});const F={id:"transactionsView"};function T(t,e,o,n,i,l){const c=(0,a.E1)("dynamic-list"),r=(0,a.E1)("crud");return(0,a.Wz)(),(0,a.An)("div",F,[(0,a.K2)(c,{"list-config":t.listConfig,onNew:e[0]||(e[0]=e=>t.$refs.transactionCrud.create()),ref:"transactionList",onUpdatedRow:t.getPockets},null,8,["list-config","onUpdatedRow"]),(0,a.K2)(r,{"crud-data":s.e(9116).then(s.bind(s,49116)),type:"onlyform",ref:"transactionCrud",onCreated:e[1]||(e[1]=e=>(t.$refs.transactionList.getData({page:1}),t.getPockets()))},null,8,["crud-data"])])}var Y=s(86288);const B=(0,a._M)({components:{dynamicList:Y.c},setup(t){return(0,a.uU)("controller")},computed:{},data(){return{listConfig:{apiRoute:"apiRoutes.qwallet.transactions",permission:"iwallet.transactions",pageActions:{extraActions:this.$hasAccess("iwallet.transactions.create")?["new"]:[]},read:{title:this.$trp("iwallet.cms.transaction"),columns:[{name:"id",field:"id",label:"ID"},{name:"type",label:this.$tr("isite.cms.form.type"),field:"type",align:"left",format:t=>`<i class="${t.icon}" style="color: ${t.color}" /> <span class="q-ml-sm">${t.title}</span>`},{name:"amount",label:this.$tr("isite.cms.label.amount"),field:"amount",align:"left",format:t=>"$"+this.$trn(t)},{name:"origin",label:this.$tr("iwallet.cms.origin"),field:"fromPocket",align:"left",format:t=>t?.title??"-"},{name:"destination",label:this.$tr("iwallet.cms.destination"),field:"toPocket",align:"left",format:t=>t?.title??"-"},{name:"status",label:this.$tr("isite.cms.form.status"),field:"status",align:"left",isEditable:!1,format:t=>`<i class="${t.icon}" style="color: ${t.color}" /> <span>${t.title}</span>`,dynamicField:t=>this.$hasAccess("iwallet.transactions.edit")?{name:"statusId",type:"select",props:{label:this.$tr("isite.cms.form.status")},loadOptions:{apiRoute:"apiRoutes.qwallet.statuses"}}:null},{name:"comment",label:this.$tr("isite.cms.label.comment"),field:"comment",align:"left",style:"max-width : 250px",format:t=>t??"..."},{name:"createdAt",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",align:"left",format:t=>this.$trd(t)}],requestParams:{include:"fromPocket,toPocket"},filters:{date:{value:null,type:"dateRange",quickFilter:!0,props:{label:this.$tr("isite.cms.label.date"),clearable:!0}},fromPocketId:{value:null,type:"select",quickFilter:!0,props:{label:this.$tr("iwallet.cms.origin"),clearable:!0},loadOptions:{apiRoute:"apiRoutes.qwallet.pockets"}},toPocketId:{value:null,type:"select",quickFilter:!0,props:{label:this.$tr("iwallet.cms.destination"),clearable:!0},loadOptions:{apiRoute:"apiRoutes.qwallet.pockets"}}}}}}},methods:{}}),L=(0,W.c)(B,[["render",T]]),N=L,S=(0,a._M)({props:{},components:{pockets:M,transactions:N},setup:function(t,e){var s=e.emit,o=f(t,s);return(0,a.Zl)("controller",o),o}}),G=(0,W.c)(S,[["render",c]]),V=G}}]);