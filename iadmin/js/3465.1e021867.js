"use strict";(globalThis["webpackChunkadmin_quasar"]=globalThis["webpackChunkadmin_quasar"]||[]).push([[3465],{33465:(e,t,i)=>{function s(e,t,i,s,a,l){return null}i.r(t),i.d(t,{default:()=>o});var a=i(99526)["A"];const l={data(){return{crudId:this.$uid(),users:[]}},computed:{crudData(){return{crudId:this.crudId,entityName:a("main.qnotification.entityNames.notification"),apiRoute:"apiRoutes.qnotification.notifications",permission:"notification.notifications",create:{title:this.$tr("notification.cms.newNotification"),requestParams:{notToSnakeCase:["saveInDatabase"]}},read:{columns:[{name:"id",label:this.$tr("isite.cms.form.id"),field:"id",style:"width: 50px"},{name:"type",label:this.$tr("isite.cms.label.provider"),field:"type",align:"rigth"},{name:"user",label:this.$tr("isite.cms.label.user"),field:"user",align:"rigth",format:e=>e?.fullName||"-"},{name:"recipient",label:this.$tr("isite.cms.label.recipient"),field:"recipientUser",align:"rigth",format:(e,t)=>t.recipientUser?.email||t.recipient},{name:"title",label:this.$tr("isite.cms.form.title"),field:"title",align:"rigth",classes:"ellipsis",style:"max-width : 250px"},{name:"message",label:this.$tr("notification.cms.label.message"),field:"message",align:"rigth",classes:"ellipsis",style:"max-width : 250px"},{name:"created_at",label:this.$tr("isite.cms.form.createdAt"),field:"createdAt",align:"right",format:e=>e?this.$trd(e):"-"},{name:"updated_at",label:this.$tr("isite.cms.form.updatedAt"),field:"updatedAt",align:"right",format:e=>e?this.$trd(e):"-"}],requestParams:{include:"user,recipientUser"}},update:!1,delete:!1,formLeft:{id:{value:""},providers:{value:[],type:"select",required:!0,props:{label:`${this.$trp("isite.cms.label.provider")}*`,multiple:!0,useChips:!0,options:[{label:"Email",value:"email"},{label:"Broadcast",value:"broadcast",sublabel:this.$tr("notification.cms.helpTextBroadcastOption")},{label:this.$tr("notification.cms.isImportant"),value:"broadcastImportant",sublabel:this.$tr("notification.cms.isImportantHelpText")}]}},users:{value:[],type:"select",props:{label:`${this.$trp("isite.cms.label.recipient")}*`,multiple:!0,useChips:!0,useInput:!0,rules:[e=>!!e?.length||this.$tr("isite.cms.message.fieldRequired")]},loadOptions:{apiRoute:"apiRoutes.quser.users",filterByQuery:!0,select:{label:"email",id:e=>`${e.id}::${e.email}`,sublabel:"fullName"}}},title:{value:"",type:"input",required:!0,props:{label:`${this.$tr("isite.cms.form.title")}*`}},message:{value:"",type:"html",props:{label:`${this.$tr("notification.cms.label.message")} *`,rules:[e=>!!e||this.$tr("isite.cms.message.fieldRequired")]}}},formRight:{link:{value:null,type:"input",props:{label:"URL"}},mediasSingle:{name:"mediasSingle",value:{},type:"media",props:{label:this.$tr("isite.cms.form.image"),zone:"mainimage",entity:"Modules\\Notification\\Entities\\Notification",entityId:null}}},getDataForm:(e,t)=>new Promise(((t,i)=>{let s={userId:this.$store.state.quserAuth.userId,source:a("app.mode"),setting:{saveInDatabase:"1"},title:e.title,message:e.message,mediasSingle:e.mediasSingle,link:e.link,to:{},options:{}},l={broadcast:e.users.map((e=>e.split("::")[0])),email:e.users.map((e=>e.split("::")[1]))};e.providers.forEach((e=>{"broadcastImportant"==e&&(e="broadcast",s.options.isImportant=!0),s.to[e]=l[e]})),t(s)}))}}}};var r=i(12807);const n=(0,r.A)(l,[["render",s]]),o=n}}]);