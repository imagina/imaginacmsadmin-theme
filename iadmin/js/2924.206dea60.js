"use strict";(globalThis["webpackChunkimagina_cms"]=globalThis["webpackChunkimagina_cms"]||[]).push([[2924],{92924:(t,e,a)=>{a.r(e),a.d(e,{default:()=>kn});var n=a(92444),s=a(74044),i=a(264);const o={class:"page-header tw-border-b-2 tw-border-white tw-border-opacity-50 tw-fixed tw-top-0 tw-left-0 tw-z-20 tw-flex tw-justify-center tw-items-center tw-w-full tw-h-20"},r=["href"],l=["src"],c={class:"step-loading"},d=(0,n.QD)("div",null,null,-1),m=(0,n.QD)("div",null,null,-1),u=[d,m],p={class:"page-wizard tw-w-full tw-relative"},g={class:"tw-pt-3 md:tw-pt-4 tw-pb-1"},h={class:"row justify-between"},f={class:"col-4"},w={class:"tw-hidden sm:tw-inline-block"},v={class:"col-4 text-right"},y={class:"tw-hidden sm:tw-inline-block"};function b(t,e,a,d,m,b){const x=(0,n.E1)("q-linear-progress"),z=(0,n.E1)("q-btn"),Q=(0,n.E1)("q-stepper-navigation"),D=(0,n.E1)("q-step"),A=(0,n.E1)("q-stepper"),W=(0,n.E1)("inner-loading");return(0,n.Wz)(),(0,n.An)("div",{id:"wizardOrganization",class:(0,s.WN)(["tw-h-screen 'overflow-auto",{"page-full":m.currentStep==m.welcome||m.currentStep==m.summary,"overflow-hidden":m.currentStep==m.themes}])},[(0,n.QD)("div",o,[(0,n.QD)("a",{href:m.urlBase},[(0,n.QD)("img",{src:m.logo,class:"tw-h-20 tw-w-auto"},null,8,l)],8,r),(0,n.K2)(x,{style:{"background-color":"#ffff"},size:"md","track-color":"white",value:m.progress,class:"linear-progress-header"},null,8,["value"])]),(0,n.wt)((0,n.QD)("div",c,u,512),[[i.Ub,m.loading]]),(0,n.QD)("div",p,[(0,n.K2)(A,{modelValue:m.currentStep,"onUpdate:modelValue":e[4]||(e[4]=t=>m.currentStep=t),ref:"stepper"},{navigation:(0,n.Ql)((()=>[(0,n.wt)((0,n.K2)(Q,null,{default:(0,n.Ql)((()=>[(0,n.QD)("div",g,[(0,n.QD)("div",h,[(0,n.QD)("div",f,[(0,n.wt)((0,n.K2)(z,{rounded:"","no-caps":"",disabled:!b.activatePreviousButton,unelevated:"",color:"blue-grey",icon:"fas fa-arrow-left tw-mr-0 sm:tw-mr-2",onClick:e[0]||(e[0]=t=>b.previousStep())},{default:(0,n.Ql)((()=>[(0,n.QD)("div",w,(0,s.WA)(t.$tr("isite.cms.label.previous")),1)])),_:1},8,["disabled"]),[[i.Ub,!m.buttonLoading]])]),(0,n.QD)("div",v,[(0,n.K2)(z,{rounded:"","no-caps":"",disabled:!b.activateNextButton,"icon-right":"fas fa-arrow-right tw-ml-0 sm:tw-ml-2",onClick:e[1]||(e[1]=t=>b.nextStep()),unelevated:"",color:"green",loading:m.buttonLoading},{default:(0,n.Ql)((()=>[(0,n.QD)("div",y,(0,s.WA)(m.currentStep===m.summary?t.$tr("isite.cms.label.finalize"):t.$tr("isite.cms.label.continue")),1)])),_:1},8,["disabled","loading"])])])])])),_:1},512),[[i.Ub,b.showStepperNavigation]])])),default:(0,n.Ql)((()=>[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(b.steps,(t=>((0,n.Wz)(),(0,n.Az)(D,{key:t.id,name:t.id,prefix:t.prefix,title:t.title,done:t.done,class:"q-pb-xl",style:(0,s.MN)(t.id==m.themes?"max-height: calc(100vh - 180px);":"")},{default:(0,n.Ql)((()=>[m.loading?(0,n.g1)("",!0):((0,n.Wz)(),(0,n.Az)((0,n.mk)(t.component),{key:0,ref_for:!0,ref:"stepComponent",onUpdateData:e[2]||(e[2]=t=>b.updateData(m.data)),onNextStep:e[3]||(e[3]=t=>b.nextStep())},null,544))])),_:2},1032,["name","prefix","title","done","style"])))),128))])),_:1},8,["modelValue"])]),(0,n.K2)(W,{visible:m.loading},null,8,["visible"])],2)}const x={class:"step-categories"},z={key:0,class:"step-title"},Q={class:"tw-px-2 md:tw-px-6 tw-pb-6 tw-mt-4 tw-mb-2"},D={class:"tw-text-xs tw-mt-2"},A={class:"tw-font-bold"},W={key:1,class:"stepp-loading"},S=(0,n.QD)("div",null,null,-1),C=(0,n.QD)("div",null,null,-1),k=[S,C],$={key:2},T={key:0,class:"tw-px-2 md:tw-px-6"},I={class:"row q-gutter-sm items-stars justify-between tw-mb-4"},_=["onClick"],V={class:"row q-gutter-sm justify-center"},E={class:"col-12"},q=(0,n.QD)("hr",{class:"tw-my-3 tw-w-1/2 tw-mx-auto"},null,-1),B=[q],L={class:"col-auto"},P={class:"col-auto"},U={key:1,class:"tw-px-2 md:tw-px-6"},F={key:3,class:"step-sidebar"},N={class:"categories-text tw-max-w-sm tw-w-full"},K=["innerHTML"];function M(t,e,a,o,r,l){const c=(0,n.E1)("dynamic-field"),d=(0,n.E1)("q-btn"),m=(0,n.E1)("q-img");return(0,n.Wz)(),(0,n.An)("div",x,[r.stepContent?((0,n.Wz)(),(0,n.An)("h2",z,(0,s.WA)(r.stepContent.title),1)):(0,n.g1)("",!0),(0,n.QD)("div",Q,[(0,n.K2)(c,{modelValue:r.name,"onUpdate:modelValue":[e[0]||(e[0]=t=>r.name=t),l.getCategoriesSearch],field:l.formFields.category},null,8,["modelValue","field","onUpdate:modelValue"]),(0,n.wt)((0,n.QD)("div",D,[(0,n.mY)((0,s.WA)(t.$tr("isite.cms.message.selectedCategory"))+": ",1),(0,n.QD)("span",A,(0,s.WA)(r.selected.title),1)],512),[[i.Ub,r.selected]])]),r.loading?((0,n.Wz)(),(0,n.An)("div",W,k)):((0,n.Wz)(),(0,n.An)("div",$,[r.categories.length>=1?((0,n.Wz)(),(0,n.An)("div",T,[(0,n.QD)("div",I,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(r.categories,((t,e)=>(0,n.wt)(((0,n.Wz)(),(0,n.An)("div",{class:"col-auto tw-mb-3",onClick:e=>l.selectData(t)},[(0,n.QD)("div",{class:(0,s.WN)(["text-category tw-text-sm tw-rounded-lg tw-px-3 tw-py-1 tw-cursor-pointer",{"text-active-cate":t.id===r.selected.id}])},(0,s.WA)(t.title),3)],8,_)),[[i.Ub,(r.pag-1)*r.limitPage<=e&&r.pag*r.limitPage>e]]))),256))]),(0,n.QD)("div",V,[(0,n.wt)((0,n.QD)("div",E,B,512),[[i.Ub,1!=r.pag]]),(0,n.QD)("div",L,[(0,n.wt)((0,n.K2)(d,{padding:"none",round:"",flat:"",color:"primary",icon:"arrow_circle_left",onClick:e[1]||(e[1]=(0,i.Y7)((t=>r.pag-=1),["prevent"]))},null,512),[[i.Ub,1!=r.pag]])]),(0,n.QD)("div",P,[(0,n.wt)((0,n.K2)(d,{padding:"none",round:"",flat:"",color:"primary",icon:"arrow_circle_right",onClick:e[2]||(e[2]=(0,i.Y7)((t=>r.pag+=1),["prevent"]))},null,512),[[i.Ub,r.pag*r.limitPage/r.categories.length<1]])])])])):((0,n.Wz)(),(0,n.An)("div",U,(0,s.WA)(t.$tr("isite.cms.message.noCategories")),1))])),r.stepContent?((0,n.Wz)(),(0,n.An)("div",F,[(0,n.QD)("div",N,[(0,n.QD)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:r.stepContent.description},null,8,K),r.stepContent?.mediaFiles?((0,n.Wz)(),(0,n.Az)(m,{key:0,fit:"contain",src:r.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1},null,8,["src"])):(0,n.g1)("",!0)])])):(0,n.g1)("",!0)])}var H=a(75836);const j=0,R=1,O=2,Y=3,G=4,J=5,X=6,Z=7,tt=25,et="admin_organization_wizard_terms",at="admin_organization_wizard_organization",nt="admin_organization_wizard_category",st="admin_organization_wizard_theme",it="admin_organization_wizard_plan",ot="admin_organization_wizard_welcome",rt="admin_organization_wizard_summary",lt="admin_organization_wizard_ai",ct=30;function dt(t){return ut.infoWizard.find((function(e){return(null===e||void 0===e?void 0:e.systemName)===t}))}var mt={user:!1,terms:{check:!1,email:!1},category:!1,layout:!1,plan:!1,organization:"",form:{check:!1,data:{}}},ut=(0,H.cB)({infoWizard:[{systemName:""}],categories:!1,step:0,previousStepButton:!0,nextStepButton:!0,data:mt}),pt=(0,n.S6)((function(){return{get infoWizard(){return ut.infoWizard},set infoWizard(t){ut.infoWizard=t},get categories(){return ut.categories},set categories(t){ut.categories=t},get step(){return ut.step},set step(t){ut.step=t},get previousStepButton(){return ut.previousStepButton},set previousStepButton(t){ut.previousStepButton=t},get nextStepButton(){return ut.nextStepButton},set nextStepButton(t){ut.nextStepButton=t},get data(){return ut.data},set data(t){ut.data=t},get infoWelcome(){return dt(ot)},get infoTerms(){return dt(et)},get infoCompany(){return dt(at)},get infoCategories(){return dt(nt)},get infoPlans(){return dt(it)},get infoThemes(){return dt(st)},get infoAi(){return dt(lt)},get infoSummary(){return dt(rt)}}})).value;const gt=pt;var ht=a(20584),ft=function(t,e,a,n){function s(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,i){function o(t){try{l(n.next(t))}catch(e){i(e)}}function r(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?a(t.value):s(t.value).then(o,r)}l((n=n.apply(t,e||[])).next())}))},wt=function(t,e){var a,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(t){return function(e){return l([t,e])}}function l(r){if(a)throw new TypeError("Generator is already executing.");while(i&&(i=0,r[0]&&(o=0)),o)try{if(a=1,n&&(s=2&r[0]?n["return"]:r[0]?n["throw"]||((s=n["return"])&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(l){r=[6,l],n=0}finally{a=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};function vt(){function t(t){return ft(this,void 0,void 0,(function(){var t,e;return wt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,ht.c.show("apiRoutes.qgamification.categories","admin_organization_wizard",{refresh:!1,params:{filter:{field:"system_name"},include:"activities"}})];case 1:return t=a.sent(),[2,t.data.activities];case 2:return e=a.sent(),console.log("Error in wizard/services.getInfoWizard "+e),[3,3];case 3:return[2]}}))}))}function e(){return ft(this,void 0,void 0,(function(){var t,e,a,n;return wt(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t={refresh:!0},[4,ht.c.index("apiRoutes.qsite.categories",t)];case 1:return e=s.sent(),a=e.data.sort((function(t,e){return t.title.localeCompare(e.title)})),[2,a];case 2:return n=s.sent(),console.log("Error in wizard/services.getCategories "+n),[3,3];case 3:return[2]}}))}))}function a(t){return ft(this,void 0,void 0,(function(){var e,a,n,s;return wt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e={filter:{search:t}},[4,ht.c.index("apiRoutes.qsite.categories",{refresh:!0,params:e})];case 1:return a=i.sent(),n=a.data.sort((function(t,e){return t.title.localeCompare(e.title)})),[2,n];case 2:return s=i.sent(),console.log("Error in wizard/services.getCategoriesSearch "+s),[3,3];case 3:return[2]}}))}))}function n(t){return ft(this,void 0,void 0,(function(){var t,e,a,n,s;return wt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t={refresh:!0,params:{include:"product",filter:{internal:!1}}},[4,ht.c.index("apiRoutes.qplan.plans",t)];case 1:return e=i.sent(),a={refresh:!0,params:{filter:{id:e.data.map((function(t){return t.product.id})),status:!0,validationInternal:!0},include:"productOptions,optionValues,relatedProducts"}},[4,ht.c.index("apiRoutes.qcommerce.products",a)];case 2:return n=i.sent(),n.data.forEach((function(t,a){if(!t.optionValues.length){var s=e.data.find((function(e){return e.product.id==t.id}));n.data[a].optionValues=[{optionValue:s.frequency,price:s.price}]}})),[2,n.data];case 3:return s=i.sent(),console.log("Error in wizard/services.getPlans "+s),[2,[]];case 4:return[2]}}))}))}function s(t){return ft(this,void 0,void 0,(function(){var e,a,n;return wt(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e={filter:{id:t},include:"productOptions,optionValues,relatedProducts,categories"},[4,ht.c.index("apiRoutes.qcommerce.products",{refresh:!0,params:e})];case 1:return a=s.sent(),[2,a.data];case 2:return n=s.sent(),console.log("Error in wizard/services.getPlan "+n),[3,3];case 3:return[2]}}))}))}return{getInfoWizard:t,getCategories:e,getCategoriesSearch:a,getPlans:n,getPlan:s}}const yt={emits:["updateData"],data(){return{loading:!1,limitPage:ct,pag:1,stepContent:"",name:"",selected:"",categories:[]}},mounted(){this.$nextTick((async function(){gt.nextStepButton=!1,this.getDataBase(),this.getCategorySelected(),this.getStepInfo()}))},computed:{formFields(){return{category:{value:"",type:"search",props:{label:this.$tr("isite.cms.label.search"),color:"primary",rounded:!0,dense:!1}}}}},methods:{selectData(t){this.selected=t,gt.data.category=this.selected,gt.nextStepButton=!0,this.$emit("updateData",t)},deselectCategory(t){this.selected="",gt.data.category=this.selected,gt.nextStepButton=!1,this.$emit("updateData",""),this.name=t},async getDataBase(){this.categories=gt.categories},async getCategorySelected(){this.loading=!0,gt.data.category&&(this.selected=gt.data.category,gt.nextStepButton=!0),this.loading=!1},async getCategoriesSearch(){try{if(null!==this.name&&this.name.length>3){this.deselectCategory(this.name),this.loading=!0;const t=await vt().getCategoriesSearch(this.name);this.loading=!1,this.categories=t}else this.getDataBase()}catch(t){console.log(t)}},async getStepInfo(){this.stepContent=gt.infoCategories}}};var bt=a(68716),xt=a(99140),zt=a(6616),Qt=a(90111),Dt=a(95252),At=a.n(Dt);const Wt=(0,bt.c)(yt,[["render",M]]),St=Wt;At()(yt,"components",{QBtn:xt.c,QImg:zt.c,QTooltip:Qt.c});const Ct={class:"step-company"},kt={key:0,class:"tw-pt-10"},$t={class:"step-title"},Tt=["innerHTML"],It={class:"tw-px-2 md:tw-px-10 tw-mb-8"},_t={key:1,class:"step-sidebar"},Vt={class:"select-company tw-max-w-md tw-w-full"};function Et(t,e,a,i,o,r){const l=(0,n.E1)("dynamic-field"),c=(0,n.E1)("q-img");return(0,n.Wz)(),(0,n.An)("div",Ct,[o.stepContent?((0,n.Wz)(),(0,n.An)("div",kt,[(0,n.QD)("h2",$t,(0,s.WA)(o.stepContent.title),1),(0,n.QD)("div",{class:"tw-text-base tw-px-2 md:tw-px-14 tw-text-center tw-mb-10",innerHTML:o.stepContent.description},null,8,Tt)])):(0,n.g1)("",!0),(0,n.QD)("div",It,[(0,n.K2)(l,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.name=t),field:r.formFields.nameOrganizations},null,8,["modelValue","field"])]),o.stepContent?((0,n.Wz)(),(0,n.An)("div",_t,[(0,n.QD)("div",Vt,[o.stepContent.mediaFiles?((0,n.Wz)(),(0,n.Az)(c,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1},null,8,["src"])):(0,n.g1)("",!0)])])):(0,n.g1)("",!0)])}const qt={data(){return{name:"",stepContent:""}},mounted(){this.$nextTick((async function(){this.checkName(),this.getData(),this.getStepInfo()}))},watch:{name(t,e){this.checkName()}},computed:{formFields(){return{nameOrganizations:{type:"input",props:{icon:"corporate_fare",label:this.$tr("isite.cms.form.name"),color:"primary",rounded:!0,dense:!1}}}}},methods:{async getData(){""!==gt.data.organization&&(this.name=gt.data.organization)},checkName(){this.name.length>5?(gt.nextStepButton=!0,gt.data.organization=this.name):gt.nextStepButton=!1},getStepInfo(){this.stepContent=gt.infoCompany},async checkOrganizationName(t){return new Promise(((e,a)=>{let n={refresh:!0,params:{filter:{field:"title"}}};this.$crud.show("apiRoutes.qsite.organizations",t,n).then((t=>{e(t.data)})).catch((t=>{this.$apiResponse.handleError(t,(()=>{a(t)}))}))}))}}},Bt=(0,bt.c)(qt,[["render",Et]]),Lt=Bt;At()(qt,"components",{QImg:zt.c});const Pt={class:"step-plan"},Ut={key:0,class:"step-title"},Ft={key:1,class:"step-loading"},Nt=(0,n.QD)("div",null,null,-1),Kt=(0,n.QD)("div",null,null,-1),Mt=[Nt,Kt],Ht={key:2},jt={key:0},Rt={class:"tw-text-lg tw-font-semibold"},Ot={class:"tw-text-xs"},Yt={class:"row items-center"},Gt={class:"tw-font-bold"},Jt={key:1,class:"text-center tw-mt-6"},Xt={class:"step-sidebar"},Zt={class:"text-h5 q-mb-xs"},te=["innerHTML"],ee={class:"text-right"},ae={class:"text-h6 tw-font-bold text-primary"},ne={key:1,class:"select-card tw-max-w-md tw-w-full"},se=["innerHTML"];function ie(t,e,a,i,o,r){const l=(0,n.E1)("q-tab"),c=(0,n.E1)("q-tabs"),d=(0,n.E1)("q-item-section"),m=(0,n.E1)("q-separator"),u=(0,n.E1)("q-card-section"),p=(0,n.E1)("q-card"),g=(0,n.E1)("q-expansion-item"),h=(0,n.E1)("q-list"),f=(0,n.E1)("q-tab-panel"),w=(0,n.E1)("q-tab-panels"),v=(0,n.E1)("q-img");return(0,n.Wz)(),(0,n.An)("div",Pt,[o.stepContent?((0,n.Wz)(),(0,n.An)("h2",Ut,(0,s.WA)(o.stepContent.title),1)):(0,n.g1)("",!0),o.loading?((0,n.Wz)(),(0,n.An)("div",Ft,Mt)):((0,n.Wz)(),(0,n.An)("div",Ht,[o.tab.length>0?((0,n.Wz)(),(0,n.An)("div",jt,[(0,n.K2)(c,{modelValue:o.tabActive,"onUpdate:modelValue":e[0]||(e[0]=t=>o.tabActive=t),"active-color":"primary","indicator-color":"primary","narrow-indicator":"",class:"tw-mb-4"},{default:(0,n.Ql)((()=>[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(o.tab,((t,e)=>((0,n.Wz)(),(0,n.Az)(l,{name:t.optionValue,label:t.optionValue,key:e},null,8,["name","label"])))),128))])),_:1},8,["modelValue"]),(0,n.K2)(w,{modelValue:o.tabActive,"onUpdate:modelValue":e[1]||(e[1]=t=>o.tabActive=t),animated:""},{default:(0,n.Ql)((()=>[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(o.tab,((t,e)=>((0,n.Wz)(),(0,n.Az)(f,{name:t.optionValue,key:e},{default:(0,n.Ql)((()=>[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(o.plans,((e,a)=>((0,n.Wz)(),(0,n.An)(n.ae,{key:a},[e.optionValue==t.optionValue?((0,n.Wz)(),(0,n.Az)(h,{key:0,bordered:"",separator:"",class:(0,s.WN)(["tw-mb-4 cursor-pointer tw-rounded-md item-plan tw-mx-2 md:tw-mx-6",{activePlan:e.id===o.selected.id&&e.planId===o.selected.planId}]),onClick:t=>r.selectPlan(e)},{default:(0,n.Ql)((()=>[(0,n.K2)(g,{"expand-icon-toggle":"",group:"plans",modelValue:e.active,"onUpdate:modelValue":t=>e.active=t},{header:(0,n.Ql)((()=>[(0,n.K2)(d,null,{default:(0,n.Ql)((()=>[(0,n.QD)("div",Rt,(0,s.WA)(e.planName),1),(0,n.QD)("div",Ot,(0,s.WA)(e.planName),1)])),_:2},1024),(0,n.K2)(d,{side:""},{default:(0,n.Ql)((()=>[(0,n.QD)("div",Yt,[(0,n.QD)("span",Gt,(0,s.WA)(e.price),1),(0,n.mY)(" / "+(0,s.WA)(e.optionValue),1)])])),_:2},1024)])),default:(0,n.Ql)((()=>[(0,n.K2)(p,null,{default:(0,n.Ql)((()=>[(0,n.K2)(m),(0,n.K2)(u,{innerHTML:e.planDescription},null,8,["innerHTML"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class","onClick"])):(0,n.g1)("",!0)],64)))),128))])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])):((0,n.Wz)(),(0,n.An)("div",Jt,"No hay planes disponibles"))])),(0,n.QD)("div",Xt,[o.selected?((0,n.Wz)(),(0,n.Az)(p,{key:0,class:"select-card tw-border-t-8 tw-max-w-lg",flat:"",bordered:""},{default:(0,n.Ql)((()=>[(0,n.K2)(u,null,{default:(0,n.Ql)((()=>[(0,n.QD)("div",Zt,(0,s.WA)(o.selected.planName),1),(0,n.QD)("div",{class:"text-caption text-grey overflow-ellipsis overflow-hidden",innerHTML:o.selected.planSummary},null,8,te),(0,n.QD)("div",ee,[(0,n.QD)("span",ae,(0,s.WA)(o.selected.price),1),(0,n.mY)(" / "+(0,s.WA)(o.selected.optionValue),1)])])),_:1}),(0,n.K2)(m),(0,n.K2)(u,{class:"tw-text-xs",innerHTML:o.selected.planDescription},null,8,["innerHTML"])])),_:1})):o.stepContent?((0,n.Wz)(),(0,n.An)("div",ne,[(0,n.QD)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:o.stepContent.description},null,8,se),o.stepContent?.mediaFiles?((0,n.Wz)(),(0,n.Az)(v,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])):(0,n.g1)("",!0)])):(0,n.g1)("",!0)])])}const oe={props:{info:{type:Array,default:()=>[]}},emits:["updateData"],data(){return{loading:!1,stepContent:"",tabActive:"",tab:[],selected:"",plans:[]}},inject:{infoBase:{type:Object,default:()=>{}}},mounted(){this.$nextTick((async function(){gt.nextStepButton=!1,this.getData(),this.getPlanSelected(),this.getStepInfo()}))},methods:{selectPlan(t){t.active=!t.active,this.selected=t,gt.data.plan=this.selected,gt.nextStepButton=!0,this.$emit("updateData",t)},async getPlanSelected(){try{gt.data.plan&&(this.selected=gt.data.plan,this.tabActive=this.selected.optionValue,gt.nextStepButton=!0),this.loading=!1}catch(t){console.log(t)}},mapInfoPlan(t){if(t.length>0){this.tab=t[0].optionValues.slice(0,2).sort(((t,e)=>t.optionValue.localeCompare(e.optionValue))),this.tabActive||(this.tabActive=this.tab[0].optionValue);let e=[],a=[];return t.map((function(t,n){const s=t.optionValues.filter(((t,e)=>e<2));a=s.map((e=>({...e,product:t,planId:t.id,planName:t.name,planSummary:t.summary,planDescription:t.description,planRelatedProducts:t.relatedProducts,planUrl:t.url,active:!1}))),e.unshift(a)})),e.flatMap((t=>t))}return[]},async getData(){this.plans=this.mapInfoPlan(gt.plans)},async getStepInfo(){this.stepContent=gt.infoPlans}}};var re=a(38788),le=a(7628),ce=a(65264),de=a(5296),me=a(99588),ue=a(61656),pe=a(11032),ge=a(70608),he=a(70880),fe=a(71008),we=a(84884),ve=a(58120);const ye=(0,bt.c)(oe,[["render",ie]]),be=ye;At()(oe,"components",{QTabs:re.c,QTab:le.c,QTabPanels:ce.c,QTabPanel:de.c,QList:me.c,QExpansionItem:ue.c,QItemSection:pe.c,QCard:ge.c,QSeparator:he.c,QCardSection:fe.c,QImg:zt.c,QItem:we.c,QIcon:ve.c});const xe={class:"step-themes"},ze={key:0,class:"step-title"},Qe={key:1,class:"step-loading"},De=(0,n.QD)("div",null,null,-1),Ae=(0,n.QD)("div",null,null,-1),We=[De,Ae],Se={key:2,class:"row tw-justify-center tw-px-2"},Ce={key:0,class:"col-12 tw-text-xs tw-mt-2 tw-px-3"},ke={class:"tw-font-bold"},$e={key:1,class:"col-12"},Te={class:"row"},Ie={class:"col-6 col-sm-3 tw-mb-2 tw-p-3 tw-cursor-pointer"},_e=["onClick"],Ve={class:"item-theme-name tw-text-xs text-center text-weight-bold"},Ee={key:2,class:"col-12 tw-text-base"},qe={key:3,class:"step-sidebar"},Be={key:0,class:"select-card tw-max-w-md tw-w-full text-center"},Le={class:"select-name text-center text-weight-bold tw-mt-2 text-primary text-h6"},Pe=["innerHTML"],Ue={key:1,class:"select-card tw-max-w-md tw-w-full"},Fe=["innerHTML"];function Ne(t,e,a,i,o,r){const l=(0,n.E1)("q-img"),c=(0,n.E1)("q-btn");return(0,n.Wz)(),(0,n.An)("div",xe,[o.stepContent?((0,n.Wz)(),(0,n.An)("h2",ze,(0,s.WA)(o.stepContent.title),1)):(0,n.g1)("",!0),o.loading?((0,n.Wz)(),(0,n.An)("div",Qe,We)):((0,n.Wz)(),(0,n.An)("div",Se,[o.selected?((0,n.Wz)(),(0,n.An)("div",Ce,[(0,n.mY)((0,s.WA)(t.$tr("isite.cms.message.selectedTemplate"))+" : ",1),(0,n.QD)("span",ke,(0,s.WA)(o.selected.name),1)])):(0,n.g1)("",!0),o.themes.length>0?((0,n.Wz)(),(0,n.An)("div",$e,[(0,n.QD)("div",Te,[((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(o.themes,((t,e)=>((0,n.Wz)(),(0,n.An)("div",Ie,[(0,n.QD)("div",{class:(0,s.WN)(["item-theme",t.id===o.selected.id?"selectable--selected":"selectable"]),onClick:e=>r.selectData(t)},[(0,n.K2)(l,{fit:"contain",src:t?.mediaFiles?.mainimage.smallThumb,ratio:1,class:"tw-border tw-w-full tw-bg-white"},null,8,["src"]),(0,n.QD)("div",Ve,(0,s.WA)(t.name),1)],10,_e)])))),256))])])):((0,n.Wz)(),(0,n.An)("div",Ee,(0,s.WA)(t.$tr("isite.cms.message.noTemplates")),1))])),o.stepContent?((0,n.Wz)(),(0,n.An)("div",qe,[o.selected?((0,n.Wz)(),(0,n.An)("div",Be,[(0,n.K2)(l,{class:"img-themes",fit:"contain",src:o.selected?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"]),(0,n.QD)("div",Le,(0,s.WA)(o.selected.name),1),(0,n.QD)("div",{class:"select-description text-caption text-center tw-mb-3",innerHTML:o.selected.description},null,8,Pe),(0,n.K2)(c,{outline:"",label:t.$tr("isite.cms.message.showDemo"),color:"primary",rounded:"",href:o.selected.url,target:"_blank"},null,8,["label","href"])])):((0,n.Wz)(),(0,n.An)("div",Ue,[(0,n.QD)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:o.stepContent.description},null,8,Fe),o.stepContent?.mediaFiles?((0,n.Wz)(),(0,n.Az)(l,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])):(0,n.g1)("",!0)]))])):(0,n.g1)("",!0)])}const Ke={emits:["updateData"],data(){return{loading:!1,stepContent:"",selected:"",themes:[]}},mounted(){this.$nextTick((async function(){gt.nextStepButton=!1,this.getThemeSelected(),this.getThemes(),this.getStepInfo(),this.forceScroll()}))},methods:{selectData(t){this.selected=t,gt.data.layout=t,gt.nextStepButton=!0,this.$emit("updateData",t)},async getThemeSelected(){try{gt.data.layout&&gt.data.layout.planId==gt.data.plan.planId&&(this.selected=gt.data.layout,gt.nextStepButton=!0),this.loading=!1}catch(t){console.log(t)}},async getThemes(){try{const t=gt.data.plan;if(t){let e=t.planRelatedProducts;this.themes=e.map((e=>({...e,planId:t.planId})))}}catch(t){console.log(t)}},getStepInfo(){this.stepContent=gt.infoThemes},forceScroll(){const t=document.getElementsByClassName("scroll");t&&(t[0].style.overflowY="scroll")}}},Me=(0,bt.c)(Ke,[["render",Ne]]),He=Me;At()(Ke,"components",{QImg:zt.c,QBtn:xt.c});const je={class:"step-terms"},Re={key:0,class:"step-loading"},Oe=(0,n.QD)("div",null,null,-1),Ye=(0,n.QD)("div",null,null,-1),Ge=[Oe,Ye],Je={key:1},Xe={key:0,class:"step-title"},Ze={class:"tw-mx-auto tw-text-base tw-max-w-sm"},ta={class:"tw-flex tw-overflow-hidden tw-mb-3"},ea=(0,n.QD)("div",{class:"tw-pl-3 text-justify"}," Sí, quiero recibir correos electrónicos con consejos prácticos, novedades y ofertas especiales para mi página web. ",-1),aa={class:"tw-flex tw-overflow-hidden tw-mb-3"},na=["innerHTML"],sa={key:2,class:"step-sidebar"},ia={class:"terms-text tw-max-w-sm tw-w-full"},oa=["innerHTML"];function ra(t,e,a,i,o,r){const l=(0,n.E1)("q-checkbox"),c=(0,n.E1)("q-img");return(0,n.Wz)(),(0,n.An)("div",je,[o.loading?((0,n.Wz)(),(0,n.An)("div",Re,Ge)):((0,n.Wz)(),(0,n.An)("div",Je,[o.stepContent?((0,n.Wz)(),(0,n.An)("h2",Xe,(0,s.WA)(o.stepContent.title),1)):(0,n.g1)("",!0),(0,n.QD)("div",Ze,[(0,n.QD)("div",ta,[(0,n.K2)(l,{dense:"",modelValue:o.buttonEmail,"onUpdate:modelValue":e[0]||(e[0]=t=>o.buttonEmail=t),color:"primary"},null,8,["modelValue"]),ea]),(0,n.QD)("div",aa,[(0,n.K2)(l,{dense:"",modelValue:o.buttonTerms,"onUpdate:modelValue":e[1]||(e[1]=t=>o.buttonTerms=t),color:"primary"},null,8,["modelValue"]),(0,n.QD)("div",{class:"tw-pl-3 text-justify",innerHTML:r.termsAndConditions},null,8,na)])])])),o.stepContent?((0,n.Wz)(),(0,n.An)("div",sa,[(0,n.QD)("div",ia,[(0,n.QD)("div",{class:"tw-text-base tw-mb-8 text-center",innerHTML:o.stepContent.description},null,8,oa),o.stepContent.mediaFiles?((0,n.Wz)(),(0,n.Az)(c,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1},null,8,["src"])):(0,n.g1)("",!0)])])):(0,n.g1)("",!0)])}const la={emits:["updateData"],data(){return{loading:!1,buttonEmail:!1,buttonTerms:!1,stepContent:"",urlBase:this.$store.state.qsiteApp.baseUrl}},mounted(){this.$nextTick((async function(){this.getStepInfo(),this.getData()}))},watch:{buttonTerms(t,e){gt.nextStepButton=t,gt.data.terms.check=t,this.$emit("updateData",{})},buttonEmail(t,e){gt.data.terms.email=t,this.$emit("updateData",{})}},computed:{termsAndConditions(){let t={politics:this.$getSetting("iprofile::registerUserWithPoliticsOfPrivacy")??`${this.urlBase}/politica-de-privacidad`,terms:this.$getSetting("iprofile::registerUserWithTermsAndConditions")??`${this.urlBase}/terminos-y-condiciones`},e="";return t.politics&&(e+=`<a href="${t.politics}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.privacyPolicy")}</b></a>,`),t.terms&&(e+=`<a href="${t.terms}" target="_blank" class="text-green"><b>${this.$tr("iprofile.cms.message.termsAndConditions")}</b></a>,`),this.$tr("iprofile.cms.message.privacyData",{concatData:e,siteName:this.$getSetting("core::site-name")})}},methods:{async getData(){this.buttonTerms=gt.data.terms.check??!1,this.buttonEmail=gt.data.terms.email??!1,gt.previousStepButton=!0,gt.nextStepButton=this.buttonTerms},async getStepInfo(){this.stepContent=gt.infoTerms}}};var ca=a(78488);const da=(0,bt.c)(la,[["render",ra]]),ma=da;At()(la,"components",{QCheckbox:ca.c,QImg:zt.c});const ua={class:"step-welcome"},pa={class:"row justify-center align-center"},ga={class:"col-12 col-sm-10 col-md-11"},ha={class:"tw-mx-auto lg:tw-w-3/5 tw-mt-4"},fa={class:"step-title-1 text-primary"},wa=["innerHTML"],va={class:"text-center tw-mt-6"};function ya(t,e,a,i,o,r){const l=(0,n.E1)("q-img"),c=(0,n.E1)("q-btn");return(0,n.Wz)(),(0,n.An)("div",ua,[(0,n.QD)("div",pa,[(0,n.QD)("div",ga,[(0,n.QD)("div",ha,[(0,n.QD)("h2",fa,(0,s.WA)(o.stepContent.title),1),(0,n.QD)("div",{class:"tw-text-xs md:tw-text-xl lg:tw-px-8 tw-text-center tw-pb-4 md:tw-pb-6",innerHTML:o.stepContent.description},null,8,wa),o.stepContent?.mediaFiles?((0,n.Wz)(),(0,n.Az)(l,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb,ratio:1,class:"tw-h-44"},null,8,["src"])):(0,n.g1)("",!0),(0,n.QD)("div",va,[(0,n.K2)(c,{rounded:"",class:"tw-text-center","no-caps":"",color:"primary",size:"md",outline:"",onClick:e[0]||(e[0]=t=>r.nextStep())},{default:(0,n.Ql)((()=>[(0,n.mY)((0,s.WA)(t.$tr("isite.cms.label.start")),1)])),_:1})])])])])])}const ba={components:{},emits:["nextStep"],data(){return{stepContent:""}},mounted(){this.$nextTick((async function(){this.getStepInfo()}))},methods:{async getStepInfo(){this.stepContent=gt.infoWelcome},nextStep(){try{this.$emit("nextStep")}catch(t){console.log("error en welcome")}}}};var xa=a(41564);const za=(0,bt.c)(ba,[["render",ya]]),Qa=za;At()(ba,"components",{QImg:zt.c,QBtn:xt.c,QStepper:xa.c});const Da={class:"step-summary"},Aa={key:0,class:"step-loading"},Wa=(0,n.QD)("div",null,null,-1),Sa=(0,n.QD)("div",null,null,-1),Ca=[Wa,Sa],ka={key:1,class:"row justify-center align-center"},$a={class:"col-12 col-sm-10 col-md-11"},Ta={class:"tw-p-4 md:tw-p-4 tw-mx-auto lg:tw-w-3/5"},Ia=["innerHTML"],_a={key:1,class:"row q-col-gutter-md"},Va={class:"col-12 col-md-7 tw-mt-3"},Ea={class:"selected-label"},qa={class:"selected-box"},Ba={class:"selected-label"},La={class:"selected-box"},Pa={class:"row q-col-gutter-md"},Ua={class:"col-12 col-md-6"},Fa={class:"selected-label"},Na={class:"selected-box selected-box-m"},Ka={class:"col-12 col-md-6"},Ma={class:"selected-label"},Ha={class:"selected-box"},ja={class:"selected-label"},Ra={class:"selected-box"},Oa={class:"tw-font-medium"},Ya=["innerHTML"],Ga={key:0},Ja=(0,n.QD)("div",{class:"selected-label"},"Inteligencia Artificial",-1),Xa=(0,n.QD)("div",{class:"selected-box"}," Activado para sugerencias de contenido en mi sitio web. ",-1),Za=[Ja,Xa],tn={class:"col-12 col-md-5"};function en(t,e,a,i,o,r){const l=(0,n.E1)("q-img");return(0,n.Wz)(),(0,n.An)("div",Da,[o.loading?((0,n.Wz)(),(0,n.An)("div",Aa,Ca)):((0,n.Wz)(),(0,n.An)("div",ka,[(0,n.QD)("div",$a,[(0,n.QD)("div",Ta,[o.stepContent?((0,n.Wz)(),(0,n.An)("div",{key:0,class:"tw-text-xs md:tw-text-base text-center tw-font-bold tw-pb-4",innerHTML:o.stepContent.description},null,8,Ia)):(0,n.g1)("",!0),o.selected?((0,n.Wz)(),(0,n.An)("div",_a,[(0,n.QD)("div",Va,[(0,n.QD)("div",Ea,(0,s.WA)(t.$tr("isite.cms.label.user")),1),(0,n.QD)("div",qa,(0,s.WA)(o.selected.user.email),1),(0,n.QD)("div",Ba,(0,s.WA)(t.$tr("isite.cms.label.organization")),1),(0,n.QD)("div",La,(0,s.WA)(o.selected.organization),1),(0,n.QD)("div",Pa,[(0,n.QD)("div",Ua,[(0,n.QD)("div",Fa,(0,s.WA)(t.$tr("isite.cms.label.category")),1),(0,n.QD)("div",Na,(0,s.WA)(o.selected.category.title),1)]),(0,n.QD)("div",Ka,[(0,n.QD)("div",Ma,(0,s.WA)(t.$tr("isite.cms.label.plan")),1),(0,n.QD)("div",Ha,(0,s.WA)(o.selected.plan.product.name)+" "+(0,s.WA)(o.selected.plan.optionValue),1)])]),(0,n.QD)("div",ja,(0,s.WA)(t.$tr("isite.cms.label.template")),1),(0,n.QD)("div",Ra,[(0,n.QD)("div",Oa,(0,s.WA)(o.selected.layout.name),1),(0,n.QD)("div",{class:"select-description",innerHTML:o.selected.layout.description},null,8,Ya)]),o.selected.form.check?((0,n.Wz)(),(0,n.An)("div",Ga,Za)):(0,n.g1)("",!0)]),(0,n.QD)("div",tn,[(0,n.K2)(l,{class:"img-themes tw-h-44",fit:"contain",src:o.selected.layout?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])])])):(0,n.g1)("",!0)])])]))])}const an={components:{},data(){return{loading:!1,selected:"",stepContent:""}},mounted(){this.$nextTick((async function(){this.getStepInfo(),this.getDataSelected()}))},methods:{async getStepInfo(){this.stepContent=gt.infoSummary},async getDataSelected(){try{this.loading=!0,this.selected=gt.data,this.loading=!1}catch(t){console.log(t)}}}},nn=(0,bt.c)(an,[["render",en]]),sn=nn;At()(an,"components",{QImg:zt.c,QStepper:xa.c});const on={class:"step-ai tw-overflow-y-hidden"},rn={class:"step-title"},ln={class:"tw-flex tw-items-center tw-justify-center tw-mb-3"},cn=(0,n.QD)("div",{class:"tw-pl-2 tw-text-xs md:tw-text-base text-justify"}," Usar Inteligencia Artificial para sugerencias de contenido en mi sitio web. ",-1),dn={key:0,class:"tw-mt-6"},mn=(0,n.QD)("div",{class:"tw-pl-4 tw-text-xs"},"Completa el siguiente formulario ",-1),un={style:{"min-height":"100px"}},pn={key:1,class:"step-sidebar"},gn={class:"select-ai tw-max-w-md tw-w-full"},hn=["innerHTML"];function fn(t,e,a,i,o,r){const l=(0,n.E1)("q-toggle"),c=(0,n.E1)("dynamic-form"),d=(0,n.E1)("q-img");return(0,n.Wz)(),(0,n.An)("div",on,[o.stepContent?((0,n.Wz)(),(0,n.An)("div",{key:0,class:(0,s.WN)(["tw-max-w-xl tw-mx-auto",{"form-inactive":!o.activeForm}])},[(0,n.QD)("h2",rn,(0,s.WA)(o.stepContent.title),1),(0,n.QD)("div",ln,[(0,n.K2)(l,{modelValue:o.activeForm,"onUpdate:modelValue":e[0]||(e[0]=t=>o.activeForm=t),color:"primary"},null,8,["modelValue"]),cn]),o.activeForm?((0,n.Wz)(),(0,n.An)("div",dn,[mn,(0,n.QD)("div",un,[(0,n.K2)(c,{modelValue:o.form,"onUpdate:modelValue":e[1]||(e[1]=t=>o.form=t),"form-id":o.formId,formType:"grid","no-actions":"",ref:"ai-form","default-col-class":"col-6"},null,8,["modelValue","form-id"])])])):(0,n.g1)("",!0)],2)):(0,n.g1)("",!0),o.stepContent?((0,n.Wz)(),(0,n.An)("div",pn,[(0,n.QD)("div",gn,[(0,n.QD)("div",{class:"tw-text-base tw-text-center tw-mb-10",innerHTML:o.stepContent.description},null,8,hn),o.stepContent.mediaFiles?((0,n.Wz)(),(0,n.Az)(d,{key:0,fit:"contain",src:o.stepContent?.mediaFiles?.mainimage.extraLargeThumb},null,8,["src"])):(0,n.g1)("",!0)])])):(0,n.g1)("",!0)])}const wn={props:{info:{type:Array,default:()=>[]}},emits:["updateData"],data(){return{activeForm:!1,stepContent:"",form:{},formId:""}},mounted(){this.$nextTick((async function(){this.getData(),this.getStepInfo()}))},watch:{activeForm(t,e){gt.data.form.check=t,t||(gt.data.form.data=!1),this.$emit("updateData",t)},form(t,e){gt.data.form.data=t}},methods:{async getData(){gt.data.form?.check&&(this.activeForm=gt.data.form.check,this.form=gt.data.form.data)},async verifyForm(){try{let t=!1;if(this.$refs["ai-form"]){let e=await this.$refs["ai-form"].validateCompleteForm();e&&(t=!0)}else console.log("no form");return t}catch(t){console.log(t)}},async getStepInfo(){this.stepContent=gt.infoAi,this.formId=this.stepContent.formId}}};var vn=a(64640);const yn=(0,bt.c)(wn,[["render",fn]]),bn=yn;At()(wn,"components",{QToggle:vn.c,QImg:zt.c});const xn=[{id:j,title:"Welcome",prefix:j,component:Qa,done:!1},{id:R,title:"Terms",prefix:R,component:ma,done:!1},{id:O,title:"Company",prefix:O,component:Lt,done:!1},{id:Y,title:"Categories",prefix:Y,component:St,done:!1},{id:G,title:"Plans",prefix:G,component:be,done:!1},{id:J,title:"Themes",prefix:J,component:He,done:!1},{id:X,title:"AI",prefix:X,component:bn,done:!1},{id:Z,title:"Summary",prefix:Z,component:sn,done:!1}],zn={beforeUnmount(){},computed:{steps(){const t=!!parseInt(this.$getSetting("isite::contentGenerationWithAI"));return xn.filter((e=>!(e.id==X&&!t)&&e))},siteName(){return this.$getSetting("core::site-name")},showStepperNavigation(){return this.currentStep!=j},activatePreviousButton(){return gt.previousStepButton},activateNextButton(){return gt.nextStepButton},getStep(){return gt.step}},data(){return{loading:!1,data:[],logo:this.$store.state.qsiteApp.logo,currentStep:0,progress:0,progressPercent:0,urlBase:this.$store.state.qsiteApp.baseUrl,dataUrl:{planId:"",billingCycle:"",layoutId:""},welcome:j,summary:Z,themes:J,terms:R,buttonLoading:!1}},mounted(){this.$nextTick((async function(){this.init()}))},methods:{async init(){await this.getInfo(),await this.configProgress()},async getInfo(){this.loading=!0;try{gt.data.user=this.$store.getters["quserAuth/user"]}catch(n){console.log(n)}gt.infoWizard=await vt().getInfoWizard();let t=await this.$cache.get.item("org-wizard-categories");!t?.length>0&&(t=await vt().getCategories(),this.$cache.set("org-wizard-categories",t)),gt.categories=t;let e=await this.$cache.get.item("org-wizard-plans");!e?.length>0&&(e=await vt().getPlans(tt),this.$cache.set("org-wizard-plans",e)),gt.plans=e,gt.step=await this.$cache.get.item("org-wizard-step"),gt.step=gt.step??j;const a=await this.$cache.get.item("org-wizard-data");gt.data.user=gt.data.user??a?.user,gt.data.terms=a?.terms?a.terms:gt.data.terms,gt.data.organization=a?.organization??"",gt.data.category=a?.category??!1,gt.data.plan=a?.plan??!1,gt.data.layout=a?.layout??!1,this.updateData(),this.loading=!1},async configProgress(){this.progressPercent=1/(this.steps.length-1),this.currentStep=gt.step,this.progress=this.progressPercent*this.currentStep},async nextStep(){if(this.currentStep==O){this.buttonLoading=!0;const t=await this.$refs.stepComponent[0].checkOrganizationName(gt.data.organization);if(this.buttonLoading=!1,t&&t?.title)return this.$alert.info({mode:"modal",title:this.siteName,message:this.$tr("isite.cms.alreadyInUse"),actions:[]}),!1}if(this.currentStep==X&&gt.data.form.check){let t=await this.$refs.stepComponent[0].verifyForm();if(!t)return!1}if(this.currentStep==Z)return this.redirectAfterWizard(),!1;this.currentStep+=1,gt.step=this.currentStep,this.updateData(),this.configProgress(),this.$refs.stepper.next()},previousStep(){this.currentStep-=1,gt.step=this.currentStep,this.updateData(),this.configProgress(),this.$refs.stepper.previous()},updateData(){this.$cache.set("org-wizard-step",this.$clone(gt.step)),this.$cache.set("org-wizard-data",this.$clone(gt.data))},async redirectAfterWizard(){let t=null;const e=this.$getSetting("isite::wizardTenantType"),a={billingcycle:gt.data.plan.optionValue.toLowerCase(),layoutId:gt.data.layout.entity.id,organizationName:gt.data.organization,categoryId:gt.data.category.id,email:gt.data.user.email,planId:gt.data.plan.product.entity.id,formIA:gt.data.form.data};switch(e){case"weygo":t=gt.data.plan.planUrl,Object.keys(a).forEach((e=>t+=`&${e}=${a[e]}`));break;default:this.$alert.info({mode:"modal",title:this.siteName,icon:"fa-duotone fa-spinner-third fa-spin",message:this.$tr("isite.cms.message.creatingTenant"),actions:[]});const e=await this.$crud.create("apiRoutes.qplan.buy",a).catch((t=>{this.$alert.error({message:`${this.$tr("isite.cms.message.recordNoCreated")}`})}));e.data&&e.data.redirectTo&&(t=e.data.redirectTo);break}t&&(this.$cache.remove("org-wizard-data"),this.$cache.remove("org-wizard-step"),this.$cache.remove("org-wizard-categories"),this.$cache.remove("org-wizard-plans"),this.$helper.openExternalURL(t,!1))}}};var Qn=a(48488),Dn=a(65972),An=a(41128),Wn=a(41440),Sn=a(30852);const Cn=(0,bt.c)(zn,[["render",b]]),kn=Cn;At()(zn,"components",{QLinearProgress:Qn.c,QStepper:xa.c,QStepperNavigation:Dn.c,QBtn:xt.c,QStep:An.c,QIcon:ve.c,QSlider:Wn.c,QDialog:Sn.c})}}]);